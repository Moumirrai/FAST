var eh=Object.create;var Wr=Object.defineProperty;var th=Object.getOwnPropertyDescriptor;var rh=Object.getOwnPropertyNames;var nh=Object.getPrototypeOf,sh=Object.prototype.hasOwnProperty;var O=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports),ih=(i,e)=>{for(var t in e)Wr(i,t,{get:e[t],enumerable:!0})},ha=(i,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of rh(e))!sh.call(i,a)&&a!==t&&Wr(i,a,{get:()=>e[a],enumerable:!(n=th(e,a))||n.enumerable});return i};var Se=(i,e,t)=>(t=i!=null?eh(nh(i)):{},ha(e||!i||!i.__esModule?Wr(t,"default",{value:i,enumerable:!0}):t,i)),ah=i=>ha(Wr({},"__esModule",{value:!0}),i);var zr=O((Ms,jt)=>{(function(i,e){typeof Ms=="object"&&typeof jt!="undefined"?jt.exports=e():typeof define=="function"&&define.amd?define(e):i.moment=e()})(Ms,function(){"use strict";var i;function e(){return i.apply(null,arguments)}function t(r){i=r}function n(r){return r instanceof Array||Object.prototype.toString.call(r)==="[object Array]"}function a(r){return r!=null&&Object.prototype.toString.call(r)==="[object Object]"}function u(r,s){return Object.prototype.hasOwnProperty.call(r,s)}function p(r){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(r).length===0;var s;for(s in r)if(u(r,s))return!1;return!0}function h(r){return r===void 0}function v(r){return typeof r=="number"||Object.prototype.toString.call(r)==="[object Number]"}function d(r){return r instanceof Date||Object.prototype.toString.call(r)==="[object Date]"}function g(r,s){var o=[],l,c=r.length;for(l=0;l<c;++l)o.push(s(r[l],l));return o}function I(r,s){for(var o in s)u(s,o)&&(r[o]=s[o]);return u(s,"toString")&&(r.toString=s.toString),u(s,"valueOf")&&(r.valueOf=s.valueOf),r}function y(r,s,o,l){return Hi(r,s,o,l,!0).utc()}function x(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function S(r){return r._pf==null&&(r._pf=x()),r._pf}var V;Array.prototype.some?V=Array.prototype.some:V=function(r){var s=Object(this),o=s.length>>>0,l;for(l=0;l<o;l++)if(l in s&&r.call(this,s[l],l,s))return!0;return!1};function K(r){if(r._isValid==null){var s=S(r),o=V.call(s.parsedDateParts,function(c){return c!=null}),l=!isNaN(r._d.getTime())&&s.overflow<0&&!s.empty&&!s.invalidEra&&!s.invalidMonth&&!s.invalidWeekday&&!s.weekdayMismatch&&!s.nullInput&&!s.invalidFormat&&!s.userInvalidated&&(!s.meridiem||s.meridiem&&o);if(r._strict&&(l=l&&s.charsLeftOver===0&&s.unusedTokens.length===0&&s.bigHour===void 0),Object.isFrozen==null||!Object.isFrozen(r))r._isValid=l;else return l}return r._isValid}function re(r){var s=y(NaN);return r!=null?I(S(s),r):S(s).userInvalidated=!0,s}var Pe=e.momentProperties=[],It=!1;function Xn(r,s){var o,l,c,m=Pe.length;if(h(s._isAMomentObject)||(r._isAMomentObject=s._isAMomentObject),h(s._i)||(r._i=s._i),h(s._f)||(r._f=s._f),h(s._l)||(r._l=s._l),h(s._strict)||(r._strict=s._strict),h(s._tzm)||(r._tzm=s._tzm),h(s._isUTC)||(r._isUTC=s._isUTC),h(s._offset)||(r._offset=s._offset),h(s._pf)||(r._pf=S(s)),h(s._locale)||(r._locale=s._locale),m>0)for(o=0;o<m;o++)l=Pe[o],c=s[l],h(c)||(r[l]=c);return r}function ir(r){Xn(this,r),this._d=new Date(r._d!=null?r._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),It===!1&&(It=!0,e.updateOffset(this),It=!1)}function He(r){return r instanceof ir||r!=null&&r._isAMomentObject!=null}function Si(r){e.suppressDeprecationWarnings}function Le(r,s){var o=!0;return I(function(){if(e.deprecationHandler!=null&&e.deprecationHandler(null,r),o){var l=[],c,m,f,P=arguments.length;for(m=0;m<P;m++){if(c="",typeof arguments[m]=="object"){c+=`
[`+m+"] ";for(f in arguments[0])u(arguments[0],f)&&(c+=f+": "+arguments[0][f]+", ");c=c.slice(0,-2)}else c=arguments[m];l.push(c)}Si(r+`
Arguments: `+Array.prototype.slice.call(l).join("")+`
`+new Error().stack),o=!1}return s.apply(this,arguments)},s)}var wi={};function bi(r,s){e.deprecationHandler!=null&&e.deprecationHandler(r,s),wi[r]||(Si(s),wi[r]=!0)}e.suppressDeprecationWarnings=!1,e.deprecationHandler=null;function Je(r){return typeof Function!="undefined"&&r instanceof Function||Object.prototype.toString.call(r)==="[object Function]"}function rc(r){var s,o;for(o in r)u(r,o)&&(s=r[o],Je(s)?this[o]=s:this["_"+o]=s);this._config=r,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function es(r,s){var o=I({},r),l;for(l in s)u(s,l)&&(a(r[l])&&a(s[l])?(o[l]={},I(o[l],r[l]),I(o[l],s[l])):s[l]!=null?o[l]=s[l]:delete o[l]);for(l in r)u(r,l)&&!u(s,l)&&a(r[l])&&(o[l]=I({},o[l]));return o}function ts(r){r!=null&&this.set(r)}var rs;Object.keys?rs=Object.keys:rs=function(r){var s,o=[];for(s in r)u(r,s)&&o.push(s);return o};var nc={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function sc(r,s,o){var l=this._calendar[r]||this._calendar.sameElse;return Je(l)?l.call(s,o):l}function Qe(r,s,o){var l=""+Math.abs(r),c=s-l.length,m=r>=0;return(m?o?"+":"":"-")+Math.pow(10,Math.max(0,c)).toString().substr(1)+l}var ns=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,wr=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,ss={},qt={};function M(r,s,o,l){var c=l;typeof l=="string"&&(c=function(){return this[l]()}),r&&(qt[r]=c),s&&(qt[s[0]]=function(){return Qe(c.apply(this,arguments),s[1],s[2])}),o&&(qt[o]=function(){return this.localeData().ordinal(c.apply(this,arguments),r)})}function ic(r){return r.match(/\[[\s\S]/)?r.replace(/^\[|\]$/g,""):r.replace(/\\/g,"")}function ac(r){var s=r.match(ns),o,l;for(o=0,l=s.length;o<l;o++)qt[s[o]]?s[o]=qt[s[o]]:s[o]=ic(s[o]);return function(c){var m="",f;for(f=0;f<l;f++)m+=Je(s[f])?s[f].call(c,r):s[f];return m}}function br(r,s){return r.isValid()?(s=xi(s,r.localeData()),ss[s]=ss[s]||ac(s),ss[s](r)):r.localeData().invalidDate()}function xi(r,s){var o=5;function l(c){return s.longDateFormat(c)||c}for(wr.lastIndex=0;o>=0&&wr.test(r);)r=r.replace(wr,l),wr.lastIndex=0,o-=1;return r}var oc={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function lc(r){var s=this._longDateFormat[r],o=this._longDateFormat[r.toUpperCase()];return s||!o?s:(this._longDateFormat[r]=o.match(ns).map(function(l){return l==="MMMM"||l==="MM"||l==="DD"||l==="dddd"?l.slice(1):l}).join(""),this._longDateFormat[r])}var uc="Invalid date";function cc(){return this._invalidDate}var pc="%d",mc=/\d{1,2}/;function vc(r){return this._ordinal.replace("%d",r)}var hc={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function dc(r,s,o,l){var c=this._relativeTime[o];return Je(c)?c(r,s,o,l):c.replace(/%d/i,r)}function fc(r,s){var o=this._relativeTime[r>0?"future":"past"];return Je(o)?o(s):o.replace(/%s/i,s)}var ar={};function fe(r,s){var o=r.toLowerCase();ar[o]=ar[o+"s"]=ar[s]=r}function Te(r){return typeof r=="string"?ar[r]||ar[r.toLowerCase()]:void 0}function is(r){var s={},o,l;for(l in r)u(r,l)&&(o=Te(l),o&&(s[o]=r[l]));return s}var Ri={};function Ie(r,s){Ri[r]=s}function Ic(r){var s=[],o;for(o in r)u(r,o)&&s.push({unit:o,priority:Ri[o]});return s.sort(function(l,c){return l.priority-c.priority}),s}function xr(r){return r%4===0&&r%100!==0||r%400===0}function Ce(r){return r<0?Math.ceil(r)||0:Math.floor(r)}function q(r){var s=+r,o=0;return s!==0&&isFinite(s)&&(o=Ce(s)),o}function Ut(r,s){return function(o){return o!=null?(Di(this,r,o),e.updateOffset(this,s),this):Rr(this,r)}}function Rr(r,s){return r.isValid()?r._d["get"+(r._isUTC?"UTC":"")+s]():NaN}function Di(r,s,o){r.isValid()&&!isNaN(o)&&(s==="FullYear"&&xr(r.year())&&r.month()===1&&r.date()===29?(o=q(o),r._d["set"+(r._isUTC?"UTC":"")+s](o,r.month(),Nr(o,r.month()))):r._d["set"+(r._isUTC?"UTC":"")+s](o))}function gc(r){return r=Te(r),Je(this[r])?this[r]():this}function yc(r,s){if(typeof r=="object"){r=is(r);var o=Ic(r),l,c=o.length;for(l=0;l<c;l++)this[o[l].unit](r[o[l].unit])}else if(r=Te(r),Je(this[r]))return this[r](s);return this}var Mi=/\d/,Ve=/\d\d/,Pi=/\d{3}/,as=/\d{4}/,Dr=/[+-]?\d{6}/,J=/\d\d?/,Ai=/\d\d\d\d?/,Oi=/\d\d\d\d\d\d?/,Mr=/\d{1,3}/,os=/\d{1,4}/,Pr=/[+-]?\d{1,6}/,Bt=/\d+/,Ar=/[+-]?\d+/,_c=/Z|[+-]\d\d:?\d\d/gi,Or=/Z|[+-]\d\d(?::?\d\d)?/gi,Sc=/[+-]?\d+(\.\d{1,3})?/,or=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Er;Er={};function b(r,s,o){Er[r]=Je(s)?s:function(l,c){return l&&o?o:s}}function wc(r,s){return u(Er,r)?Er[r](s._strict,s._locale):new RegExp(bc(r))}function bc(r){return ke(r.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(s,o,l,c,m){return o||l||c||m}))}function ke(r){return r.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var ls={};function z(r,s){var o,l=s,c;for(typeof r=="string"&&(r=[r]),v(s)&&(l=function(m,f){f[s]=q(m)}),c=r.length,o=0;o<c;o++)ls[r[o]]=l}function lr(r,s){z(r,function(o,l,c,m){c._w=c._w||{},s(o,c._w,c,m)})}function xc(r,s,o){s!=null&&u(ls,r)&&ls[r](s,o._a,o,r)}var ge=0,it=1,Xe=2,oe=3,je=4,at=5,At=6,Rc=7,Dc=8;function Mc(r,s){return(r%s+s)%s}var ne;Array.prototype.indexOf?ne=Array.prototype.indexOf:ne=function(r){var s;for(s=0;s<this.length;++s)if(this[s]===r)return s;return-1};function Nr(r,s){if(isNaN(r)||isNaN(s))return NaN;var o=Mc(s,12);return r+=(s-o)/12,o===1?xr(r)?29:28:31-o%7%2}M("M",["MM",2],"Mo",function(){return this.month()+1}),M("MMM",0,0,function(r){return this.localeData().monthsShort(this,r)}),M("MMMM",0,0,function(r){return this.localeData().months(this,r)}),fe("month","M"),Ie("month",8),b("M",J),b("MM",J,Ve),b("MMM",function(r,s){return s.monthsShortRegex(r)}),b("MMMM",function(r,s){return s.monthsRegex(r)}),z(["M","MM"],function(r,s){s[it]=q(r)-1}),z(["MMM","MMMM"],function(r,s,o,l){var c=o._locale.monthsParse(r,l,o._strict);c!=null?s[it]=c:S(o).invalidMonth=r});var Pc="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Ei="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Ni=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Ac=or,Oc=or;function Ec(r,s){return r?n(this._months)?this._months[r.month()]:this._months[(this._months.isFormat||Ni).test(s)?"format":"standalone"][r.month()]:n(this._months)?this._months:this._months.standalone}function Nc(r,s){return r?n(this._monthsShort)?this._monthsShort[r.month()]:this._monthsShort[Ni.test(s)?"format":"standalone"][r.month()]:n(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function Vc(r,s,o){var l,c,m,f=r.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],l=0;l<12;++l)m=y([2e3,l]),this._shortMonthsParse[l]=this.monthsShort(m,"").toLocaleLowerCase(),this._longMonthsParse[l]=this.months(m,"").toLocaleLowerCase();return o?s==="MMM"?(c=ne.call(this._shortMonthsParse,f),c!==-1?c:null):(c=ne.call(this._longMonthsParse,f),c!==-1?c:null):s==="MMM"?(c=ne.call(this._shortMonthsParse,f),c!==-1?c:(c=ne.call(this._longMonthsParse,f),c!==-1?c:null)):(c=ne.call(this._longMonthsParse,f),c!==-1?c:(c=ne.call(this._shortMonthsParse,f),c!==-1?c:null))}function kc(r,s,o){var l,c,m;if(this._monthsParseExact)return Vc.call(this,r,s,o);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),l=0;l<12;l++){if(c=y([2e3,l]),o&&!this._longMonthsParse[l]&&(this._longMonthsParse[l]=new RegExp("^"+this.months(c,"").replace(".","")+"$","i"),this._shortMonthsParse[l]=new RegExp("^"+this.monthsShort(c,"").replace(".","")+"$","i")),!o&&!this._monthsParse[l]&&(m="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),this._monthsParse[l]=new RegExp(m.replace(".",""),"i")),o&&s==="MMMM"&&this._longMonthsParse[l].test(r))return l;if(o&&s==="MMM"&&this._shortMonthsParse[l].test(r))return l;if(!o&&this._monthsParse[l].test(r))return l}}function Vi(r,s){var o;if(!r.isValid())return r;if(typeof s=="string"){if(/^\d+$/.test(s))s=q(s);else if(s=r.localeData().monthsParse(s),!v(s))return r}return o=Math.min(r.date(),Nr(r.year(),s)),r._d["set"+(r._isUTC?"UTC":"")+"Month"](s,o),r}function ki(r){return r!=null?(Vi(this,r),e.updateOffset(this,!0),this):Rr(this,"Month")}function Lc(){return Nr(this.year(),this.month())}function Tc(r){return this._monthsParseExact?(u(this,"_monthsRegex")||Li.call(this),r?this._monthsShortStrictRegex:this._monthsShortRegex):(u(this,"_monthsShortRegex")||(this._monthsShortRegex=Ac),this._monthsShortStrictRegex&&r?this._monthsShortStrictRegex:this._monthsShortRegex)}function Cc(r){return this._monthsParseExact?(u(this,"_monthsRegex")||Li.call(this),r?this._monthsStrictRegex:this._monthsRegex):(u(this,"_monthsRegex")||(this._monthsRegex=Oc),this._monthsStrictRegex&&r?this._monthsStrictRegex:this._monthsRegex)}function Li(){function r(f,P){return P.length-f.length}var s=[],o=[],l=[],c,m;for(c=0;c<12;c++)m=y([2e3,c]),s.push(this.monthsShort(m,"")),o.push(this.months(m,"")),l.push(this.months(m,"")),l.push(this.monthsShort(m,""));for(s.sort(r),o.sort(r),l.sort(r),c=0;c<12;c++)s[c]=ke(s[c]),o[c]=ke(o[c]);for(c=0;c<24;c++)l[c]=ke(l[c]);this._monthsRegex=new RegExp("^("+l.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+s.join("|")+")","i")}M("Y",0,0,function(){var r=this.year();return r<=9999?Qe(r,4):"+"+r}),M(0,["YY",2],0,function(){return this.year()%100}),M(0,["YYYY",4],0,"year"),M(0,["YYYYY",5],0,"year"),M(0,["YYYYYY",6,!0],0,"year"),fe("year","y"),Ie("year",1),b("Y",Ar),b("YY",J,Ve),b("YYYY",os,as),b("YYYYY",Pr,Dr),b("YYYYYY",Pr,Dr),z(["YYYYY","YYYYYY"],ge),z("YYYY",function(r,s){s[ge]=r.length===2?e.parseTwoDigitYear(r):q(r)}),z("YY",function(r,s){s[ge]=e.parseTwoDigitYear(r)}),z("Y",function(r,s){s[ge]=parseInt(r,10)});function ur(r){return xr(r)?366:365}e.parseTwoDigitYear=function(r){return q(r)+(q(r)>68?1900:2e3)};var Ti=Ut("FullYear",!0);function Fc(){return xr(this.year())}function qc(r,s,o,l,c,m,f){var P;return r<100&&r>=0?(P=new Date(r+400,s,o,l,c,m,f),isFinite(P.getFullYear())&&P.setFullYear(r)):P=new Date(r,s,o,l,c,m,f),P}function cr(r){var s,o;return r<100&&r>=0?(o=Array.prototype.slice.call(arguments),o[0]=r+400,s=new Date(Date.UTC.apply(null,o)),isFinite(s.getUTCFullYear())&&s.setUTCFullYear(r)):s=new Date(Date.UTC.apply(null,arguments)),s}function Vr(r,s,o){var l=7+s-o,c=(7+cr(r,0,l).getUTCDay()-s)%7;return-c+l-1}function Ci(r,s,o,l,c){var m=(7+o-l)%7,f=Vr(r,l,c),P=1+7*(s-1)+m+f,L,H;return P<=0?(L=r-1,H=ur(L)+P):P>ur(r)?(L=r+1,H=P-ur(r)):(L=r,H=P),{year:L,dayOfYear:H}}function pr(r,s,o){var l=Vr(r.year(),s,o),c=Math.floor((r.dayOfYear()-l-1)/7)+1,m,f;return c<1?(f=r.year()-1,m=c+ot(f,s,o)):c>ot(r.year(),s,o)?(m=c-ot(r.year(),s,o),f=r.year()+1):(f=r.year(),m=c),{week:m,year:f}}function ot(r,s,o){var l=Vr(r,s,o),c=Vr(r+1,s,o);return(ur(r)-l+c)/7}M("w",["ww",2],"wo","week"),M("W",["WW",2],"Wo","isoWeek"),fe("week","w"),fe("isoWeek","W"),Ie("week",5),Ie("isoWeek",5),b("w",J),b("ww",J,Ve),b("W",J),b("WW",J,Ve),lr(["w","ww","W","WW"],function(r,s,o,l){s[l.substr(0,1)]=q(r)});function Uc(r){return pr(r,this._week.dow,this._week.doy).week}var Bc={dow:0,doy:6};function Yc(){return this._week.dow}function Gc(){return this._week.doy}function Wc(r){var s=this.localeData().week(this);return r==null?s:this.add((r-s)*7,"d")}function zc(r){var s=pr(this,1,4).week;return r==null?s:this.add((r-s)*7,"d")}M("d",0,"do","day"),M("dd",0,0,function(r){return this.localeData().weekdaysMin(this,r)}),M("ddd",0,0,function(r){return this.localeData().weekdaysShort(this,r)}),M("dddd",0,0,function(r){return this.localeData().weekdays(this,r)}),M("e",0,0,"weekday"),M("E",0,0,"isoWeekday"),fe("day","d"),fe("weekday","e"),fe("isoWeekday","E"),Ie("day",11),Ie("weekday",11),Ie("isoWeekday",11),b("d",J),b("e",J),b("E",J),b("dd",function(r,s){return s.weekdaysMinRegex(r)}),b("ddd",function(r,s){return s.weekdaysShortRegex(r)}),b("dddd",function(r,s){return s.weekdaysRegex(r)}),lr(["dd","ddd","dddd"],function(r,s,o,l){var c=o._locale.weekdaysParse(r,l,o._strict);c!=null?s.d=c:S(o).invalidWeekday=r}),lr(["d","e","E"],function(r,s,o,l){s[l]=q(r)});function Hc(r,s){return typeof r!="string"?r:isNaN(r)?(r=s.weekdaysParse(r),typeof r=="number"?r:null):parseInt(r,10)}function jc(r,s){return typeof r=="string"?s.weekdaysParse(r)%7||7:isNaN(r)?null:r}function us(r,s){return r.slice(s,7).concat(r.slice(0,s))}var $c="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Fi="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Kc="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Zc=or,Jc=or,Qc=or;function Xc(r,s){var o=n(this._weekdays)?this._weekdays:this._weekdays[r&&r!==!0&&this._weekdays.isFormat.test(s)?"format":"standalone"];return r===!0?us(o,this._week.dow):r?o[r.day()]:o}function ep(r){return r===!0?us(this._weekdaysShort,this._week.dow):r?this._weekdaysShort[r.day()]:this._weekdaysShort}function tp(r){return r===!0?us(this._weekdaysMin,this._week.dow):r?this._weekdaysMin[r.day()]:this._weekdaysMin}function rp(r,s,o){var l,c,m,f=r.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],l=0;l<7;++l)m=y([2e3,1]).day(l),this._minWeekdaysParse[l]=this.weekdaysMin(m,"").toLocaleLowerCase(),this._shortWeekdaysParse[l]=this.weekdaysShort(m,"").toLocaleLowerCase(),this._weekdaysParse[l]=this.weekdays(m,"").toLocaleLowerCase();return o?s==="dddd"?(c=ne.call(this._weekdaysParse,f),c!==-1?c:null):s==="ddd"?(c=ne.call(this._shortWeekdaysParse,f),c!==-1?c:null):(c=ne.call(this._minWeekdaysParse,f),c!==-1?c:null):s==="dddd"?(c=ne.call(this._weekdaysParse,f),c!==-1||(c=ne.call(this._shortWeekdaysParse,f),c!==-1)?c:(c=ne.call(this._minWeekdaysParse,f),c!==-1?c:null)):s==="ddd"?(c=ne.call(this._shortWeekdaysParse,f),c!==-1||(c=ne.call(this._weekdaysParse,f),c!==-1)?c:(c=ne.call(this._minWeekdaysParse,f),c!==-1?c:null)):(c=ne.call(this._minWeekdaysParse,f),c!==-1||(c=ne.call(this._weekdaysParse,f),c!==-1)?c:(c=ne.call(this._shortWeekdaysParse,f),c!==-1?c:null))}function np(r,s,o){var l,c,m;if(this._weekdaysParseExact)return rp.call(this,r,s,o);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),l=0;l<7;l++){if(c=y([2e3,1]).day(l),o&&!this._fullWeekdaysParse[l]&&(this._fullWeekdaysParse[l]=new RegExp("^"+this.weekdays(c,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[l]=new RegExp("^"+this.weekdaysShort(c,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[l]=new RegExp("^"+this.weekdaysMin(c,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[l]||(m="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[l]=new RegExp(m.replace(".",""),"i")),o&&s==="dddd"&&this._fullWeekdaysParse[l].test(r))return l;if(o&&s==="ddd"&&this._shortWeekdaysParse[l].test(r))return l;if(o&&s==="dd"&&this._minWeekdaysParse[l].test(r))return l;if(!o&&this._weekdaysParse[l].test(r))return l}}function sp(r){if(!this.isValid())return r!=null?this:NaN;var s=this._isUTC?this._d.getUTCDay():this._d.getDay();return r!=null?(r=Hc(r,this.localeData()),this.add(r-s,"d")):s}function ip(r){if(!this.isValid())return r!=null?this:NaN;var s=(this.day()+7-this.localeData()._week.dow)%7;return r==null?s:this.add(r-s,"d")}function ap(r){if(!this.isValid())return r!=null?this:NaN;if(r!=null){var s=jc(r,this.localeData());return this.day(this.day()%7?s:s-7)}else return this.day()||7}function op(r){return this._weekdaysParseExact?(u(this,"_weekdaysRegex")||cs.call(this),r?this._weekdaysStrictRegex:this._weekdaysRegex):(u(this,"_weekdaysRegex")||(this._weekdaysRegex=Zc),this._weekdaysStrictRegex&&r?this._weekdaysStrictRegex:this._weekdaysRegex)}function lp(r){return this._weekdaysParseExact?(u(this,"_weekdaysRegex")||cs.call(this),r?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(u(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Jc),this._weekdaysShortStrictRegex&&r?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function up(r){return this._weekdaysParseExact?(u(this,"_weekdaysRegex")||cs.call(this),r?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(u(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Qc),this._weekdaysMinStrictRegex&&r?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function cs(){function r(_e,mt){return mt.length-_e.length}var s=[],o=[],l=[],c=[],m,f,P,L,H;for(m=0;m<7;m++)f=y([2e3,1]).day(m),P=ke(this.weekdaysMin(f,"")),L=ke(this.weekdaysShort(f,"")),H=ke(this.weekdays(f,"")),s.push(P),o.push(L),l.push(H),c.push(P),c.push(L),c.push(H);s.sort(r),o.sort(r),l.sort(r),c.sort(r),this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function ps(){return this.hours()%12||12}function cp(){return this.hours()||24}M("H",["HH",2],0,"hour"),M("h",["hh",2],0,ps),M("k",["kk",2],0,cp),M("hmm",0,0,function(){return""+ps.apply(this)+Qe(this.minutes(),2)}),M("hmmss",0,0,function(){return""+ps.apply(this)+Qe(this.minutes(),2)+Qe(this.seconds(),2)}),M("Hmm",0,0,function(){return""+this.hours()+Qe(this.minutes(),2)}),M("Hmmss",0,0,function(){return""+this.hours()+Qe(this.minutes(),2)+Qe(this.seconds(),2)});function qi(r,s){M(r,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),s)})}qi("a",!0),qi("A",!1),fe("hour","h"),Ie("hour",13);function Ui(r,s){return s._meridiemParse}b("a",Ui),b("A",Ui),b("H",J),b("h",J),b("k",J),b("HH",J,Ve),b("hh",J,Ve),b("kk",J,Ve),b("hmm",Ai),b("hmmss",Oi),b("Hmm",Ai),b("Hmmss",Oi),z(["H","HH"],oe),z(["k","kk"],function(r,s,o){var l=q(r);s[oe]=l===24?0:l}),z(["a","A"],function(r,s,o){o._isPm=o._locale.isPM(r),o._meridiem=r}),z(["h","hh"],function(r,s,o){s[oe]=q(r),S(o).bigHour=!0}),z("hmm",function(r,s,o){var l=r.length-2;s[oe]=q(r.substr(0,l)),s[je]=q(r.substr(l)),S(o).bigHour=!0}),z("hmmss",function(r,s,o){var l=r.length-4,c=r.length-2;s[oe]=q(r.substr(0,l)),s[je]=q(r.substr(l,2)),s[at]=q(r.substr(c)),S(o).bigHour=!0}),z("Hmm",function(r,s,o){var l=r.length-2;s[oe]=q(r.substr(0,l)),s[je]=q(r.substr(l))}),z("Hmmss",function(r,s,o){var l=r.length-4,c=r.length-2;s[oe]=q(r.substr(0,l)),s[je]=q(r.substr(l,2)),s[at]=q(r.substr(c))});function pp(r){return(r+"").toLowerCase().charAt(0)==="p"}var mp=/[ap]\.?m?\.?/i,vp=Ut("Hours",!0);function hp(r,s,o){return r>11?o?"pm":"PM":o?"am":"AM"}var Bi={calendar:nc,longDateFormat:oc,invalidDate:uc,ordinal:pc,dayOfMonthOrdinalParse:mc,relativeTime:hc,months:Pc,monthsShort:Ei,week:Bc,weekdays:$c,weekdaysMin:Kc,weekdaysShort:Fi,meridiemParse:mp},X={},mr={},vr;function dp(r,s){var o,l=Math.min(r.length,s.length);for(o=0;o<l;o+=1)if(r[o]!==s[o])return o;return l}function Yi(r){return r&&r.toLowerCase().replace("_","-")}function fp(r){for(var s=0,o,l,c,m;s<r.length;){for(m=Yi(r[s]).split("-"),o=m.length,l=Yi(r[s+1]),l=l?l.split("-"):null;o>0;){if(c=kr(m.slice(0,o).join("-")),c)return c;if(l&&l.length>=o&&dp(m,l)>=o-1)break;o--}s++}return vr}function Ip(r){return r.match("^[^/\\\\]*$")!=null}function kr(r){var s=null,o;if(X[r]===void 0&&typeof jt!="undefined"&&jt&&jt.exports&&Ip(r))try{s=vr._abbr,o=require,o("./locale/"+r),gt(s)}catch(l){X[r]=null}return X[r]}function gt(r,s){var o;return r&&(h(s)?o=lt(r):o=ms(r,s),o&&(vr=o)),vr._abbr}function ms(r,s){if(s!==null){var o,l=Bi;if(s.abbr=r,X[r]!=null)bi("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),l=X[r]._config;else if(s.parentLocale!=null)if(X[s.parentLocale]!=null)l=X[s.parentLocale]._config;else if(o=kr(s.parentLocale),o!=null)l=o._config;else return mr[s.parentLocale]||(mr[s.parentLocale]=[]),mr[s.parentLocale].push({name:r,config:s}),null;return X[r]=new ts(es(l,s)),mr[r]&&mr[r].forEach(function(c){ms(c.name,c.config)}),gt(r),X[r]}else return delete X[r],null}function gp(r,s){if(s!=null){var o,l,c=Bi;X[r]!=null&&X[r].parentLocale!=null?X[r].set(es(X[r]._config,s)):(l=kr(r),l!=null&&(c=l._config),s=es(c,s),l==null&&(s.abbr=r),o=new ts(s),o.parentLocale=X[r],X[r]=o),gt(r)}else X[r]!=null&&(X[r].parentLocale!=null?(X[r]=X[r].parentLocale,r===gt()&&gt(r)):X[r]!=null&&delete X[r]);return X[r]}function lt(r){var s;if(r&&r._locale&&r._locale._abbr&&(r=r._locale._abbr),!r)return vr;if(!n(r)){if(s=kr(r),s)return s;r=[r]}return fp(r)}function yp(){return rs(X)}function vs(r){var s,o=r._a;return o&&S(r).overflow===-2&&(s=o[it]<0||o[it]>11?it:o[Xe]<1||o[Xe]>Nr(o[ge],o[it])?Xe:o[oe]<0||o[oe]>24||o[oe]===24&&(o[je]!==0||o[at]!==0||o[At]!==0)?oe:o[je]<0||o[je]>59?je:o[at]<0||o[at]>59?at:o[At]<0||o[At]>999?At:-1,S(r)._overflowDayOfYear&&(s<ge||s>Xe)&&(s=Xe),S(r)._overflowWeeks&&s===-1&&(s=Rc),S(r)._overflowWeekday&&s===-1&&(s=Dc),S(r).overflow=s),r}var _p=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Sp=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,wp=/Z|[+-]\d\d(?::?\d\d)?/,Lr=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],hs=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],bp=/^\/?Date\((-?\d+)/i,xp=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Rp={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Gi(r){var s,o,l=r._i,c=_p.exec(l)||Sp.exec(l),m,f,P,L,H=Lr.length,_e=hs.length;if(c){for(S(r).iso=!0,s=0,o=H;s<o;s++)if(Lr[s][1].exec(c[1])){f=Lr[s][0],m=Lr[s][2]!==!1;break}if(f==null){r._isValid=!1;return}if(c[3]){for(s=0,o=_e;s<o;s++)if(hs[s][1].exec(c[3])){P=(c[2]||" ")+hs[s][0];break}if(P==null){r._isValid=!1;return}}if(!m&&P!=null){r._isValid=!1;return}if(c[4])if(wp.exec(c[4]))L="Z";else{r._isValid=!1;return}r._f=f+(P||"")+(L||""),fs(r)}else r._isValid=!1}function Dp(r,s,o,l,c,m){var f=[Mp(r),Ei.indexOf(s),parseInt(o,10),parseInt(l,10),parseInt(c,10)];return m&&f.push(parseInt(m,10)),f}function Mp(r){var s=parseInt(r,10);return s<=49?2e3+s:s<=999?1900+s:s}function Pp(r){return r.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Ap(r,s,o){if(r){var l=Fi.indexOf(r),c=new Date(s[0],s[1],s[2]).getDay();if(l!==c)return S(o).weekdayMismatch=!0,o._isValid=!1,!1}return!0}function Op(r,s,o){if(r)return Rp[r];if(s)return 0;var l=parseInt(o,10),c=l%100,m=(l-c)/100;return m*60+c}function Wi(r){var s=xp.exec(Pp(r._i)),o;if(s){if(o=Dp(s[4],s[3],s[2],s[5],s[6],s[7]),!Ap(s[1],o,r))return;r._a=o,r._tzm=Op(s[8],s[9],s[10]),r._d=cr.apply(null,r._a),r._d.setUTCMinutes(r._d.getUTCMinutes()-r._tzm),S(r).rfc2822=!0}else r._isValid=!1}function Ep(r){var s=bp.exec(r._i);if(s!==null){r._d=new Date(+s[1]);return}if(Gi(r),r._isValid===!1)delete r._isValid;else return;if(Wi(r),r._isValid===!1)delete r._isValid;else return;r._strict?r._isValid=!1:e.createFromInputFallback(r)}e.createFromInputFallback=Le("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(r){r._d=new Date(r._i+(r._useUTC?" UTC":""))});function Yt(r,s,o){return r!=null?r:s!=null?s:o}function Np(r){var s=new Date(e.now());return r._useUTC?[s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate()]:[s.getFullYear(),s.getMonth(),s.getDate()]}function ds(r){var s,o,l=[],c,m,f;if(!r._d){for(c=Np(r),r._w&&r._a[Xe]==null&&r._a[it]==null&&Vp(r),r._dayOfYear!=null&&(f=Yt(r._a[ge],c[ge]),(r._dayOfYear>ur(f)||r._dayOfYear===0)&&(S(r)._overflowDayOfYear=!0),o=cr(f,0,r._dayOfYear),r._a[it]=o.getUTCMonth(),r._a[Xe]=o.getUTCDate()),s=0;s<3&&r._a[s]==null;++s)r._a[s]=l[s]=c[s];for(;s<7;s++)r._a[s]=l[s]=r._a[s]==null?s===2?1:0:r._a[s];r._a[oe]===24&&r._a[je]===0&&r._a[at]===0&&r._a[At]===0&&(r._nextDay=!0,r._a[oe]=0),r._d=(r._useUTC?cr:qc).apply(null,l),m=r._useUTC?r._d.getUTCDay():r._d.getDay(),r._tzm!=null&&r._d.setUTCMinutes(r._d.getUTCMinutes()-r._tzm),r._nextDay&&(r._a[oe]=24),r._w&&typeof r._w.d!="undefined"&&r._w.d!==m&&(S(r).weekdayMismatch=!0)}}function Vp(r){var s,o,l,c,m,f,P,L,H;s=r._w,s.GG!=null||s.W!=null||s.E!=null?(m=1,f=4,o=Yt(s.GG,r._a[ge],pr(Q(),1,4).year),l=Yt(s.W,1),c=Yt(s.E,1),(c<1||c>7)&&(L=!0)):(m=r._locale._week.dow,f=r._locale._week.doy,H=pr(Q(),m,f),o=Yt(s.gg,r._a[ge],H.year),l=Yt(s.w,H.week),s.d!=null?(c=s.d,(c<0||c>6)&&(L=!0)):s.e!=null?(c=s.e+m,(s.e<0||s.e>6)&&(L=!0)):c=m),l<1||l>ot(o,m,f)?S(r)._overflowWeeks=!0:L!=null?S(r)._overflowWeekday=!0:(P=Ci(o,l,c,m,f),r._a[ge]=P.year,r._dayOfYear=P.dayOfYear)}e.ISO_8601=function(){},e.RFC_2822=function(){};function fs(r){if(r._f===e.ISO_8601){Gi(r);return}if(r._f===e.RFC_2822){Wi(r);return}r._a=[],S(r).empty=!0;var s=""+r._i,o,l,c,m,f,P=s.length,L=0,H,_e;for(c=xi(r._f,r._locale).match(ns)||[],_e=c.length,o=0;o<_e;o++)m=c[o],l=(s.match(wc(m,r))||[])[0],l&&(f=s.substr(0,s.indexOf(l)),f.length>0&&S(r).unusedInput.push(f),s=s.slice(s.indexOf(l)+l.length),L+=l.length),qt[m]?(l?S(r).empty=!1:S(r).unusedTokens.push(m),xc(m,l,r)):r._strict&&!l&&S(r).unusedTokens.push(m);S(r).charsLeftOver=P-L,s.length>0&&S(r).unusedInput.push(s),r._a[oe]<=12&&S(r).bigHour===!0&&r._a[oe]>0&&(S(r).bigHour=void 0),S(r).parsedDateParts=r._a.slice(0),S(r).meridiem=r._meridiem,r._a[oe]=kp(r._locale,r._a[oe],r._meridiem),H=S(r).era,H!==null&&(r._a[ge]=r._locale.erasConvertYear(H,r._a[ge])),ds(r),vs(r)}function kp(r,s,o){var l;return o==null?s:r.meridiemHour!=null?r.meridiemHour(s,o):(r.isPM!=null&&(l=r.isPM(o),l&&s<12&&(s+=12),!l&&s===12&&(s=0)),s)}function Lp(r){var s,o,l,c,m,f,P=!1,L=r._f.length;if(L===0){S(r).invalidFormat=!0,r._d=new Date(NaN);return}for(c=0;c<L;c++)m=0,f=!1,s=Xn({},r),r._useUTC!=null&&(s._useUTC=r._useUTC),s._f=r._f[c],fs(s),K(s)&&(f=!0),m+=S(s).charsLeftOver,m+=S(s).unusedTokens.length*10,S(s).score=m,P?m<l&&(l=m,o=s):(l==null||m<l||f)&&(l=m,o=s,f&&(P=!0));I(r,o||s)}function Tp(r){if(!r._d){var s=is(r._i),o=s.day===void 0?s.date:s.day;r._a=g([s.year,s.month,o,s.hour,s.minute,s.second,s.millisecond],function(l){return l&&parseInt(l,10)}),ds(r)}}function Cp(r){var s=new ir(vs(zi(r)));return s._nextDay&&(s.add(1,"d"),s._nextDay=void 0),s}function zi(r){var s=r._i,o=r._f;return r._locale=r._locale||lt(r._l),s===null||o===void 0&&s===""?re({nullInput:!0}):(typeof s=="string"&&(r._i=s=r._locale.preparse(s)),He(s)?new ir(vs(s)):(d(s)?r._d=s:n(o)?Lp(r):o?fs(r):Fp(r),K(r)||(r._d=null),r))}function Fp(r){var s=r._i;h(s)?r._d=new Date(e.now()):d(s)?r._d=new Date(s.valueOf()):typeof s=="string"?Ep(r):n(s)?(r._a=g(s.slice(0),function(o){return parseInt(o,10)}),ds(r)):a(s)?Tp(r):v(s)?r._d=new Date(s):e.createFromInputFallback(r)}function Hi(r,s,o,l,c){var m={};return(s===!0||s===!1)&&(l=s,s=void 0),(o===!0||o===!1)&&(l=o,o=void 0),(a(r)&&p(r)||n(r)&&r.length===0)&&(r=void 0),m._isAMomentObject=!0,m._useUTC=m._isUTC=c,m._l=o,m._i=r,m._f=s,m._strict=l,Cp(m)}function Q(r,s,o,l){return Hi(r,s,o,l,!1)}var qp=Le("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var r=Q.apply(null,arguments);return this.isValid()&&r.isValid()?r<this?this:r:re()}),Up=Le("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var r=Q.apply(null,arguments);return this.isValid()&&r.isValid()?r>this?this:r:re()});function ji(r,s){var o,l;if(s.length===1&&n(s[0])&&(s=s[0]),!s.length)return Q();for(o=s[0],l=1;l<s.length;++l)(!s[l].isValid()||s[l][r](o))&&(o=s[l]);return o}function Bp(){var r=[].slice.call(arguments,0);return ji("isBefore",r)}function Yp(){var r=[].slice.call(arguments,0);return ji("isAfter",r)}var Gp=function(){return Date.now?Date.now():+new Date},hr=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Wp(r){var s,o=!1,l,c=hr.length;for(s in r)if(u(r,s)&&!(ne.call(hr,s)!==-1&&(r[s]==null||!isNaN(r[s]))))return!1;for(l=0;l<c;++l)if(r[hr[l]]){if(o)return!1;parseFloat(r[hr[l]])!==q(r[hr[l]])&&(o=!0)}return!0}function zp(){return this._isValid}function Hp(){return $e(NaN)}function Tr(r){var s=is(r),o=s.year||0,l=s.quarter||0,c=s.month||0,m=s.week||s.isoWeek||0,f=s.day||0,P=s.hour||0,L=s.minute||0,H=s.second||0,_e=s.millisecond||0;this._isValid=Wp(s),this._milliseconds=+_e+H*1e3+L*6e4+P*1e3*60*60,this._days=+f+m*7,this._months=+c+l*3+o*12,this._data={},this._locale=lt(),this._bubble()}function Cr(r){return r instanceof Tr}function Is(r){return r<0?Math.round(-1*r)*-1:Math.round(r)}function jp(r,s,o){var l=Math.min(r.length,s.length),c=Math.abs(r.length-s.length),m=0,f;for(f=0;f<l;f++)(o&&r[f]!==s[f]||!o&&q(r[f])!==q(s[f]))&&m++;return m+c}function $i(r,s){M(r,0,0,function(){var o=this.utcOffset(),l="+";return o<0&&(o=-o,l="-"),l+Qe(~~(o/60),2)+s+Qe(~~o%60,2)})}$i("Z",":"),$i("ZZ",""),b("Z",Or),b("ZZ",Or),z(["Z","ZZ"],function(r,s,o){o._useUTC=!0,o._tzm=gs(Or,r)});var $p=/([\+\-]|\d\d)/gi;function gs(r,s){var o=(s||"").match(r),l,c,m;return o===null?null:(l=o[o.length-1]||[],c=(l+"").match($p)||["-",0,0],m=+(c[1]*60)+q(c[2]),m===0?0:c[0]==="+"?m:-m)}function ys(r,s){var o,l;return s._isUTC?(o=s.clone(),l=(He(r)||d(r)?r.valueOf():Q(r).valueOf())-o.valueOf(),o._d.setTime(o._d.valueOf()+l),e.updateOffset(o,!1),o):Q(r).local()}function _s(r){return-Math.round(r._d.getTimezoneOffset())}e.updateOffset=function(){};function Kp(r,s,o){var l=this._offset||0,c;if(!this.isValid())return r!=null?this:NaN;if(r!=null){if(typeof r=="string"){if(r=gs(Or,r),r===null)return this}else Math.abs(r)<16&&!o&&(r=r*60);return!this._isUTC&&s&&(c=_s(this)),this._offset=r,this._isUTC=!0,c!=null&&this.add(c,"m"),l!==r&&(!s||this._changeInProgress?Qi(this,$e(r-l,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?l:_s(this)}function Zp(r,s){return r!=null?(typeof r!="string"&&(r=-r),this.utcOffset(r,s),this):-this.utcOffset()}function Jp(r){return this.utcOffset(0,r)}function Qp(r){return this._isUTC&&(this.utcOffset(0,r),this._isUTC=!1,r&&this.subtract(_s(this),"m")),this}function Xp(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var r=gs(_c,this._i);r!=null?this.utcOffset(r):this.utcOffset(0,!0)}return this}function em(r){return this.isValid()?(r=r?Q(r).utcOffset():0,(this.utcOffset()-r)%60===0):!1}function tm(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function rm(){if(!h(this._isDSTShifted))return this._isDSTShifted;var r={},s;return Xn(r,this),r=zi(r),r._a?(s=r._isUTC?y(r._a):Q(r._a),this._isDSTShifted=this.isValid()&&jp(r._a,s.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function nm(){return this.isValid()?!this._isUTC:!1}function sm(){return this.isValid()?this._isUTC:!1}function Ki(){return this.isValid()?this._isUTC&&this._offset===0:!1}var im=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,am=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function $e(r,s){var o=r,l=null,c,m,f;return Cr(r)?o={ms:r._milliseconds,d:r._days,M:r._months}:v(r)||!isNaN(+r)?(o={},s?o[s]=+r:o.milliseconds=+r):(l=im.exec(r))?(c=l[1]==="-"?-1:1,o={y:0,d:q(l[Xe])*c,h:q(l[oe])*c,m:q(l[je])*c,s:q(l[at])*c,ms:q(Is(l[At]*1e3))*c}):(l=am.exec(r))?(c=l[1]==="-"?-1:1,o={y:Ot(l[2],c),M:Ot(l[3],c),w:Ot(l[4],c),d:Ot(l[5],c),h:Ot(l[6],c),m:Ot(l[7],c),s:Ot(l[8],c)}):o==null?o={}:typeof o=="object"&&("from"in o||"to"in o)&&(f=om(Q(o.from),Q(o.to)),o={},o.ms=f.milliseconds,o.M=f.months),m=new Tr(o),Cr(r)&&u(r,"_locale")&&(m._locale=r._locale),Cr(r)&&u(r,"_isValid")&&(m._isValid=r._isValid),m}$e.fn=Tr.prototype,$e.invalid=Hp;function Ot(r,s){var o=r&&parseFloat(r.replace(",","."));return(isNaN(o)?0:o)*s}function Zi(r,s){var o={};return o.months=s.month()-r.month()+(s.year()-r.year())*12,r.clone().add(o.months,"M").isAfter(s)&&--o.months,o.milliseconds=+s-+r.clone().add(o.months,"M"),o}function om(r,s){var o;return r.isValid()&&s.isValid()?(s=ys(s,r),r.isBefore(s)?o=Zi(r,s):(o=Zi(s,r),o.milliseconds=-o.milliseconds,o.months=-o.months),o):{milliseconds:0,months:0}}function Ji(r,s){return function(o,l){var c,m;return l!==null&&!isNaN(+l)&&(bi(s,"moment()."+s+"(period, number) is deprecated. Please use moment()."+s+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),m=o,o=l,l=m),c=$e(o,l),Qi(this,c,r),this}}function Qi(r,s,o,l){var c=s._milliseconds,m=Is(s._days),f=Is(s._months);r.isValid()&&(l=l==null?!0:l,f&&Vi(r,Rr(r,"Month")+f*o),m&&Di(r,"Date",Rr(r,"Date")+m*o),c&&r._d.setTime(r._d.valueOf()+c*o),l&&e.updateOffset(r,m||f))}var lm=Ji(1,"add"),um=Ji(-1,"subtract");function Xi(r){return typeof r=="string"||r instanceof String}function cm(r){return He(r)||d(r)||Xi(r)||v(r)||mm(r)||pm(r)||r===null||r===void 0}function pm(r){var s=a(r)&&!p(r),o=!1,l=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],c,m,f=l.length;for(c=0;c<f;c+=1)m=l[c],o=o||u(r,m);return s&&o}function mm(r){var s=n(r),o=!1;return s&&(o=r.filter(function(l){return!v(l)&&Xi(r)}).length===0),s&&o}function vm(r){var s=a(r)&&!p(r),o=!1,l=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],c,m;for(c=0;c<l.length;c+=1)m=l[c],o=o||u(r,m);return s&&o}function hm(r,s){var o=r.diff(s,"days",!0);return o<-6?"sameElse":o<-1?"lastWeek":o<0?"lastDay":o<1?"sameDay":o<2?"nextDay":o<7?"nextWeek":"sameElse"}function dm(r,s){arguments.length===1&&(arguments[0]?cm(arguments[0])?(r=arguments[0],s=void 0):vm(arguments[0])&&(s=arguments[0],r=void 0):(r=void 0,s=void 0));var o=r||Q(),l=ys(o,this).startOf("day"),c=e.calendarFormat(this,l)||"sameElse",m=s&&(Je(s[c])?s[c].call(this,o):s[c]);return this.format(m||this.localeData().calendar(c,this,Q(o)))}function fm(){return new ir(this)}function Im(r,s){var o=He(r)?r:Q(r);return this.isValid()&&o.isValid()?(s=Te(s)||"millisecond",s==="millisecond"?this.valueOf()>o.valueOf():o.valueOf()<this.clone().startOf(s).valueOf()):!1}function gm(r,s){var o=He(r)?r:Q(r);return this.isValid()&&o.isValid()?(s=Te(s)||"millisecond",s==="millisecond"?this.valueOf()<o.valueOf():this.clone().endOf(s).valueOf()<o.valueOf()):!1}function ym(r,s,o,l){var c=He(r)?r:Q(r),m=He(s)?s:Q(s);return this.isValid()&&c.isValid()&&m.isValid()?(l=l||"()",(l[0]==="("?this.isAfter(c,o):!this.isBefore(c,o))&&(l[1]===")"?this.isBefore(m,o):!this.isAfter(m,o))):!1}function _m(r,s){var o=He(r)?r:Q(r),l;return this.isValid()&&o.isValid()?(s=Te(s)||"millisecond",s==="millisecond"?this.valueOf()===o.valueOf():(l=o.valueOf(),this.clone().startOf(s).valueOf()<=l&&l<=this.clone().endOf(s).valueOf())):!1}function Sm(r,s){return this.isSame(r,s)||this.isAfter(r,s)}function wm(r,s){return this.isSame(r,s)||this.isBefore(r,s)}function bm(r,s,o){var l,c,m;if(!this.isValid())return NaN;if(l=ys(r,this),!l.isValid())return NaN;switch(c=(l.utcOffset()-this.utcOffset())*6e4,s=Te(s),s){case"year":m=Fr(this,l)/12;break;case"month":m=Fr(this,l);break;case"quarter":m=Fr(this,l)/3;break;case"second":m=(this-l)/1e3;break;case"minute":m=(this-l)/6e4;break;case"hour":m=(this-l)/36e5;break;case"day":m=(this-l-c)/864e5;break;case"week":m=(this-l-c)/6048e5;break;default:m=this-l}return o?m:Ce(m)}function Fr(r,s){if(r.date()<s.date())return-Fr(s,r);var o=(s.year()-r.year())*12+(s.month()-r.month()),l=r.clone().add(o,"months"),c,m;return s-l<0?(c=r.clone().add(o-1,"months"),m=(s-l)/(l-c)):(c=r.clone().add(o+1,"months"),m=(s-l)/(c-l)),-(o+m)||0}e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",e.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function xm(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Rm(r){if(!this.isValid())return null;var s=r!==!0,o=s?this.clone().utc():this;return o.year()<0||o.year()>9999?br(o,s?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):Je(Date.prototype.toISOString)?s?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",br(o,"Z")):br(o,s?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function Dm(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var r="moment",s="",o,l,c,m;return this.isLocal()||(r=this.utcOffset()===0?"moment.utc":"moment.parseZone",s="Z"),o="["+r+'("]',l=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",c="-MM-DD[T]HH:mm:ss.SSS",m=s+'[")]',this.format(o+l+c+m)}function Mm(r){r||(r=this.isUtc()?e.defaultFormatUtc:e.defaultFormat);var s=br(this,r);return this.localeData().postformat(s)}function Pm(r,s){return this.isValid()&&(He(r)&&r.isValid()||Q(r).isValid())?$e({to:this,from:r}).locale(this.locale()).humanize(!s):this.localeData().invalidDate()}function Am(r){return this.from(Q(),r)}function Om(r,s){return this.isValid()&&(He(r)&&r.isValid()||Q(r).isValid())?$e({from:this,to:r}).locale(this.locale()).humanize(!s):this.localeData().invalidDate()}function Em(r){return this.to(Q(),r)}function ea(r){var s;return r===void 0?this._locale._abbr:(s=lt(r),s!=null&&(this._locale=s),this)}var ta=Le("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(r){return r===void 0?this.localeData():this.locale(r)});function ra(){return this._locale}var qr=1e3,Gt=60*qr,Ur=60*Gt,na=(365*400+97)*24*Ur;function Wt(r,s){return(r%s+s)%s}function sa(r,s,o){return r<100&&r>=0?new Date(r+400,s,o)-na:new Date(r,s,o).valueOf()}function ia(r,s,o){return r<100&&r>=0?Date.UTC(r+400,s,o)-na:Date.UTC(r,s,o)}function Nm(r){var s,o;if(r=Te(r),r===void 0||r==="millisecond"||!this.isValid())return this;switch(o=this._isUTC?ia:sa,r){case"year":s=o(this.year(),0,1);break;case"quarter":s=o(this.year(),this.month()-this.month()%3,1);break;case"month":s=o(this.year(),this.month(),1);break;case"week":s=o(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":s=o(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":s=o(this.year(),this.month(),this.date());break;case"hour":s=this._d.valueOf(),s-=Wt(s+(this._isUTC?0:this.utcOffset()*Gt),Ur);break;case"minute":s=this._d.valueOf(),s-=Wt(s,Gt);break;case"second":s=this._d.valueOf(),s-=Wt(s,qr);break}return this._d.setTime(s),e.updateOffset(this,!0),this}function Vm(r){var s,o;if(r=Te(r),r===void 0||r==="millisecond"||!this.isValid())return this;switch(o=this._isUTC?ia:sa,r){case"year":s=o(this.year()+1,0,1)-1;break;case"quarter":s=o(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":s=o(this.year(),this.month()+1,1)-1;break;case"week":s=o(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":s=o(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":s=o(this.year(),this.month(),this.date()+1)-1;break;case"hour":s=this._d.valueOf(),s+=Ur-Wt(s+(this._isUTC?0:this.utcOffset()*Gt),Ur)-1;break;case"minute":s=this._d.valueOf(),s+=Gt-Wt(s,Gt)-1;break;case"second":s=this._d.valueOf(),s+=qr-Wt(s,qr)-1;break}return this._d.setTime(s),e.updateOffset(this,!0),this}function km(){return this._d.valueOf()-(this._offset||0)*6e4}function Lm(){return Math.floor(this.valueOf()/1e3)}function Tm(){return new Date(this.valueOf())}function Cm(){var r=this;return[r.year(),r.month(),r.date(),r.hour(),r.minute(),r.second(),r.millisecond()]}function Fm(){var r=this;return{years:r.year(),months:r.month(),date:r.date(),hours:r.hours(),minutes:r.minutes(),seconds:r.seconds(),milliseconds:r.milliseconds()}}function qm(){return this.isValid()?this.toISOString():null}function Um(){return K(this)}function Bm(){return I({},S(this))}function Ym(){return S(this).overflow}function Gm(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}M("N",0,0,"eraAbbr"),M("NN",0,0,"eraAbbr"),M("NNN",0,0,"eraAbbr"),M("NNNN",0,0,"eraName"),M("NNNNN",0,0,"eraNarrow"),M("y",["y",1],"yo","eraYear"),M("y",["yy",2],0,"eraYear"),M("y",["yyy",3],0,"eraYear"),M("y",["yyyy",4],0,"eraYear"),b("N",Ss),b("NN",Ss),b("NNN",Ss),b("NNNN",ev),b("NNNNN",tv),z(["N","NN","NNN","NNNN","NNNNN"],function(r,s,o,l){var c=o._locale.erasParse(r,l,o._strict);c?S(o).era=c:S(o).invalidEra=r}),b("y",Bt),b("yy",Bt),b("yyy",Bt),b("yyyy",Bt),b("yo",rv),z(["y","yy","yyy","yyyy"],ge),z(["yo"],function(r,s,o,l){var c;o._locale._eraYearOrdinalRegex&&(c=r.match(o._locale._eraYearOrdinalRegex)),o._locale.eraYearOrdinalParse?s[ge]=o._locale.eraYearOrdinalParse(r,c):s[ge]=parseInt(r,10)});function Wm(r,s){var o,l,c,m=this._eras||lt("en")._eras;for(o=0,l=m.length;o<l;++o){switch(typeof m[o].since){case"string":c=e(m[o].since).startOf("day"),m[o].since=c.valueOf();break}switch(typeof m[o].until){case"undefined":m[o].until=1/0;break;case"string":c=e(m[o].until).startOf("day").valueOf(),m[o].until=c.valueOf();break}}return m}function zm(r,s,o){var l,c,m=this.eras(),f,P,L;for(r=r.toUpperCase(),l=0,c=m.length;l<c;++l)if(f=m[l].name.toUpperCase(),P=m[l].abbr.toUpperCase(),L=m[l].narrow.toUpperCase(),o)switch(s){case"N":case"NN":case"NNN":if(P===r)return m[l];break;case"NNNN":if(f===r)return m[l];break;case"NNNNN":if(L===r)return m[l];break}else if([f,P,L].indexOf(r)>=0)return m[l]}function Hm(r,s){var o=r.since<=r.until?1:-1;return s===void 0?e(r.since).year():e(r.since).year()+(s-r.offset)*o}function jm(){var r,s,o,l=this.localeData().eras();for(r=0,s=l.length;r<s;++r)if(o=this.clone().startOf("day").valueOf(),l[r].since<=o&&o<=l[r].until||l[r].until<=o&&o<=l[r].since)return l[r].name;return""}function $m(){var r,s,o,l=this.localeData().eras();for(r=0,s=l.length;r<s;++r)if(o=this.clone().startOf("day").valueOf(),l[r].since<=o&&o<=l[r].until||l[r].until<=o&&o<=l[r].since)return l[r].narrow;return""}function Km(){var r,s,o,l=this.localeData().eras();for(r=0,s=l.length;r<s;++r)if(o=this.clone().startOf("day").valueOf(),l[r].since<=o&&o<=l[r].until||l[r].until<=o&&o<=l[r].since)return l[r].abbr;return""}function Zm(){var r,s,o,l,c=this.localeData().eras();for(r=0,s=c.length;r<s;++r)if(o=c[r].since<=c[r].until?1:-1,l=this.clone().startOf("day").valueOf(),c[r].since<=l&&l<=c[r].until||c[r].until<=l&&l<=c[r].since)return(this.year()-e(c[r].since).year())*o+c[r].offset;return this.year()}function Jm(r){return u(this,"_erasNameRegex")||ws.call(this),r?this._erasNameRegex:this._erasRegex}function Qm(r){return u(this,"_erasAbbrRegex")||ws.call(this),r?this._erasAbbrRegex:this._erasRegex}function Xm(r){return u(this,"_erasNarrowRegex")||ws.call(this),r?this._erasNarrowRegex:this._erasRegex}function Ss(r,s){return s.erasAbbrRegex(r)}function ev(r,s){return s.erasNameRegex(r)}function tv(r,s){return s.erasNarrowRegex(r)}function rv(r,s){return s._eraYearOrdinalRegex||Bt}function ws(){var r=[],s=[],o=[],l=[],c,m,f=this.eras();for(c=0,m=f.length;c<m;++c)s.push(ke(f[c].name)),r.push(ke(f[c].abbr)),o.push(ke(f[c].narrow)),l.push(ke(f[c].name)),l.push(ke(f[c].abbr)),l.push(ke(f[c].narrow));this._erasRegex=new RegExp("^("+l.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+s.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+o.join("|")+")","i")}M(0,["gg",2],0,function(){return this.weekYear()%100}),M(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Br(r,s){M(0,[r,r.length],0,s)}Br("gggg","weekYear"),Br("ggggg","weekYear"),Br("GGGG","isoWeekYear"),Br("GGGGG","isoWeekYear"),fe("weekYear","gg"),fe("isoWeekYear","GG"),Ie("weekYear",1),Ie("isoWeekYear",1),b("G",Ar),b("g",Ar),b("GG",J,Ve),b("gg",J,Ve),b("GGGG",os,as),b("gggg",os,as),b("GGGGG",Pr,Dr),b("ggggg",Pr,Dr),lr(["gggg","ggggg","GGGG","GGGGG"],function(r,s,o,l){s[l.substr(0,2)]=q(r)}),lr(["gg","GG"],function(r,s,o,l){s[l]=e.parseTwoDigitYear(r)});function nv(r){return aa.call(this,r,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function sv(r){return aa.call(this,r,this.isoWeek(),this.isoWeekday(),1,4)}function iv(){return ot(this.year(),1,4)}function av(){return ot(this.isoWeekYear(),1,4)}function ov(){var r=this.localeData()._week;return ot(this.year(),r.dow,r.doy)}function lv(){var r=this.localeData()._week;return ot(this.weekYear(),r.dow,r.doy)}function aa(r,s,o,l,c){var m;return r==null?pr(this,l,c).year:(m=ot(r,l,c),s>m&&(s=m),uv.call(this,r,s,o,l,c))}function uv(r,s,o,l,c){var m=Ci(r,s,o,l,c),f=cr(m.year,0,m.dayOfYear);return this.year(f.getUTCFullYear()),this.month(f.getUTCMonth()),this.date(f.getUTCDate()),this}M("Q",0,"Qo","quarter"),fe("quarter","Q"),Ie("quarter",7),b("Q",Mi),z("Q",function(r,s){s[it]=(q(r)-1)*3});function cv(r){return r==null?Math.ceil((this.month()+1)/3):this.month((r-1)*3+this.month()%3)}M("D",["DD",2],"Do","date"),fe("date","D"),Ie("date",9),b("D",J),b("DD",J,Ve),b("Do",function(r,s){return r?s._dayOfMonthOrdinalParse||s._ordinalParse:s._dayOfMonthOrdinalParseLenient}),z(["D","DD"],Xe),z("Do",function(r,s){s[Xe]=q(r.match(J)[0])});var oa=Ut("Date",!0);M("DDD",["DDDD",3],"DDDo","dayOfYear"),fe("dayOfYear","DDD"),Ie("dayOfYear",4),b("DDD",Mr),b("DDDD",Pi),z(["DDD","DDDD"],function(r,s,o){o._dayOfYear=q(r)});function pv(r){var s=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return r==null?s:this.add(r-s,"d")}M("m",["mm",2],0,"minute"),fe("minute","m"),Ie("minute",14),b("m",J),b("mm",J,Ve),z(["m","mm"],je);var mv=Ut("Minutes",!1);M("s",["ss",2],0,"second"),fe("second","s"),Ie("second",15),b("s",J),b("ss",J,Ve),z(["s","ss"],at);var vv=Ut("Seconds",!1);M("S",0,0,function(){return~~(this.millisecond()/100)}),M(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),M(0,["SSS",3],0,"millisecond"),M(0,["SSSS",4],0,function(){return this.millisecond()*10}),M(0,["SSSSS",5],0,function(){return this.millisecond()*100}),M(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),M(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),M(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),M(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),fe("millisecond","ms"),Ie("millisecond",16),b("S",Mr,Mi),b("SS",Mr,Ve),b("SSS",Mr,Pi);var yt,la;for(yt="SSSS";yt.length<=9;yt+="S")b(yt,Bt);function hv(r,s){s[At]=q(("0."+r)*1e3)}for(yt="S";yt.length<=9;yt+="S")z(yt,hv);la=Ut("Milliseconds",!1),M("z",0,0,"zoneAbbr"),M("zz",0,0,"zoneName");function dv(){return this._isUTC?"UTC":""}function fv(){return this._isUTC?"Coordinated Universal Time":""}var w=ir.prototype;w.add=lm,w.calendar=dm,w.clone=fm,w.diff=bm,w.endOf=Vm,w.format=Mm,w.from=Pm,w.fromNow=Am,w.to=Om,w.toNow=Em,w.get=gc,w.invalidAt=Ym,w.isAfter=Im,w.isBefore=gm,w.isBetween=ym,w.isSame=_m,w.isSameOrAfter=Sm,w.isSameOrBefore=wm,w.isValid=Um,w.lang=ta,w.locale=ea,w.localeData=ra,w.max=Up,w.min=qp,w.parsingFlags=Bm,w.set=yc,w.startOf=Nm,w.subtract=um,w.toArray=Cm,w.toObject=Fm,w.toDate=Tm,w.toISOString=Rm,w.inspect=Dm,typeof Symbol!="undefined"&&Symbol.for!=null&&(w[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),w.toJSON=qm,w.toString=xm,w.unix=Lm,w.valueOf=km,w.creationData=Gm,w.eraName=jm,w.eraNarrow=$m,w.eraAbbr=Km,w.eraYear=Zm,w.year=Ti,w.isLeapYear=Fc,w.weekYear=nv,w.isoWeekYear=sv,w.quarter=w.quarters=cv,w.month=ki,w.daysInMonth=Lc,w.week=w.weeks=Wc,w.isoWeek=w.isoWeeks=zc,w.weeksInYear=ov,w.weeksInWeekYear=lv,w.isoWeeksInYear=iv,w.isoWeeksInISOWeekYear=av,w.date=oa,w.day=w.days=sp,w.weekday=ip,w.isoWeekday=ap,w.dayOfYear=pv,w.hour=w.hours=vp,w.minute=w.minutes=mv,w.second=w.seconds=vv,w.millisecond=w.milliseconds=la,w.utcOffset=Kp,w.utc=Jp,w.local=Qp,w.parseZone=Xp,w.hasAlignedHourOffset=em,w.isDST=tm,w.isLocal=nm,w.isUtcOffset=sm,w.isUtc=Ki,w.isUTC=Ki,w.zoneAbbr=dv,w.zoneName=fv,w.dates=Le("dates accessor is deprecated. Use date instead.",oa),w.months=Le("months accessor is deprecated. Use month instead",ki),w.years=Le("years accessor is deprecated. Use year instead",Ti),w.zone=Le("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Zp),w.isDSTShifted=Le("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",rm);function Iv(r){return Q(r*1e3)}function gv(){return Q.apply(null,arguments).parseZone()}function ua(r){return r}var G=ts.prototype;G.calendar=sc,G.longDateFormat=lc,G.invalidDate=cc,G.ordinal=vc,G.preparse=ua,G.postformat=ua,G.relativeTime=dc,G.pastFuture=fc,G.set=rc,G.eras=Wm,G.erasParse=zm,G.erasConvertYear=Hm,G.erasAbbrRegex=Qm,G.erasNameRegex=Jm,G.erasNarrowRegex=Xm,G.months=Ec,G.monthsShort=Nc,G.monthsParse=kc,G.monthsRegex=Cc,G.monthsShortRegex=Tc,G.week=Uc,G.firstDayOfYear=Gc,G.firstDayOfWeek=Yc,G.weekdays=Xc,G.weekdaysMin=tp,G.weekdaysShort=ep,G.weekdaysParse=np,G.weekdaysRegex=op,G.weekdaysShortRegex=lp,G.weekdaysMinRegex=up,G.isPM=pp,G.meridiem=hp;function Yr(r,s,o,l){var c=lt(),m=y().set(l,s);return c[o](m,r)}function ca(r,s,o){if(v(r)&&(s=r,r=void 0),r=r||"",s!=null)return Yr(r,s,o,"month");var l,c=[];for(l=0;l<12;l++)c[l]=Yr(r,l,o,"month");return c}function bs(r,s,o,l){typeof r=="boolean"?(v(s)&&(o=s,s=void 0),s=s||""):(s=r,o=s,r=!1,v(s)&&(o=s,s=void 0),s=s||"");var c=lt(),m=r?c._week.dow:0,f,P=[];if(o!=null)return Yr(s,(o+m)%7,l,"day");for(f=0;f<7;f++)P[f]=Yr(s,(f+m)%7,l,"day");return P}function yv(r,s){return ca(r,s,"months")}function _v(r,s){return ca(r,s,"monthsShort")}function Sv(r,s,o){return bs(r,s,o,"weekdays")}function wv(r,s,o){return bs(r,s,o,"weekdaysShort")}function bv(r,s,o){return bs(r,s,o,"weekdaysMin")}gt("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(r){var s=r%10,o=q(r%100/10)===1?"th":s===1?"st":s===2?"nd":s===3?"rd":"th";return r+o}}),e.lang=Le("moment.lang is deprecated. Use moment.locale instead.",gt),e.langData=Le("moment.langData is deprecated. Use moment.localeData instead.",lt);var ut=Math.abs;function xv(){var r=this._data;return this._milliseconds=ut(this._milliseconds),this._days=ut(this._days),this._months=ut(this._months),r.milliseconds=ut(r.milliseconds),r.seconds=ut(r.seconds),r.minutes=ut(r.minutes),r.hours=ut(r.hours),r.months=ut(r.months),r.years=ut(r.years),this}function pa(r,s,o,l){var c=$e(s,o);return r._milliseconds+=l*c._milliseconds,r._days+=l*c._days,r._months+=l*c._months,r._bubble()}function Rv(r,s){return pa(this,r,s,1)}function Dv(r,s){return pa(this,r,s,-1)}function ma(r){return r<0?Math.floor(r):Math.ceil(r)}function Mv(){var r=this._milliseconds,s=this._days,o=this._months,l=this._data,c,m,f,P,L;return r>=0&&s>=0&&o>=0||r<=0&&s<=0&&o<=0||(r+=ma(xs(o)+s)*864e5,s=0,o=0),l.milliseconds=r%1e3,c=Ce(r/1e3),l.seconds=c%60,m=Ce(c/60),l.minutes=m%60,f=Ce(m/60),l.hours=f%24,s+=Ce(f/24),L=Ce(va(s)),o+=L,s-=ma(xs(L)),P=Ce(o/12),o%=12,l.days=s,l.months=o,l.years=P,this}function va(r){return r*4800/146097}function xs(r){return r*146097/4800}function Pv(r){if(!this.isValid())return NaN;var s,o,l=this._milliseconds;if(r=Te(r),r==="month"||r==="quarter"||r==="year")switch(s=this._days+l/864e5,o=this._months+va(s),r){case"month":return o;case"quarter":return o/3;case"year":return o/12}else switch(s=this._days+Math.round(xs(this._months)),r){case"week":return s/7+l/6048e5;case"day":return s+l/864e5;case"hour":return s*24+l/36e5;case"minute":return s*1440+l/6e4;case"second":return s*86400+l/1e3;case"millisecond":return Math.floor(s*864e5)+l;default:throw new Error("Unknown unit "+r)}}function Av(){return this.isValid()?this._milliseconds+this._days*864e5+this._months%12*2592e6+q(this._months/12)*31536e6:NaN}function ct(r){return function(){return this.as(r)}}var Ov=ct("ms"),Ev=ct("s"),Nv=ct("m"),Vv=ct("h"),kv=ct("d"),Lv=ct("w"),Tv=ct("M"),Cv=ct("Q"),Fv=ct("y");function qv(){return $e(this)}function Uv(r){return r=Te(r),this.isValid()?this[r+"s"]():NaN}function Et(r){return function(){return this.isValid()?this._data[r]:NaN}}var Bv=Et("milliseconds"),Yv=Et("seconds"),Gv=Et("minutes"),Wv=Et("hours"),zv=Et("days"),Hv=Et("months"),jv=Et("years");function $v(){return Ce(this.days()/7)}var pt=Math.round,zt={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Kv(r,s,o,l,c){return c.relativeTime(s||1,!!o,r,l)}function Zv(r,s,o,l){var c=$e(r).abs(),m=pt(c.as("s")),f=pt(c.as("m")),P=pt(c.as("h")),L=pt(c.as("d")),H=pt(c.as("M")),_e=pt(c.as("w")),mt=pt(c.as("y")),_t=m<=o.ss&&["s",m]||m<o.s&&["ss",m]||f<=1&&["m"]||f<o.m&&["mm",f]||P<=1&&["h"]||P<o.h&&["hh",P]||L<=1&&["d"]||L<o.d&&["dd",L];return o.w!=null&&(_t=_t||_e<=1&&["w"]||_e<o.w&&["ww",_e]),_t=_t||H<=1&&["M"]||H<o.M&&["MM",H]||mt<=1&&["y"]||["yy",mt],_t[2]=s,_t[3]=+r>0,_t[4]=l,Kv.apply(null,_t)}function Jv(r){return r===void 0?pt:typeof r=="function"?(pt=r,!0):!1}function Qv(r,s){return zt[r]===void 0?!1:s===void 0?zt[r]:(zt[r]=s,r==="s"&&(zt.ss=s-1),!0)}function Xv(r,s){if(!this.isValid())return this.localeData().invalidDate();var o=!1,l=zt,c,m;return typeof r=="object"&&(s=r,r=!1),typeof r=="boolean"&&(o=r),typeof s=="object"&&(l=Object.assign({},zt,s),s.s!=null&&s.ss==null&&(l.ss=s.s-1)),c=this.localeData(),m=Zv(this,!o,l,c),o&&(m=c.pastFuture(+this,m)),c.postformat(m)}var Rs=Math.abs;function Ht(r){return(r>0)-(r<0)||+r}function Gr(){if(!this.isValid())return this.localeData().invalidDate();var r=Rs(this._milliseconds)/1e3,s=Rs(this._days),o=Rs(this._months),l,c,m,f,P=this.asSeconds(),L,H,_e,mt;return P?(l=Ce(r/60),c=Ce(l/60),r%=60,l%=60,m=Ce(o/12),o%=12,f=r?r.toFixed(3).replace(/\.?0+$/,""):"",L=P<0?"-":"",H=Ht(this._months)!==Ht(P)?"-":"",_e=Ht(this._days)!==Ht(P)?"-":"",mt=Ht(this._milliseconds)!==Ht(P)?"-":"",L+"P"+(m?H+m+"Y":"")+(o?H+o+"M":"")+(s?_e+s+"D":"")+(c||l||r?"T":"")+(c?mt+c+"H":"")+(l?mt+l+"M":"")+(r?mt+f+"S":"")):"P0D"}var Y=Tr.prototype;Y.isValid=zp,Y.abs=xv,Y.add=Rv,Y.subtract=Dv,Y.as=Pv,Y.asMilliseconds=Ov,Y.asSeconds=Ev,Y.asMinutes=Nv,Y.asHours=Vv,Y.asDays=kv,Y.asWeeks=Lv,Y.asMonths=Tv,Y.asQuarters=Cv,Y.asYears=Fv,Y.valueOf=Av,Y._bubble=Mv,Y.clone=qv,Y.get=Uv,Y.milliseconds=Bv,Y.seconds=Yv,Y.minutes=Gv,Y.hours=Wv,Y.days=zv,Y.weeks=$v,Y.months=Hv,Y.years=jv,Y.humanize=Xv,Y.toISOString=Gr,Y.toString=Gr,Y.toJSON=Gr,Y.locale=ea,Y.localeData=ra,Y.toIsoString=Le("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Gr),Y.lang=ta,M("X",0,0,"unix"),M("x",0,0,"valueOf"),b("x",Ar),b("X",Sc),z("X",function(r,s,o){o._d=new Date(parseFloat(r)*1e3)}),z("x",function(r,s,o){o._d=new Date(q(r))});return e.version="2.29.4",t(Q),e.fn=w,e.min=Bp,e.max=Yp,e.now=Gp,e.utc=y,e.unix=Iv,e.months=yv,e.isDate=d,e.locale=gt,e.invalid=re,e.duration=$e,e.isMoment=He,e.weekdays=Sv,e.parseZone=gv,e.localeData=lt,e.isDuration=Cr,e.monthsShort=_v,e.weekdaysMin=bv,e.defineLocale=ms,e.updateLocale=gp,e.locales=yp,e.weekdaysShort=wv,e.normalizeUnits=Te,e.relativeTimeRounding=Jv,e.relativeTimeThreshold=Qv,e.calendarFormat=hm,e.prototype=w,e.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},e})});var nt=O(rt=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0});function we(i){let e=i||"";return function(){throw new Error("this method "+e+" is abstract! (it has no implementation in class "+this.constructor.name+")")}}function wt(i,e){if(!i)throw new Error(e||"Assertion failed")}function Vs(i,e,t){let n;Object.defineProperty(i,e,{get(){return n||(n=t.call(this)),n}})}function oh(i){return i&&Object.assign({},i)}function Na(i,e){let t=[];for(;e-- >0;)t.push(i());return t}function Va(i,e){return new Array(e+1).join(i)}function gn(i,e){return Na(()=>i,e)}function ks(i){let e=[];for(let t=0;t<i.length;t++){let n=i[t];i.lastIndexOf(n)!==t&&e.indexOf(n)<0&&e.push(n)}return e}function ka(i){let e=[];return i.forEach(t=>{e.indexOf(t)<0&&e.push(t)}),e}function Vt(i){let e=i[0];return e===e.toUpperCase()}function La(i){return!Vt(i)}function Ta(i,e,t){let n=t||" ";return i.length<e?Va(n,e-i.length)+i:i}function Ft(){this.strings=[]}Ft.prototype.append=function(i){this.strings.push(i)};Ft.prototype.contents=function(){return this.strings.join("")};var Os=i=>String.fromCodePoint(parseInt(i,16));function Ca(i){if(i.charAt(0)==="\\")switch(i.charAt(1)){case"b":return"\b";case"f":return"\f";case"n":return`
`;case"r":return"\r";case"t":return"	";case"v":return"\v";case"x":return Os(i.slice(2,4));case"u":return i.charAt(2)==="{"?Os(i.slice(3,-1)):Os(i.slice(2,6));default:return i.charAt(1)}else return i}function Ws(i){if(i==null)return String(i);let e=Object.prototype.toString.call(i);try{let t;return i.constructor&&i.constructor.name?t=i.constructor.name:e.indexOf("[object ")===0?t=e.slice(8,-1):t=typeof i,t+": "+JSON.stringify(String(i))}catch(t){return e}}var lh=Object.freeze({__proto__:null,abstract:we,assert:wt,defineLazyProperty:Vs,clone:oh,repeatFn:Na,repeatStr:Va,repeat:gn,getDuplicates:ks,copyWithoutDuplicates:ka,isSyntactic:Vt,isLexical:La,padLeft:Ta,StringBuffer:Ft,unescapeCodePoint:Ca,unexpectedObjToString:Ws}),uh={Lu:/\p{Lu}/u,Ll:/\p{Ll}/u,Lt:/\p{Lt}/u,Lm:/\p{Lm}/u,Lo:/\p{Lo}/u,Nl:/\p{Nl}/u,Nd:/\p{Nd}/u,Mn:/\p{Mn}/u,Mc:/\p{Mc}/u,Pc:/\p{Pc}/u,Zs:/\p{Zs}/u,L:/\p{Letter}/u,Ltmo:/\p{Lt}|\p{Lm}|\p{Lo}/u},N=class i{constructor(){if(this.constructor===i)throw new Error("PExpr cannot be instantiated -- it's abstract")}withSource(e){return e&&(this.source=e.trimmed()),this}},he=Object.create(N.prototype),de=Object.create(N.prototype),ae=class extends N{constructor(e){super(),this.obj=e}},le=class extends N{constructor(e,t){super(),this.from=e,this.to=t,this.matchCodePoint=e.length>1||t.length>1}},ue=class extends N{constructor(e){super(),this.index=e}},ee=class extends N{constructor(e){super(),this.terms=e}},kt=class extends ee{constructor(e,t,n){let a=e.rules[t].body;super([n,a]),this.superGrammar=e,this.name=t,this.body=n}},Lt=class extends ee{constructor(e,t,n,a){let u=e.rules[t].body;super([...n,u,...a]),this.superGrammar=e,this.ruleName=t,this.expansionPos=n.length}},se=class extends N{constructor(e){super(),this.factors=e}},ce=class extends N{constructor(e){super(),this.expr=e}},tt=class extends ce{},vt=class extends ce{},Fe=class extends ce{};tt.prototype.operator="*";vt.prototype.operator="+";Fe.prototype.operator="?";tt.prototype.minNumMatches=0;vt.prototype.minNumMatches=1;Fe.prototype.minNumMatches=0;tt.prototype.maxNumMatches=Number.POSITIVE_INFINITY;vt.prototype.maxNumMatches=Number.POSITIVE_INFINITY;Fe.prototype.maxNumMatches=1;var pe=class extends N{constructor(e){super(),this.expr=e}},me=class extends N{constructor(e){super(),this.expr=e}},ve=class extends N{constructor(e){super(),this.expr=e}},W=class extends N{constructor(e,t=[]){super(),this.ruleName=e,this.args=t}isSyntactic(){return Vt(this.ruleName)}toMemoKey(){return this._memoKey||Object.defineProperty(this,"_memoKey",{value:this.toString()}),this._memoKey}},ie=class extends N{constructor(e){super(),this.category=e,this.pattern=uh[e]}};function te(i,e){let t;return e?(t=new Error(e.getLineAndColumnMessage()+i),t.shortMessage=i,t.interval=e):t=new Error(i),t}function Ls(){return te("Interval sources don't match")}function ch(i){let e=new Error;return Object.defineProperty(e,"message",{enumerable:!0,get(){return i.message}}),Object.defineProperty(e,"shortMessage",{enumerable:!0,get(){return"Expected "+i.getExpectedText()}}),e.interval=i.getInterval(),e}function ph(i,e,t){let n=e?`Grammar ${i} is not declared in namespace '${e}'`:"Undeclared grammar "+i;return te(n,t)}function mh(i,e){return te("Grammar "+i.name+" is already declared in this namespace")}function vh(i){return te(`Grammar '${i.name}' does not support incremental parsing`)}function Fa(i,e,t){return te("Rule "+i+" is not declared in grammar "+e,t)}function hh(i,e,t){return te("Cannot override rule "+i+" because it is not declared in "+e,t)}function dh(i,e,t){return te("Cannot extend rule "+i+" because it is not declared in "+e,t)}function Sa(i,e,t,n){let a="Duplicate declaration for rule '"+i+"' in grammar '"+e+"'";return e!==t&&(a+=" (originally declared in '"+t+"')"),te(a,n)}function qa(i,e,t,n){return te("Wrong number of parameters for rule "+i+" (expected "+e+", got "+t+")",n)}function fh(i,e,t,n){return te("Wrong number of arguments for rule "+i+" (expected "+e+", got "+t+")",n)}function wa(i,e,t){return te("Duplicate parameter names in rule "+i+": "+e.join(", "),t)}function Ih(i,e){return te("Invalid parameter to rule "+i+": "+e+" has arity "+e.getArity()+", but parameter expressions must have arity 1",e.source)}var gh="NOTE: A _syntactic rule_ is a rule whose name begins with a capital letter. See https://ohmjs.org/d/svl for more details.";function yh(i,e){return te("Cannot apply syntactic rule "+i+" from here (inside a lexical context)",e.source)}function _h(i){let{ruleName:e}=i;return te(`applySyntactic is for syntactic rules, but '${e}' is a lexical rule. `+gh,i.source)}function Sh(i){return te("applySyntactic is not required here (in a syntactic context)",i.source)}function ba(i,e){return te("Incorrect argument type: expected "+i,e.source)}function wh(i){return te("'...' can appear at most once in a rule body",i.source)}function bh(i){let e=i._node;wt(e&&e.isNonterminal()&&e.ctorName==="escapeChar_unicodeCodePoint");let t=i.children.slice(1,-1).map(a=>a.source),n=t[0].coverageWith(...t.slice(1));return te(`U+${n.contents} is not a valid Unicode code point`,n)}function Ua(i,e){let t=e.length>0?e[e.length-1].args:[],a="Nullable expression "+i.expr.substituteParams(t)+" is not allowed inside '"+i.operator+"' (possible infinite loop)";if(e.length>0){let u=e.map(p=>new W(p.ruleName,p.args)).join(`
`);a+=`
Application stack (most recent application last):
`+u}return te(a,i.expr.source)}function Ba(i,e,t,n){return te("Rule "+i+" involves an alternation which has inconsistent arity (expected "+e+", got "+t+")",n.source)}function xh(i){let e=i.map(t=>t.message);return te(["Errors:"].concat(e).join(`
- `),i[0].interval)}function Rh(i,e,t,n){let a=n.slice(0,-1).map(v=>{let d="  "+v[0].name+" > "+v[1];return v.length===3?d+" for '"+v[2]+"'":d}).join(`
`);a+=`
  `+e+" > "+i;let u="";i==="_iter"&&(u=[`
NOTE: as of Ohm v16, there is no default action for iteration nodes \u2014 see `,"  https://ohmjs.org/d/dsa for details."].join(`
`));let p=[`Missing semantic action for '${i}' in ${t} '${e}'.${u}`,"Action stack (most recent call last):",a].join(`
`),h=te(p);return h.name="missingSemanticAction",h}function Dh(i){if(i.length===1)throw i[0];if(i.length>1)throw xh(i)}function Mh(i){let e=0;return i.map(n=>{let a=n.toString();return e=Math.max(e,a.length),a}).map(n=>Ta(n,e))}function xa(i,e,t){let n=i.length,a=i.slice(0,t),u=i.slice(t+e.length);return(a+e+u).substr(0,n)}function Ph(...i){let e=this,{offset:t}=e,{repeatStr:n}=lh,a=new Ft;a.append("Line "+e.lineNum+", col "+e.colNum+`:
`);let u=Mh([e.prevLine==null?0:e.lineNum-1,e.lineNum,e.nextLine==null?0:e.lineNum+1]),p=(g,I,y)=>{a.append(y+u[g]+" | "+I+`
`)};e.prevLine!=null&&p(0,e.prevLine,"  "),p(1,e.line,"> ");let h=e.line.length,v=n(" ",h+1);for(let g=0;g<i.length;++g){let I=i[g][0],y=i[g][1];wt(I>=0&&I<=y,"range start must be >= 0 and <= end");let x=t-e.colNum+1;I=Math.max(0,I-x),y=Math.min(y-x,h),v=xa(v,n("~",y-I),I)}let d=2+u[1].length+3;return a.append(n(" ",d)),v=xa(v,"^",e.colNum-1),a.append(v.replace(/ +$/,"")+`
`),e.nextLine!=null&&p(2,e.nextLine,"  "),a.contents()}var Ts=[];function Ya(i){Ts.push(i)}function Ah(i){Ts.forEach(e=>{e(i)}),Ts=null}function zs(i,e){let t=1,n=1,a=0,u=0,p=null,h=null,v=-1;for(;a<e;){let I=i.charAt(a++);I===`
`?(t++,n=1,v=u,u=a):I!=="\r"&&n++}let d=i.indexOf(`
`,u);if(d===-1)d=i.length;else{let I=i.indexOf(`
`,d+1);p=I===-1?i.slice(d):i.slice(d,I),p=p.replace(/^\r?\n/,"").replace(/\r$/,"")}v>=0&&(h=i.slice(v,u).replace(/\r?\n$/,""));let g=i.slice(u,d).replace(/\r$/,"");return{offset:e,lineNum:t,colNum:n,line:g,prevLine:h,nextLine:p,toString:Ph}}function Hs(i,e,...t){return zs(i,e).toString(...t)}var Ra=(()=>{let i=0;return e=>""+e+i++})(),Tt=class i{constructor(e,t,n){this.sourceString=e,this.startIdx=t,this.endIdx=n}get contents(){return this._contents===void 0&&(this._contents=this.sourceString.slice(this.startIdx,this.endIdx)),this._contents}get length(){return this.endIdx-this.startIdx}coverageWith(...e){return i.coverage(...e,this)}collapsedLeft(){return new i(this.sourceString,this.startIdx,this.startIdx)}collapsedRight(){return new i(this.sourceString,this.endIdx,this.endIdx)}getLineAndColumn(){return zs(this.sourceString,this.startIdx)}getLineAndColumnMessage(){let e=[this.startIdx,this.endIdx];return Hs(this.sourceString,this.startIdx,e)}minus(e){if(this.sourceString!==e.sourceString)throw Ls();return this.startIdx===e.startIdx&&this.endIdx===e.endIdx?[]:this.startIdx<e.startIdx&&e.endIdx<this.endIdx?[new i(this.sourceString,this.startIdx,e.startIdx),new i(this.sourceString,e.endIdx,this.endIdx)]:this.startIdx<e.endIdx&&e.endIdx<this.endIdx?[new i(this.sourceString,e.endIdx,this.endIdx)]:this.startIdx<e.startIdx&&e.startIdx<this.endIdx?[new i(this.sourceString,this.startIdx,e.startIdx)]:[this]}relativeTo(e){if(this.sourceString!==e.sourceString)throw Ls();return wt(this.startIdx>=e.startIdx&&this.endIdx<=e.endIdx,"other interval does not cover this one"),new i(this.sourceString,this.startIdx-e.startIdx,this.endIdx-e.startIdx)}trimmed(){let{contents:e}=this,t=this.startIdx+e.match(/^\s*/)[0].length,n=this.endIdx-e.match(/\s*$/)[0].length;return new i(this.sourceString,t,n)}subInterval(e,t){let n=this.startIdx+e;return new i(this.sourceString,n,n+t)}};Tt.coverage=function(i,...e){let{startIdx:t,endIdx:n}=i;for(let a of e){if(a.sourceString!==i.sourceString)throw Ls();t=Math.min(t,a.startIdx),n=Math.max(n,a.endIdx)}return new Tt(i.sourceString,t,n)};var Oh=65535,$t=class{constructor(e){this.source=e,this.pos=0,this.examinedLength=0}atEnd(){let e=this.pos>=this.source.length;return this.examinedLength=Math.max(this.examinedLength,this.pos+1),e}next(){let e=this.source[this.pos++];return this.examinedLength=Math.max(this.examinedLength,this.pos),e}nextCharCode(){let e=this.next();return e&&e.charCodeAt(0)}nextCodePoint(){let e=this.source.slice(this.pos++).codePointAt(0);return e>Oh&&(this.pos+=1),this.examinedLength=Math.max(this.examinedLength,this.pos),e}matchString(e,t){let n;if(t){for(n=0;n<e.length;n++){let a=this.next(),u=e[n];if(a==null||a.toUpperCase()!==u.toUpperCase())return!1}return!0}for(n=0;n<e.length;n++)if(this.next()!==e[n])return!1;return!0}sourceSlice(e,t){return this.source.slice(e,t)}interval(e,t){return new Tt(this.source,e,t||this.pos)}},pn=class{constructor(e,t,n,a,u,p,h){this.matcher=e,this.input=t,this.startExpr=n,this._cst=a,this._cstOffset=u,this._rightmostFailurePosition=p,this._rightmostFailures=h,this.failed()&&(Vs(this,"message",function(){let v="Expected "+this.getExpectedText();return Hs(this.input,this.getRightmostFailurePosition())+v}),Vs(this,"shortMessage",function(){let v="expected "+this.getExpectedText(),d=zs(this.input,this.getRightmostFailurePosition());return"Line "+d.lineNum+", col "+d.colNum+": "+v}))}succeeded(){return!!this._cst}failed(){return!this.succeeded()}getRightmostFailurePosition(){return this._rightmostFailurePosition}getRightmostFailures(){if(!this._rightmostFailures){this.matcher.setInput(this.input);let e=this.matcher._match(this.startExpr,{tracing:!1,positionToRecordFailures:this.getRightmostFailurePosition()});this._rightmostFailures=e.getRightmostFailures()}return this._rightmostFailures}toString(){return this.succeeded()?"[match succeeded]":"[match failed at position "+this.getRightmostFailurePosition()+"]"}getExpectedText(){if(this.succeeded())throw new Error("cannot get expected text of a successful MatchResult");let e=new Ft,t=this.getRightmostFailures();t=t.filter(n=>!n.isFluffy());for(let n=0;n<t.length;n++)n>0&&(n===t.length-1?e.append(t.length>2?", or ":" or "):e.append(", ")),e.append(t[n].toString());return e.contents()}getInterval(){let e=this.getRightmostFailurePosition();return new Tt(this.input,e,e)}},Cs=class{constructor(){this.applicationMemoKeyStack=[],this.memo={},this.maxExaminedLength=0,this.maxRightmostFailureOffset=-1,this.currentLeftRecursion=void 0}isActive(e){return this.applicationMemoKeyStack.indexOf(e.toMemoKey())>=0}enter(e){this.applicationMemoKeyStack.push(e.toMemoKey())}exit(){this.applicationMemoKeyStack.pop()}startLeftRecursion(e,t){t.isLeftRecursion=!0,t.headApplication=e,t.nextLeftRecursion=this.currentLeftRecursion,this.currentLeftRecursion=t;let{applicationMemoKeyStack:n}=this,a=n.indexOf(e.toMemoKey())+1,u=n.slice(a);t.isInvolved=function(p){return u.indexOf(p)>=0},t.updateInvolvedApplicationMemoKeys=function(){for(let p=a;p<n.length;p++){let h=n[p];this.isInvolved(h)||u.push(h)}}}endLeftRecursion(){this.currentLeftRecursion=this.currentLeftRecursion.nextLeftRecursion}shouldUseMemoizedResult(e){if(!e.isLeftRecursion)return!0;let{applicationMemoKeyStack:t}=this;for(let n=0;n<t.length;n++){let a=t[n];if(e.isInvolved(a))return!1}return!0}memoize(e,t){return this.memo[e]=t,this.maxExaminedLength=Math.max(this.maxExaminedLength,t.examinedLength),this.maxRightmostFailureOffset=Math.max(this.maxRightmostFailureOffset,t.rightmostFailureOffset),t}clearObsoleteEntries(e,t){if(e+this.maxExaminedLength<=t)return;let{memo:n}=this;this.maxExaminedLength=0,this.maxRightmostFailureOffset=-1,Object.keys(n).forEach(a=>{let u=n[a];e+u.examinedLength>t?delete n[a]:(this.maxExaminedLength=Math.max(this.maxExaminedLength,u.examinedLength),this.maxRightmostFailureOffset=Math.max(this.maxRightmostFailureOffset,u.rightmostFailureOffset))})}},Eh="\u2717",Nh="\u2713",Vh="\u22C5",kh="\u21D2",Lh="\u2409",Th="\u240A",Ch="\u240D",Fs={succeeded:1,isRootNode:2,isImplicitSpaces:4,isMemoized:8,isHeadOfLeftRecursion:16,terminatesLR:32};function Fh(i){return gn(" ",i).join("")}function qh(i,e,t){let n=Ga(i.slice(e,e+t));return n.length<t?n+gn(" ",t-n.length).join(""):n}function Ga(i){return typeof i=="string"?i.replace(/ /g,Vh).replace(/\t/g,Lh).replace(/\n/g,Th).replace(/\r/g,Ch):String(i)}var Kt=class i{constructor(e,t,n,a,u,p,h){this.input=e,this.pos=this.pos1=t,this.pos2=n,this.source=new Tt(e,t,n),this.expr=a,this.bindings=p,this.children=h||[],this.terminatingLREntry=null,this._flags=u?Fs.succeeded:0}get displayString(){return this.expr.toDisplayString()}clone(){return this.cloneWithExpr(this.expr)}cloneWithExpr(e){let t=new i(this.input,this.pos,this.pos2,e,this.succeeded,this.bindings,this.children);return t.isHeadOfLeftRecursion=this.isHeadOfLeftRecursion,t.isImplicitSpaces=this.isImplicitSpaces,t.isMemoized=this.isMemoized,t.isRootNode=this.isRootNode,t.terminatesLR=this.terminatesLR,t.terminatingLREntry=this.terminatingLREntry,t}recordLRTermination(e,t){this.terminatingLREntry=new i(this.input,this.pos,this.pos2,this.expr,!1,[t],[e]),this.terminatingLREntry.terminatesLR=!0}walk(e,t){let n=e;typeof n=="function"&&(n={enter:n});function a(u,p,h){let v=!0;n.enter&&n.enter.call(t,u,p,h)===i.prototype.SKIP&&(v=!1),v&&(u.children.forEach(d=>{a(d,u,h+1)}),n.exit&&n.exit.call(t,u,p,h))}this.isRootNode?this.children.forEach(u=>{a(u,null,0)}):a(this,null,0)}toString(){let e=new Ft;return this.walk((t,n,a)=>{if(!t)return this.SKIP;if(t.expr.constructor.name!=="Alt"){if(e.append(qh(t.input,t.pos,10)+Fh(a*2+1)),e.append((t.succeeded?Nh:Eh)+" "+t.displayString),t.isHeadOfLeftRecursion&&e.append(" (LR)"),t.succeeded){let p=Ga(t.source.contents);e.append(" "+kh+"  "),e.append(typeof p=="string"?'"'+p+'"':p)}e.append(`
`)}}),e.contents()}};Kt.prototype.SKIP={};Object.keys(Fs).forEach(i=>{let e=Fs[i];Object.defineProperty(Kt.prototype,i,{get(){return(this._flags&e)!==0},set(t){t?this._flags|=e:this._flags&=~e}})});N.prototype.allowsSkippingPrecedingSpace=we("allowsSkippingPrecedingSpace");he.allowsSkippingPrecedingSpace=de.allowsSkippingPrecedingSpace=W.prototype.allowsSkippingPrecedingSpace=ae.prototype.allowsSkippingPrecedingSpace=le.prototype.allowsSkippingPrecedingSpace=ie.prototype.allowsSkippingPrecedingSpace=function(){return!0};ee.prototype.allowsSkippingPrecedingSpace=ce.prototype.allowsSkippingPrecedingSpace=ve.prototype.allowsSkippingPrecedingSpace=me.prototype.allowsSkippingPrecedingSpace=pe.prototype.allowsSkippingPrecedingSpace=ue.prototype.allowsSkippingPrecedingSpace=se.prototype.allowsSkippingPrecedingSpace=function(){return!1};var dr;Ya(i=>{dr=i});var mn;N.prototype.assertAllApplicationsAreValid=function(i,e){mn=0,this._assertAllApplicationsAreValid(i,e)};N.prototype._assertAllApplicationsAreValid=we("_assertAllApplicationsAreValid");he._assertAllApplicationsAreValid=de._assertAllApplicationsAreValid=ae.prototype._assertAllApplicationsAreValid=le.prototype._assertAllApplicationsAreValid=ue.prototype._assertAllApplicationsAreValid=ie.prototype._assertAllApplicationsAreValid=function(i,e){};ve.prototype._assertAllApplicationsAreValid=function(i,e){mn++,this.expr._assertAllApplicationsAreValid(i,e),mn--};ee.prototype._assertAllApplicationsAreValid=function(i,e){for(let t=0;t<this.terms.length;t++)this.terms[t]._assertAllApplicationsAreValid(i,e)};se.prototype._assertAllApplicationsAreValid=function(i,e){for(let t=0;t<this.factors.length;t++)this.factors[t]._assertAllApplicationsAreValid(i,e)};ce.prototype._assertAllApplicationsAreValid=pe.prototype._assertAllApplicationsAreValid=me.prototype._assertAllApplicationsAreValid=function(i,e){this.expr._assertAllApplicationsAreValid(i,e)};W.prototype._assertAllApplicationsAreValid=function(i,e,t=!1){let n=e.rules[this.ruleName],a=Vt(i)&&mn===0;if(!n)throw Fa(this.ruleName,e.name,this.source);if(!t&&Vt(this.ruleName)&&!a)throw yh(this.ruleName,this);let u=this.args.length,p=n.formals.length;if(u!==p)throw fh(this.ruleName,p,u,this.source);let h=dr&&n===dr.rules.applySyntactic;if(dr&&n===dr.rules.caseInsensitive&&!(this.args[0]instanceof ae))throw ba('a Terminal (e.g. "abc")',this.args[0]);if(h){let d=this.args[0];if(!(d instanceof W))throw ba("a syntactic rule application",d);if(!Vt(d.ruleName))throw _h(d);if(a)throw Sh(this)}this.args.forEach(d=>{if(d._assertAllApplicationsAreValid(i,e,h),d.getArity()!==1)throw Ih(this.ruleName,d)})};N.prototype.assertChoicesHaveUniformArity=we("assertChoicesHaveUniformArity");he.assertChoicesHaveUniformArity=de.assertChoicesHaveUniformArity=ae.prototype.assertChoicesHaveUniformArity=le.prototype.assertChoicesHaveUniformArity=ue.prototype.assertChoicesHaveUniformArity=ve.prototype.assertChoicesHaveUniformArity=ie.prototype.assertChoicesHaveUniformArity=function(i){};ee.prototype.assertChoicesHaveUniformArity=function(i){if(this.terms.length===0)return;let e=this.terms[0].getArity();for(let t=0;t<this.terms.length;t++){let n=this.terms[t];n.assertChoicesHaveUniformArity();let a=n.getArity();if(e!==a)throw Ba(i,e,a,n)}};kt.prototype.assertChoicesHaveUniformArity=function(i){let e=this.terms[0].getArity(),t=this.terms[1].getArity();if(e!==t)throw Ba(i,t,e,this.terms[0])};se.prototype.assertChoicesHaveUniformArity=function(i){for(let e=0;e<this.factors.length;e++)this.factors[e].assertChoicesHaveUniformArity(i)};ce.prototype.assertChoicesHaveUniformArity=function(i){this.expr.assertChoicesHaveUniformArity(i)};pe.prototype.assertChoicesHaveUniformArity=function(i){};me.prototype.assertChoicesHaveUniformArity=function(i){this.expr.assertChoicesHaveUniformArity(i)};W.prototype.assertChoicesHaveUniformArity=function(i){};N.prototype.assertIteratedExprsAreNotNullable=we("assertIteratedExprsAreNotNullable");he.assertIteratedExprsAreNotNullable=de.assertIteratedExprsAreNotNullable=ae.prototype.assertIteratedExprsAreNotNullable=le.prototype.assertIteratedExprsAreNotNullable=ue.prototype.assertIteratedExprsAreNotNullable=ie.prototype.assertIteratedExprsAreNotNullable=function(i){};ee.prototype.assertIteratedExprsAreNotNullable=function(i){for(let e=0;e<this.terms.length;e++)this.terms[e].assertIteratedExprsAreNotNullable(i)};se.prototype.assertIteratedExprsAreNotNullable=function(i){for(let e=0;e<this.factors.length;e++)this.factors[e].assertIteratedExprsAreNotNullable(i)};ce.prototype.assertIteratedExprsAreNotNullable=function(i){if(this.expr.assertIteratedExprsAreNotNullable(i),this.expr.isNullable(i))throw Ua(this,[])};Fe.prototype.assertIteratedExprsAreNotNullable=pe.prototype.assertIteratedExprsAreNotNullable=me.prototype.assertIteratedExprsAreNotNullable=ve.prototype.assertIteratedExprsAreNotNullable=function(i){this.expr.assertIteratedExprsAreNotNullable(i)};W.prototype.assertIteratedExprsAreNotNullable=function(i){this.args.forEach(e=>{e.assertIteratedExprsAreNotNullable(i)})};var Ir=class{constructor(e){this.matchLength=e}get ctorName(){throw new Error("subclass responsibility")}numChildren(){return this.children?this.children.length:0}childAt(e){if(this.children)return this.children[e]}indexOfChild(e){return this.children.indexOf(e)}hasChildren(){return this.numChildren()>0}hasNoChildren(){return!this.hasChildren()}onlyChild(){if(this.numChildren()!==1)throw new Error("cannot get only child of a node of type "+this.ctorName+" (it has "+this.numChildren()+" children)");return this.firstChild()}firstChild(){if(this.hasNoChildren())throw new Error("cannot get first child of a "+this.ctorName+" node, which has no children");return this.childAt(0)}lastChild(){if(this.hasNoChildren())throw new Error("cannot get last child of a "+this.ctorName+" node, which has no children");return this.childAt(this.numChildren()-1)}childBefore(e){let t=this.indexOfChild(e);if(t<0)throw new Error("Node.childBefore() called w/ an argument that is not a child");if(t===0)throw new Error("cannot get child before first child");return this.childAt(t-1)}childAfter(e){let t=this.indexOfChild(e);if(t<0)throw new Error("Node.childAfter() called w/ an argument that is not a child");if(t===this.numChildren()-1)throw new Error("cannot get child after last child");return this.childAt(t+1)}isTerminal(){return!1}isNonterminal(){return!1}isIteration(){return!1}isOptional(){return!1}},ht=class extends Ir{get ctorName(){return"_terminal"}isTerminal(){return!0}get primitiveValue(){throw new Error("The `primitiveValue` property was removed in Ohm v17.")}},qs=class extends Ir{constructor(e,t,n,a){super(a),this.ruleName=e,this.children=t,this.childOffsets=n}get ctorName(){return this.ruleName}isNonterminal(){return!0}isLexical(){return La(this.ctorName)}isSyntactic(){return Vt(this.ctorName)}},vn=class extends Ir{constructor(e,t,n,a){super(n),this.children=e,this.childOffsets=t,this.optional=a}get ctorName(){return"_iter"}isIteration(){return!0}isOptional(){return this.optional}};N.prototype.eval=we("eval");he.eval=function(i){let{inputStream:e}=i,t=e.pos,n=e.nextCodePoint();return n!==void 0?(i.pushBinding(new ht(String.fromCodePoint(n).length),t),!0):(i.processFailure(t,this),!1)};de.eval=function(i){let{inputStream:e}=i,t=e.pos;return e.atEnd()?(i.pushBinding(new ht(0),t),!0):(i.processFailure(t,this),!1)};ae.prototype.eval=function(i){let{inputStream:e}=i,t=e.pos;return e.matchString(this.obj)?(i.pushBinding(new ht(this.obj.length),t),!0):(i.processFailure(t,this),!1)};le.prototype.eval=function(i){let{inputStream:e}=i,t=e.pos,n=this.matchCodePoint?e.nextCodePoint():e.nextCharCode();return n!==void 0&&this.from.codePointAt(0)<=n&&n<=this.to.codePointAt(0)?(i.pushBinding(new ht(String.fromCodePoint(n).length),t),!0):(i.processFailure(t,this),!1)};ue.prototype.eval=function(i){return i.eval(i.currentApplication().args[this.index])};ve.prototype.eval=function(i){i.enterLexifiedContext();let e=i.eval(this.expr);return i.exitLexifiedContext(),e};ee.prototype.eval=function(i){for(let e=0;e<this.terms.length;e++)if(i.eval(this.terms[e]))return!0;return!1};se.prototype.eval=function(i){for(let e=0;e<this.factors.length;e++){let t=this.factors[e];if(!i.eval(t))return!1}return!0};ce.prototype.eval=function(i){let{inputStream:e}=i,t=e.pos,n=this.getArity(),a=[],u=[];for(;a.length<n;)a.push([]),u.push([]);let p=0,h=t,v;for(;p<this.maxNumMatches&&i.eval(this.expr);){if(e.pos===h)throw Ua(this,i._applicationStack);h=e.pos,p++;let y=i._bindings.splice(i._bindings.length-n,n),x=i._bindingOffsets.splice(i._bindingOffsets.length-n,n);for(v=0;v<y.length;v++)a[v].push(y[v]),u[v].push(x[v])}if(p<this.minNumMatches)return!1;let d=i.posToOffset(t),g=0;if(p>0){let y=a[n-1],x=u[n-1],S=x[x.length-1]+y[y.length-1].matchLength;d=u[0][0],g=S-d}let I=this instanceof Fe;for(v=0;v<a.length;v++)i._bindings.push(new vn(a[v],u[v],g,I)),i._bindingOffsets.push(d);return!0};pe.prototype.eval=function(i){let{inputStream:e}=i,t=e.pos;i.pushFailuresInfo();let n=i.eval(this.expr);return i.popFailuresInfo(),n?(i.processFailure(t,this),!1):(e.pos=t,!0)};me.prototype.eval=function(i){let{inputStream:e}=i,t=e.pos;return i.eval(this.expr)?(e.pos=t,!0):!1};W.prototype.eval=function(i){let e=i.currentApplication(),t=e?e.args:[],n=this.substituteParams(t),a=i.getCurrentPosInfo();if(a.isActive(n))return n.handleCycle(i);let u=n.toMemoKey(),p=a.memo[u];if(p&&a.shouldUseMemoizedResult(p)){if(i.hasNecessaryInfo(p))return i.useMemoizedResult(i.inputStream.pos,p);delete a.memo[u]}return n.reallyEval(i)};W.prototype.handleCycle=function(i){let e=i.getCurrentPosInfo(),{currentLeftRecursion:t}=e,n=this.toMemoKey(),a=e.memo[n];return t&&t.headApplication.toMemoKey()===n?a.updateInvolvedApplicationMemoKeys():a||(a=e.memoize(n,{matchLength:0,examinedLength:0,value:!1,rightmostFailureOffset:-1}),e.startLeftRecursion(this,a)),i.useMemoizedResult(i.inputStream.pos,a)};W.prototype.reallyEval=function(i){let{inputStream:e}=i,t=e.pos,n=i.getCurrentPosInfo(),a=i.grammar.rules[this.ruleName],{body:u}=a,{description:p}=a;i.enterApplication(n,this),p&&i.pushFailuresInfo();let h=e.examinedLength;e.examinedLength=0;let v=this.evalOnce(u,i),d=n.currentLeftRecursion,g=this.toMemoKey(),I=d&&d.headApplication.toMemoKey()===g,y;i.doNotMemoize?i.doNotMemoize=!1:I?(v=this.growSeedResult(u,i,t,d,v),n.endLeftRecursion(),y=d,y.examinedLength=e.examinedLength-t,y.rightmostFailureOffset=i._getRightmostFailureOffset(),n.memoize(g,y)):(!d||!d.isInvolved(g))&&(y=n.memoize(g,{matchLength:e.pos-t,examinedLength:e.examinedLength-t,value:v,failuresAtRightmostPosition:i.cloneRecordedFailures(),rightmostFailureOffset:i._getRightmostFailureOffset()}));let x=!!v;if(p&&(i.popFailuresInfo(),x||i.processFailure(t,this),y&&(y.failuresAtRightmostPosition=i.cloneRecordedFailures())),i.isTracing()&&y){let S=i.getTraceEntry(t,this,x,x?[v]:[]);I&&(wt(S.terminatingLREntry!=null||!x),S.isHeadOfLeftRecursion=!0),y.traceEntry=S}return e.examinedLength=Math.max(e.examinedLength,h),i.exitApplication(n,v),x};W.prototype.evalOnce=function(i,e){let{inputStream:t}=e,n=t.pos;if(e.eval(i)){let a=i.getArity(),u=e._bindings.splice(e._bindings.length-a,a),p=e._bindingOffsets.splice(e._bindingOffsets.length-a,a),h=t.pos-n;return new qs(this.ruleName,u,p,h)}else return!1};W.prototype.growSeedResult=function(i,e,t,n,a){if(!a)return!1;let{inputStream:u}=e;for(;;){if(n.matchLength=u.pos-t,n.value=a,n.failuresAtRightmostPosition=e.cloneRecordedFailures(),e.isTracing()){let p=e.trace[e.trace.length-1];n.traceEntry=new Kt(e.input,t,u.pos,this,!0,[a],[p.clone()])}if(u.pos=t,a=this.evalOnce(i,e),u.pos-t<=n.matchLength)break;e.isTracing()&&e.trace.splice(-2,1)}return e.isTracing()&&n.traceEntry.recordLRTermination(e.trace.pop(),a),u.pos=t+n.matchLength,n.value};ie.prototype.eval=function(i){let{inputStream:e}=i,t=e.pos,n=e.next();return n&&this.pattern.test(n)?(i.pushBinding(new ht(n.length),t),!0):(i.processFailure(t,this),!1)};N.prototype.getArity=we("getArity");he.getArity=de.getArity=ae.prototype.getArity=le.prototype.getArity=ue.prototype.getArity=W.prototype.getArity=ie.prototype.getArity=function(){return 1};ee.prototype.getArity=function(){return this.terms.length===0?0:this.terms[0].getArity()};se.prototype.getArity=function(){let i=0;for(let e=0;e<this.factors.length;e++)i+=this.factors[e].getArity();return i};ce.prototype.getArity=function(){return this.expr.getArity()};pe.prototype.getArity=function(){return 0};me.prototype.getArity=ve.prototype.getArity=function(){return this.expr.getArity()};function Ke(i,e){let t={};if(i.source&&e){let n=i.source.relativeTo(e);t.sourceInterval=[n.startIdx,n.endIdx]}return t}N.prototype.outputRecipe=we("outputRecipe");he.outputRecipe=function(i,e){return["any",Ke(this,e)]};de.outputRecipe=function(i,e){return["end",Ke(this,e)]};ae.prototype.outputRecipe=function(i,e){return["terminal",Ke(this,e),this.obj]};le.prototype.outputRecipe=function(i,e){return["range",Ke(this,e),this.from,this.to]};ue.prototype.outputRecipe=function(i,e){return["param",Ke(this,e),this.index]};ee.prototype.outputRecipe=function(i,e){return["alt",Ke(this,e)].concat(this.terms.map(t=>t.outputRecipe(i,e)))};kt.prototype.outputRecipe=function(i,e){return this.terms[0].outputRecipe(i,e)};Lt.prototype.outputRecipe=function(i,e){let t=this.terms.slice(0,this.expansionPos),n=this.terms.slice(this.expansionPos+1);return["splice",Ke(this,e),t.map(a=>a.outputRecipe(i,e)),n.map(a=>a.outputRecipe(i,e))]};se.prototype.outputRecipe=function(i,e){return["seq",Ke(this,e)].concat(this.factors.map(t=>t.outputRecipe(i,e)))};tt.prototype.outputRecipe=vt.prototype.outputRecipe=Fe.prototype.outputRecipe=pe.prototype.outputRecipe=me.prototype.outputRecipe=ve.prototype.outputRecipe=function(i,e){return[this.constructor.name.toLowerCase(),Ke(this,e),this.expr.outputRecipe(i,e)]};W.prototype.outputRecipe=function(i,e){return["app",Ke(this,e),this.ruleName,this.args.map(t=>t.outputRecipe(i,e))]};ie.prototype.outputRecipe=function(i,e){return["unicodeChar",Ke(this,e),this.category]};N.prototype.introduceParams=we("introduceParams");he.introduceParams=de.introduceParams=ae.prototype.introduceParams=le.prototype.introduceParams=ue.prototype.introduceParams=ie.prototype.introduceParams=function(i){return this};ee.prototype.introduceParams=function(i){return this.terms.forEach((e,t,n)=>{n[t]=e.introduceParams(i)}),this};se.prototype.introduceParams=function(i){return this.factors.forEach((e,t,n)=>{n[t]=e.introduceParams(i)}),this};ce.prototype.introduceParams=pe.prototype.introduceParams=me.prototype.introduceParams=ve.prototype.introduceParams=function(i){return this.expr=this.expr.introduceParams(i),this};W.prototype.introduceParams=function(i){let e=i.indexOf(this.ruleName);if(e>=0){if(this.args.length>0)throw new Error("Parameterized rules cannot be passed as arguments to another rule.");return new ue(e).withSource(this.source)}else return this.args.forEach((t,n,a)=>{a[n]=t.introduceParams(i)}),this};N.prototype.isNullable=function(i){return this._isNullable(i,Object.create(null))};N.prototype._isNullable=we("_isNullable");he._isNullable=le.prototype._isNullable=ue.prototype._isNullable=vt.prototype._isNullable=ie.prototype._isNullable=function(i,e){return!1};de._isNullable=function(i,e){return!0};ae.prototype._isNullable=function(i,e){return typeof this.obj=="string"?this.obj==="":!1};ee.prototype._isNullable=function(i,e){return this.terms.length===0||this.terms.some(t=>t._isNullable(i,e))};se.prototype._isNullable=function(i,e){return this.factors.every(t=>t._isNullable(i,e))};tt.prototype._isNullable=Fe.prototype._isNullable=pe.prototype._isNullable=me.prototype._isNullable=function(i,e){return!0};ve.prototype._isNullable=function(i,e){return this.expr._isNullable(i,e)};W.prototype._isNullable=function(i,e){let t=this.toMemoKey();if(!Object.prototype.hasOwnProperty.call(e,t)){let{body:n}=i.rules[this.ruleName],a=n.substituteParams(this.args);e[t]=!1,e[t]=a._isNullable(i,e)}return e[t]};N.prototype.substituteParams=we("substituteParams");he.substituteParams=de.substituteParams=ae.prototype.substituteParams=le.prototype.substituteParams=ie.prototype.substituteParams=function(i){return this};ue.prototype.substituteParams=function(i){return i[this.index]};ee.prototype.substituteParams=function(i){return new ee(this.terms.map(e=>e.substituteParams(i)))};se.prototype.substituteParams=function(i){return new se(this.factors.map(e=>e.substituteParams(i)))};ce.prototype.substituteParams=pe.prototype.substituteParams=me.prototype.substituteParams=ve.prototype.substituteParams=function(i){return new this.constructor(this.expr.substituteParams(i))};W.prototype.substituteParams=function(i){if(this.args.length===0)return this;{let e=this.args.map(t=>t.substituteParams(i));return new W(this.ruleName,e)}};function Da(i){return/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(i)}function js(i){let e=Object.create(null);i.forEach(t=>{e[t]=(e[t]||0)+1}),Object.keys(e).forEach(t=>{if(e[t]<=1)return;let n=1;i.forEach((a,u)=>{a===t&&(i[u]=a+"_"+n++)})})}N.prototype.toArgumentNameList=we("toArgumentNameList");he.toArgumentNameList=function(i,e){return["any"]};de.toArgumentNameList=function(i,e){return["end"]};ae.prototype.toArgumentNameList=function(i,e){return typeof this.obj=="string"&&/^[_a-zA-Z0-9]+$/.test(this.obj)?["_"+this.obj]:["$"+i]};le.prototype.toArgumentNameList=function(i,e){let t=this.from+"_to_"+this.to;return Da(t)||(t="_"+t),Da(t)||(t="$"+i),[t]};ee.prototype.toArgumentNameList=function(i,e){let t=this.terms.map(u=>u.toArgumentNameList(i,!0)),n=[],a=t[0].length;for(let u=0;u<a;u++){let p=[];for(let v=0;v<this.terms.length;v++)p.push(t[v][u]);let h=ka(p);n.push(h.join("_or_"))}return e||js(n),n};se.prototype.toArgumentNameList=function(i,e){let t=[];return this.factors.forEach(n=>{let a=n.toArgumentNameList(i,!0);t=t.concat(a),i+=a.length}),e||js(t),t};ce.prototype.toArgumentNameList=function(i,e){let t=this.expr.toArgumentNameList(i,e).map(n=>n[n.length-1]==="s"?n+"es":n+"s");return e||js(t),t};Fe.prototype.toArgumentNameList=function(i,e){return this.expr.toArgumentNameList(i,e).map(t=>"opt"+t[0].toUpperCase()+t.slice(1))};pe.prototype.toArgumentNameList=function(i,e){return[]};me.prototype.toArgumentNameList=ve.prototype.toArgumentNameList=function(i,e){return this.expr.toArgumentNameList(i,e)};W.prototype.toArgumentNameList=function(i,e){return[this.ruleName]};ie.prototype.toArgumentNameList=function(i,e){return["$"+i]};ue.prototype.toArgumentNameList=function(i,e){return["param"+this.index]};N.prototype.toDisplayString=we("toDisplayString");ee.prototype.toDisplayString=se.prototype.toDisplayString=function(){return this.source?this.source.trimmed().contents:"["+this.constructor.name+"]"};he.toDisplayString=de.toDisplayString=ce.prototype.toDisplayString=pe.prototype.toDisplayString=me.prototype.toDisplayString=ve.prototype.toDisplayString=ae.prototype.toDisplayString=le.prototype.toDisplayString=ue.prototype.toDisplayString=function(){return this.toString()};W.prototype.toDisplayString=function(){if(this.args.length>0){let i=this.args.map(e=>e.toDisplayString());return this.ruleName+"<"+i.join(",")+">"}else return this.ruleName};ie.prototype.toDisplayString=function(){return"Unicode ["+this.category+"] character"};function Uh(i){return i==="description"||i==="string"||i==="code"}var Ee=class i{constructor(e,t,n){if(!Uh(n))throw new Error("invalid Failure type: "+n);this.pexpr=e,this.text=t,this.type=n,this.fluffy=!1}getPExpr(){return this.pexpr}getText(){return this.text}getType(){return this.type}isDescription(){return this.type==="description"}isStringTerminal(){return this.type==="string"}isCode(){return this.type==="code"}isFluffy(){return this.fluffy}makeFluffy(){this.fluffy=!0}clearFluffy(){this.fluffy=!1}subsumes(e){return this.getText()===e.getText()&&this.type===e.type&&(!this.isFluffy()||this.isFluffy()&&e.isFluffy())}toString(){return this.type==="string"?JSON.stringify(this.getText()):this.getText()}clone(){let e=new i(this.pexpr,this.text,this.type);return this.isFluffy()&&e.makeFluffy(),e}toKey(){return this.toString()+"#"+this.type}};N.prototype.toFailure=we("toFailure");he.toFailure=function(i){return new Ee(this,"any object","description")};de.toFailure=function(i){return new Ee(this,"end of input","description")};ae.prototype.toFailure=function(i){return new Ee(this,this.obj,"string")};le.prototype.toFailure=function(i){return new Ee(this,JSON.stringify(this.from)+".."+JSON.stringify(this.to),"code")};pe.prototype.toFailure=function(i){let e=this.expr===he?"nothing":"not "+this.expr.toFailure(i);return new Ee(this,e,"description")};me.prototype.toFailure=function(i){return this.expr.toFailure(i)};W.prototype.toFailure=function(i){let{description:e}=i.rules[this.ruleName];return e||(e=(/^[aeiouAEIOU]/.test(this.ruleName)?"an":"a")+" "+this.ruleName),new Ee(this,e,"description")};ie.prototype.toFailure=function(i){return new Ee(this,"a Unicode ["+this.category+"] character","description")};ee.prototype.toFailure=function(i){let t="("+this.terms.map(n=>n.toFailure(i)).join(" or ")+")";return new Ee(this,t,"description")};se.prototype.toFailure=function(i){let t="("+this.factors.map(n=>n.toFailure(i)).join(" ")+")";return new Ee(this,t,"description")};ce.prototype.toFailure=function(i){let e="("+this.expr.toFailure(i)+this.operator+")";return new Ee(this,e,"description")};N.prototype.toString=we("toString");he.toString=function(){return"any"};de.toString=function(){return"end"};ae.prototype.toString=function(){return JSON.stringify(this.obj)};le.prototype.toString=function(){return JSON.stringify(this.from)+".."+JSON.stringify(this.to)};ue.prototype.toString=function(){return"$"+this.index};ve.prototype.toString=function(){return"#("+this.expr.toString()+")"};ee.prototype.toString=function(){return this.terms.length===1?this.terms[0].toString():"("+this.terms.map(i=>i.toString()).join(" | ")+")"};se.prototype.toString=function(){return this.factors.length===1?this.factors[0].toString():"("+this.factors.map(i=>i.toString()).join(" ")+")"};ce.prototype.toString=function(){return this.expr+this.operator};pe.prototype.toString=function(){return"~"+this.expr};me.prototype.toString=function(){return"&"+this.expr};W.prototype.toString=function(){if(this.args.length>0){let i=this.args.map(e=>e.toString());return this.ruleName+"<"+i.join(",")+">"}else return this.ruleName};ie.prototype.toString=function(){return"\\p{"+this.category+"}"};var hn=class i extends N{constructor(e){super(),this.obj=e}_getString(e){let t=e.currentApplication().args[this.obj.index];return wt(t instanceof ae,"expected a Terminal expression"),t.obj}allowsSkippingPrecedingSpace(){return!0}eval(e){let{inputStream:t}=e,n=t.pos,a=this._getString(e);return t.matchString(a,!0)?(e.pushBinding(new ht(a.length),n),!0):(e.processFailure(n,this),!1)}getArity(){return 1}substituteParams(e){return new i(this.obj.substituteParams(e))}toDisplayString(){return this.obj.toDisplayString()+" (case-insensitive)"}toFailure(e){return new Ee(this,this.obj.toFailure(e)+" (case-insensitive)","description")}_isNullable(e,t){return this.obj._isNullable(e,t)}},Bh=Object.freeze({__proto__:null,CaseInsensitiveTerminal:hn,PExpr:N,any:he,end:de,Terminal:ae,Range:le,Param:ue,Alt:ee,Extend:kt,Splice:Lt,Seq:se,Iter:ce,Star:tt,Plus:vt,Opt:Fe,Not:pe,Lookahead:me,Lex:ve,Apply:W,UnicodeChar:ie}),Wa;Ya(i=>{Wa=i.rules.applySyntactic.body});var Es=new W("spaces"),Us=class{constructor(e,t,n){this.matcher=e,this.startExpr=t,this.grammar=e.grammar,this.input=e.getInput(),this.inputStream=new $t(this.input),this.memoTable=e._memoTable,this.userData=void 0,this.doNotMemoize=!1,this._bindings=[],this._bindingOffsets=[],this._applicationStack=[],this._posStack=[0],this.inLexifiedContextStack=[!1],this.rightmostFailurePosition=-1,this._rightmostFailurePositionStack=[],this._recordedFailuresStack=[],n!==void 0&&(this.positionToRecordFailures=n,this.recordedFailures=Object.create(null))}posToOffset(e){return e-this._posStack[this._posStack.length-1]}enterApplication(e,t){this._posStack.push(this.inputStream.pos),this._applicationStack.push(t),this.inLexifiedContextStack.push(!1),e.enter(t),this._rightmostFailurePositionStack.push(this.rightmostFailurePosition),this.rightmostFailurePosition=-1}exitApplication(e,t){let n=this._posStack.pop();this._applicationStack.pop(),this.inLexifiedContextStack.pop(),e.exit(),this.rightmostFailurePosition=Math.max(this.rightmostFailurePosition,this._rightmostFailurePositionStack.pop()),t&&this.pushBinding(t,n)}enterLexifiedContext(){this.inLexifiedContextStack.push(!0)}exitLexifiedContext(){this.inLexifiedContextStack.pop()}currentApplication(){return this._applicationStack[this._applicationStack.length-1]}inSyntacticContext(){let e=this.currentApplication();return e?e.isSyntactic()&&!this.inLexifiedContext():this.startExpr.factors[0].isSyntactic()}inLexifiedContext(){return this.inLexifiedContextStack[this.inLexifiedContextStack.length-1]}skipSpaces(){return this.pushFailuresInfo(),this.eval(Es),this.popBinding(),this.popFailuresInfo(),this.inputStream.pos}skipSpacesIfInSyntacticContext(){return this.inSyntacticContext()?this.skipSpaces():this.inputStream.pos}maybeSkipSpacesBefore(e){return e.allowsSkippingPrecedingSpace()&&e!==Es?this.skipSpacesIfInSyntacticContext():this.inputStream.pos}pushBinding(e,t){this._bindings.push(e),this._bindingOffsets.push(this.posToOffset(t))}popBinding(){this._bindings.pop(),this._bindingOffsets.pop()}numBindings(){return this._bindings.length}truncateBindings(e){for(;this._bindings.length>e;)this.popBinding()}getCurrentPosInfo(){return this.getPosInfo(this.inputStream.pos)}getPosInfo(e){let t=this.memoTable[e];return t||(t=this.memoTable[e]=new Cs),t}processFailure(e,t){if(this.rightmostFailurePosition=Math.max(this.rightmostFailurePosition,e),this.recordedFailures&&e===this.positionToRecordFailures){let n=this.currentApplication();n&&(t=t.substituteParams(n.args)),this.recordFailure(t.toFailure(this.grammar),!1)}}recordFailure(e,t){let n=e.toKey();this.recordedFailures[n]?this.recordedFailures[n].isFluffy()&&!e.isFluffy()&&this.recordedFailures[n].clearFluffy():this.recordedFailures[n]=t?e.clone():e}recordFailures(e,t){Object.keys(e).forEach(n=>{this.recordFailure(e[n],t)})}cloneRecordedFailures(){if(!this.recordedFailures)return;let e=Object.create(null);return Object.keys(this.recordedFailures).forEach(t=>{e[t]=this.recordedFailures[t].clone()}),e}getRightmostFailurePosition(){return this.rightmostFailurePosition}_getRightmostFailureOffset(){return this.rightmostFailurePosition>=0?this.posToOffset(this.rightmostFailurePosition):-1}getMemoizedTraceEntry(e,t){let n=this.memoTable[e];if(n&&t instanceof W){let a=n.memo[t.toMemoKey()];if(a&&a.traceEntry){let u=a.traceEntry.cloneWithExpr(t);return u.isMemoized=!0,u}}return null}getTraceEntry(e,t,n,a){if(t instanceof W){let u=this.currentApplication(),p=u?u.args:[];t=t.substituteParams(p)}return this.getMemoizedTraceEntry(e,t)||new Kt(this.input,e,this.inputStream.pos,t,n,a,this.trace)}isTracing(){return!!this.trace}hasNecessaryInfo(e){return this.trace&&!e.traceEntry?!1:this.recordedFailures&&this.inputStream.pos+e.rightmostFailureOffset===this.positionToRecordFailures?!!e.failuresAtRightmostPosition:!0}useMemoizedResult(e,t){this.trace&&this.trace.push(t.traceEntry);let n=this.inputStream.pos+t.rightmostFailureOffset;return this.rightmostFailurePosition=Math.max(this.rightmostFailurePosition,n),this.recordedFailures&&this.positionToRecordFailures===n&&t.failuresAtRightmostPosition&&this.recordFailures(t.failuresAtRightmostPosition,!0),this.inputStream.examinedLength=Math.max(this.inputStream.examinedLength,t.examinedLength+e),t.value?(this.inputStream.pos+=t.matchLength,this.pushBinding(t.value,e),!0):!1}eval(e){let{inputStream:t}=this,n=this._bindings.length,a=this.userData,u;this.recordedFailures&&(u=this.recordedFailures,this.recordedFailures=Object.create(null));let p=t.pos,h=this.maybeSkipSpacesBefore(e),v;this.trace&&(v=this.trace,this.trace=[]);let d=e.eval(this);if(this.trace){let g=this._bindings.slice(n),I=this.getTraceEntry(h,e,d,g);I.isImplicitSpaces=e===Es,I.isRootNode=e===this.startExpr,v.push(I),this.trace=v}return d?this.recordedFailures&&t.pos===this.positionToRecordFailures&&Object.keys(this.recordedFailures).forEach(g=>{this.recordedFailures[g].makeFluffy()}):(t.pos=p,this.truncateBindings(n),this.userData=a),this.recordedFailures&&this.recordFailures(u,!1),e===Wa&&this.skipSpaces(),d}getMatchResult(){this.grammar._setUpMatchState(this),this.eval(this.startExpr);let e;this.recordedFailures&&(e=Object.keys(this.recordedFailures).map(n=>this.recordedFailures[n]));let t=this._bindings[0];return t&&(t.grammar=this.grammar),new pn(this.matcher,this.input,this.startExpr,t,this._bindingOffsets[0],this.rightmostFailurePosition,e)}getTrace(){this.trace=[];let e=this.getMatchResult(),t=this.trace[this.trace.length-1];return t.result=e,t}pushFailuresInfo(){this._rightmostFailurePositionStack.push(this.rightmostFailurePosition),this._recordedFailuresStack.push(this.recordedFailures)}popFailuresInfo(){this.rightmostFailurePosition=this._rightmostFailurePositionStack.pop(),this.recordedFailures=this._recordedFailuresStack.pop()}},Bs=class{constructor(e){this.grammar=e,this._memoTable=[],this._input="",this._isMemoTableStale=!1}_resetMemoTable(){this._memoTable=[],this._isMemoTableStale=!1}getInput(){return this._input}setInput(e){return this._input!==e&&this.replaceInputRange(0,this._input.length,e),this}replaceInputRange(e,t,n){let a=this._input,u=this._memoTable;if(e<0||e>a.length||t<0||t>a.length||e>t)throw new Error("Invalid indices: "+e+" and "+t);this._input=a.slice(0,e)+n+a.slice(t),this._input!==a&&u.length>0&&(this._isMemoTableStale=!0);let p=u.slice(t);u.length=e;for(let h=0;h<n.length;h++)u.push(void 0);for(let h of p)u.push(h);for(let h=0;h<e;h++){let v=u[h];v&&v.clearObsoleteEntries(h,e)}return this}match(e,t={incremental:!0}){return this._match(this._getStartExpr(e),{incremental:t.incremental,tracing:!1})}trace(e,t={incremental:!0}){return this._match(this._getStartExpr(e),{incremental:t.incremental,tracing:!0})}_match(e,t={}){let n={tracing:!1,incremental:!0,positionToRecordFailures:void 0,...t};if(!n.incremental)this._resetMemoTable();else if(this._isMemoTableStale&&!this.grammar.supportsIncrementalParsing)throw vh(this.grammar);let a=new Us(this,e,n.positionToRecordFailures);return n.tracing?a.getTrace():a.getMatchResult()}_getStartExpr(e){let t=e||this.grammar.defaultStartRule;if(!t)throw new Error("Missing start rule argument -- the grammar has no default start rule.");let n=this.grammar.parseApplication(t);return new se([n,de])}},fr=[],Ys=(i,e)=>Object.prototype.hasOwnProperty.call(i,e),dn=class{constructor(e,t,n){this._node=e,this.source=t,this._baseInterval=n,e.isNonterminal()&&wt(t===n),this._childWrappers=[]}_forgetMemoizedResultFor(e){delete this._node[this._semantics.attributeKeys[e]],this.children.forEach(t=>{t._forgetMemoizedResultFor(e)})}child(e){if(!(0<=e&&e<this._node.numChildren()))return;let t=this._childWrappers[e];if(!t){let n=this._node.childAt(e),a=this._node.childOffsets[e],u=this._baseInterval.subInterval(a,n.matchLength),p=n.isNonterminal()?u:this._baseInterval;t=this._childWrappers[e]=this._semantics.wrap(n,u,p)}return t}_children(){for(let e=0;e<this._node.numChildren();e++)this.child(e);return this._childWrappers}isIteration(){return this._node.isIteration()}isTerminal(){return this._node.isTerminal()}isNonterminal(){return this._node.isNonterminal()}isSyntactic(){return this.isNonterminal()&&this._node.isSyntactic()}isLexical(){return this.isNonterminal()&&this._node.isLexical()}isOptional(){return this._node.isOptional()}iteration(e){let t=e||[],n=t.map(p=>p._node),a=new vn(n,[],-1,!1),u=this._semantics.wrap(a,null,null);return u._childWrappers=t,u}get children(){return this._children()}get ctorName(){return this._node.ctorName}get numChildren(){return this._node.numChildren()}get sourceString(){return this.source.contents}},Ae=class i{constructor(e,t){let n=this;if(this.grammar=e,this.checkedActionDicts=!1,this.Wrapper=class extends(t?t.Wrapper:dn){constructor(a,u,p){super(a,u,p),n.checkActionDictsIfHaventAlready(),this._semantics=n}toString(){return"[semantics wrapper for "+n.grammar.name+"]"}},this.super=t,t){if(!(e.equals(this.super.grammar)||e._inheritsFrom(this.super.grammar)))throw new Error("Cannot extend a semantics for grammar '"+this.super.grammar.name+"' for use with grammar '"+e.name+"' (not a sub-grammar)");this.operations=Object.create(this.super.operations),this.attributes=Object.create(this.super.attributes),this.attributeKeys=Object.create(null);for(let a in this.attributes)Object.defineProperty(this.attributeKeys,a,{value:Ra(a)})}else this.operations=Object.create(null),this.attributes=Object.create(null),this.attributeKeys=Object.create(null)}toString(){return"[semantics for "+this.grammar.name+"]"}checkActionDictsIfHaventAlready(){this.checkedActionDicts||(this.checkActionDicts(),this.checkedActionDicts=!0)}checkActionDicts(){let e;for(e in this.operations)this.operations[e].checkActionDict(this.grammar);for(e in this.attributes)this.attributes[e].checkActionDict(this.grammar)}toRecipe(e){function t(a){return a.super!==i.BuiltInSemantics._getSemantics()}let n=`(function(g) {
`;if(t(this)){n+="  var semantics = "+this.super.toRecipe(!0)+"(g";let a=this.super.grammar,u=this.grammar;for(;u!==a;)n+=".superGrammar",u=u.superGrammar;n+=`);
`,n+="  return g.extendSemantics(semantics)"}else n+="  return g.createSemantics()";return["Operation","Attribute"].forEach(a=>{let u=this[a.toLowerCase()+"s"];Object.keys(u).forEach(p=>{let{actionDict:h,formals:v,builtInDefault:d}=u[p],g=p;v.length>0&&(g+="("+v.join(", ")+")");let I;t(this)&&this.super[a.toLowerCase()+"s"][p]?I="extend"+a:I="add"+a,n+=`
    .`+I+"("+JSON.stringify(g)+", {";let y=[];Object.keys(h).forEach(x=>{if(h[x]!==d){let S=h[x].toString().trim();S=S.replace(/^.*\(/,"function("),y.push(`
      `+JSON.stringify(x)+": "+S)}}),n+=y.join(",")+`
    })`})}),n+=`;
  })`,e||(n=`(function() {
  var grammar = this.fromRecipe(`+this.grammar.toRecipe()+`);
  var semantics = `+n+`(grammar);
  return semantics;
});
`),n}addOperationOrAttribute(e,t,n){let a=e+"s",u=Ma(t,e),{name:p}=u,{formals:h}=u;this.assertNewName(p,e);let v=Yh(e,p,I),d={_default:v};Object.keys(n).forEach(y=>{d[y]=n[y]});let g=e==="operation"?new Ct(p,h,d,v):new gr(p,d,v);g.checkActionDict(this.grammar),this[a][p]=g;function I(...y){let x=this._semantics[a][p];if(arguments.length!==x.formals.length)throw new Error("Invalid number of arguments passed to "+p+" "+e+" (expected "+x.formals.length+", got "+arguments.length+")");let S=Object.create(null);for(let[re,Pe]of Object.entries(y)){let It=x.formals[re];S[It]=Pe}let V=this.args;this.args=S;let K=x.execute(this._semantics,this);return this.args=V,K}e==="operation"?(this.Wrapper.prototype[p]=I,this.Wrapper.prototype[p].toString=function(){return"["+p+" operation]"}):(Object.defineProperty(this.Wrapper.prototype,p,{get:I,configurable:!0}),Object.defineProperty(this.attributeKeys,p,{value:Ra(p)}))}extendOperationOrAttribute(e,t,n){let a=e+"s";if(Ma(t,"attribute"),!(this.super&&t in this.super[a]))throw new Error("Cannot extend "+e+" '"+t+"': did not inherit an "+e+" with that name");if(Ys(this[a],t))throw new Error("Cannot extend "+e+" '"+t+"' again");let u=this[a][t].formals,p=this[a][t].actionDict,h=Object.create(p);Object.keys(n).forEach(v=>{h[v]=n[v]}),this[a][t]=e==="operation"?new Ct(t,u,h):new gr(t,h),this[a][t].checkActionDict(this.grammar)}assertNewName(e,t){if(Ys(dn.prototype,e))throw new Error("Cannot add "+t+" '"+e+"': that's a reserved name");if(e in this.operations)throw new Error("Cannot add "+t+" '"+e+"': an operation with that name already exists");if(e in this.attributes)throw new Error("Cannot add "+t+" '"+e+"': an attribute with that name already exists")}wrap(e,t,n){let a=n||t;return e instanceof this.Wrapper?e:new this.Wrapper(e,t,a)}};function Ma(i,e){if(!Ae.prototypeGrammar)return wt(i.indexOf("(")===-1),{name:i,formals:[]};let t=Ae.prototypeGrammar.match(i,e==="operation"?"OperationSignature":"AttributeSignature");if(t.failed())throw new Error(t.message);return Ae.prototypeGrammarSemantics(t).parse()}function Yh(i,e,t){return function(...n){let u=(this._semantics.operations[e]||this._semantics.attributes[e]).formals.map(p=>this.args[p]);if(!this.isIteration()&&n.length===1)return t.apply(n[0],u);throw Rh(this.ctorName,e,i,fr)}}Ae.createSemantics=function(i,e){let t=new Ae(i,e!==void 0?e:Ae.BuiltInSemantics._getSemantics()),n=function(u){if(!(u instanceof pn))throw new TypeError("Semantics expected a MatchResult, but got "+Ws(u));if(u.failed())throw new TypeError("cannot apply Semantics to "+u.toString());let p=u._cst;if(p.grammar!==i)throw new Error("Cannot use a MatchResult from grammar '"+p.grammar.name+"' with a semantics for '"+i.name+"'");let h=new $t(u.input);return t.wrap(p,h.interval(u._cstOffset,u.input.length))};return n.addOperation=function(a,u){return t.addOperationOrAttribute("operation",a,u),n},n.extendOperation=function(a,u){return t.extendOperationOrAttribute("operation",a,u),n},n.addAttribute=function(a,u){return t.addOperationOrAttribute("attribute",a,u),n},n.extendAttribute=function(a,u){return t.extendOperationOrAttribute("attribute",a,u),n},n._getActionDict=function(a){let u=t.operations[a]||t.attributes[a];if(!u)throw new Error('"'+a+'" is not a valid operation or attribute name in this semantics for "'+i.name+'"');return u.actionDict},n._remove=function(a){let u;return a in t.operations?(u=t.operations[a],delete t.operations[a]):a in t.attributes&&(u=t.attributes[a],delete t.attributes[a]),delete t.Wrapper.prototype[a],u},n.getOperationNames=function(){return Object.keys(t.operations)},n.getAttributeNames=function(){return Object.keys(t.attributes)},n.getGrammar=function(){return t.grammar},n.toRecipe=function(a){return t.toRecipe(a)},n.toString=t.toString.bind(t),n._getSemantics=function(){return t},n};var Ct=class{constructor(e,t,n,a){this.name=e,this.formals=t,this.actionDict=n,this.builtInDefault=a}checkActionDict(e){e._checkTopDownActionDict(this.typeName,this.name,this.actionDict)}execute(e,t){try{let{ctorName:n}=t._node,a=this.actionDict[n];return a?(fr.push([this,n]),a.apply(t,t._children())):t.isNonterminal()&&(a=this.actionDict._nonterminal,a)?(fr.push([this,"_nonterminal",n]),a.apply(t,t._children())):(fr.push([this,"default action",n]),this.actionDict._default.apply(t,t._children()))}finally{fr.pop()}}};Ct.prototype.typeName="operation";var gr=class extends Ct{constructor(e,t,n){super(e,[],t,n)}execute(e,t){let n=t._node,a=e.attributeKeys[this.name];return Ys(n,a)||(n[a]=Ct.prototype.execute.call(this,e,t)),n[a]}};gr.prototype.typeName="attribute";var Pa=["_iter","_terminal","_nonterminal","_default"];function Aa(i){return Object.keys(i.rules).sort().map(e=>i.rules[e])}var Gh=i=>i.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029"),za,Ha,Oe=class i{constructor(e,t,n,a){if(this.name=e,this.superGrammar=t,this.rules=n,a){if(!(a in n))throw new Error("Invalid start rule: '"+a+"' is not a rule in grammar '"+e+"'");this.defaultStartRule=a}this._matchStateInitializer=void 0,this.supportsIncrementalParsing=!0}matcher(){return new Bs(this)}isBuiltIn(){return this===i.ProtoBuiltInRules||this===i.BuiltInRules}equals(e){if(this===e)return!0;if(e==null||this.name!==e.name||this.defaultStartRule!==e.defaultStartRule||!(this.superGrammar===e.superGrammar||this.superGrammar.equals(e.superGrammar)))return!1;let t=Aa(this),n=Aa(e);return t.length===n.length&&t.every((a,u)=>a.description===n[u].description&&a.formals.join(",")===n[u].formals.join(",")&&a.body.toString()===n[u].body.toString())}match(e,t){let n=this.matcher();return n.replaceInputRange(0,0,e),n.match(t)}trace(e,t){let n=this.matcher();return n.replaceInputRange(0,0,e),n.trace(t)}createSemantics(){return Ae.createSemantics(this)}extendSemantics(e){return Ae.createSemantics(this,e._getSemantics())}_checkTopDownActionDict(e,t,n){let a=[];for(let u in n){let p=n[u];if(!Pa.includes(u)&&!(u in this.rules)){a.push(`'${u}' is not a valid semantic action for '${this.name}'`);continue}if(typeof p!="function"){a.push(`'${u}' must be a function in an action dictionary for '${this.name}'`);continue}let v=p.length,d=this._topDownActionArity(u);if(v!==d){let g;u==="_iter"||u==="_nonterminal"?g=`it should use a rest parameter, e.g. \`${u}(...children) {}\`. NOTE: this is new in Ohm v16 \u2014 see https://ohmjs.org/d/ati for details.`:g=`expected ${d}, got ${v}`,a.push(`Semantic action '${u}' has the wrong arity: ${g}`)}}if(a.length>0){let u=a.map(h=>"- "+h),p=new Error([`Found errors in the action dictionary of the '${t}' ${e}:`,...u].join(`
`));throw p.problems=a,p}}_topDownActionArity(e){return Pa.includes(e)?0:this.rules[e].body.getArity()}_inheritsFrom(e){let t=this.superGrammar;for(;t;){if(t.equals(e,!0))return!0;t=t.superGrammar}return!1}toRecipe(e=void 0){let t={};this.source&&(t.source=this.source.contents);let n=null;this.defaultStartRule&&(n=this.defaultStartRule);let a={};Object.keys(this.rules).forEach(h=>{let v=this.rules[h],{body:d}=v,g=!this.superGrammar||!this.superGrammar.rules[h],I;g?I="define":I=d instanceof kt?"extend":"override";let y={};if(v.source&&this.source){let V=v.source.relativeTo(this.source);y.sourceInterval=[V.startIdx,V.endIdx]}let x=g?v.description:null,S=d.outputRecipe(v.formals,this.source);a[h]=[I,y,x,v.formals,S]});let u="null";e?u=e:this.superGrammar&&!this.superGrammar.isBuiltIn()&&(u=this.superGrammar.toRecipe());let p=[...["grammar",t,this.name].map(JSON.stringify),u,...[n,a].map(JSON.stringify)];return Gh(`[${p.join(",")}]`)}toOperationActionDictionaryTemplate(){return this._toOperationOrAttributeActionDictionaryTemplate()}toAttributeActionDictionaryTemplate(){return this._toOperationOrAttributeActionDictionaryTemplate()}_toOperationOrAttributeActionDictionaryTemplate(){let e=new Ft;e.append("{");let t=!0;for(let n in this.rules){let{body:a}=this.rules[n];t?t=!1:e.append(","),e.append(`
`),e.append("  "),this.addSemanticActionTemplate(n,a,e)}return e.append(`
}`),e.contents()}addSemanticActionTemplate(e,t,n){n.append(e),n.append(": function(");let a=this._topDownActionArity(e);n.append(gn("_",a).join(", ")),n.append(`) {
`),n.append("  }")}parseApplication(e){let t;if(e.indexOf("<")===-1)t=new W(e);else{let a=za.match(e,"Base_application");t=Ha(a,{})}if(!(t.ruleName in this.rules))throw Fa(t.ruleName,this.name);let{formals:n}=this.rules[t.ruleName];if(n.length!==t.args.length){let{source:a}=this.rules[t.ruleName];throw qa(t.ruleName,n.length,t.args.length,a)}return t}_setUpMatchState(e){this._matchStateInitializer&&this._matchStateInitializer(e)}};Oe.ProtoBuiltInRules=new Oe("ProtoBuiltInRules",void 0,{any:{body:he,formals:[],description:"any character",primitive:!0},end:{body:de,formals:[],description:"end of input",primitive:!0},caseInsensitive:{body:new hn(new ue(0)),formals:["str"],primitive:!0},lower:{body:new ie("Ll"),formals:[],description:"a lowercase letter",primitive:!0},upper:{body:new ie("Lu"),formals:[],description:"an uppercase letter",primitive:!0},unicodeLtmo:{body:new ie("Ltmo"),formals:[],description:"a Unicode character in Lt, Lm, or Lo",primitive:!0},spaces:{body:new tt(new W("space")),formals:[]},space:{body:new le("\0"," "),formals:[],description:"a space"}});Oe.initApplicationParser=function(i,e){za=i,Ha=e};var fn=class{constructor(e){this.name=e}sourceInterval(e,t){return this.source.subInterval(e,t-e)}ensureSuperGrammar(){return this.superGrammar||this.withSuperGrammar(this.name==="BuiltInRules"?Oe.ProtoBuiltInRules:Oe.BuiltInRules),this.superGrammar}ensureSuperGrammarRuleForOverriding(e,t){let n=this.ensureSuperGrammar().rules[e];if(!n)throw hh(e,this.superGrammar.name,t);return n}installOverriddenOrExtendedRule(e,t,n,a){let u=ks(t);if(u.length>0)throw wa(e,u,a);let p=this.ensureSuperGrammar().rules[e],h=p.formals,v=h?h.length:0;if(t.length!==v)throw qa(e,v,t.length,a);return this.install(e,t,n,p.description,a)}install(e,t,n,a,u,p=!1){return this.rules[e]={body:n.introduceParams(t),formals:t,description:a,source:u,primitive:p},this}withSuperGrammar(e){if(this.superGrammar)throw new Error("the super grammar of a GrammarDecl cannot be set more than once");return this.superGrammar=e,this.rules=Object.create(e.rules),e.isBuiltIn()||(this.defaultStartRule=e.defaultStartRule),this}withDefaultStartRule(e){return this.defaultStartRule=e,this}withSource(e){return this.source=new $t(e).interval(0,e.length),this}build(){let e=new Oe(this.name,this.ensureSuperGrammar(),this.rules,this.defaultStartRule);e._matchStateInitializer=e.superGrammar._matchStateInitializer,e.supportsIncrementalParsing=e.superGrammar.supportsIncrementalParsing;let t=[],n=!1;return Object.keys(e.rules).forEach(a=>{let{body:u}=e.rules[a];try{u.assertChoicesHaveUniformArity(a)}catch(p){t.push(p)}try{u.assertAllApplicationsAreValid(a,e)}catch(p){t.push(p),n=!0}}),n||Object.keys(e.rules).forEach(a=>{let{body:u}=e.rules[a];try{u.assertIteratedExprsAreNotNullable(e,[])}catch(p){t.push(p)}}),t.length>0&&Dh(t),this.source&&(e.source=this.source),e}define(e,t,n,a,u,p){if(this.ensureSuperGrammar(),this.superGrammar.rules[e])throw Sa(e,this.name,this.superGrammar.name,u);if(this.rules[e])throw Sa(e,this.name,this.name,u);let h=ks(t);if(h.length>0)throw wa(e,h,u);return this.install(e,t,n,a,u,p)}override(e,t,n,a,u){return this.ensureSuperGrammarRuleForOverriding(e,u),this.installOverriddenOrExtendedRule(e,t,n,u),this}extend(e,t,n,a,u){if(!this.ensureSuperGrammar().rules[e])throw dh(e,this.superGrammar.name,u);let h=new kt(this.superGrammar,e,n);return h.source=n.source,this.installOverriddenOrExtendedRule(e,t,h,u),this}},Zt=class{constructor(){this.currentDecl=null,this.currentRuleName=null}newGrammar(e){return new fn(e)}grammar(e,t,n,a,u){let p=new fn(t);return n&&p.withSuperGrammar(n instanceof Oe?n:this.fromRecipe(n)),a&&p.withDefaultStartRule(a),e&&e.source&&p.withSource(e.source),this.currentDecl=p,Object.keys(u).forEach(h=>{this.currentRuleName=h;let v=u[h],d=v[0],g=v[1],I=v[2],y=v[3],x=this.fromRecipe(v[4]),S;p.source&&g&&g.sourceInterval&&(S=p.source.subInterval(g.sourceInterval[0],g.sourceInterval[1]-g.sourceInterval[0])),p[d](h,y,x,I,S)}),this.currentRuleName=this.currentDecl=null,p.build()}terminal(e){return new ae(e)}range(e,t){return new le(e,t)}param(e){return new ue(e)}alt(...e){let t=[];for(let n of e)n instanceof N||(n=this.fromRecipe(n)),n instanceof ee?t=t.concat(n.terms):t.push(n);return t.length===1?t[0]:new ee(t)}seq(...e){let t=[];for(let n of e)n instanceof N||(n=this.fromRecipe(n)),n instanceof se?t=t.concat(n.factors):t.push(n);return t.length===1?t[0]:new se(t)}star(e){return e instanceof N||(e=this.fromRecipe(e)),new tt(e)}plus(e){return e instanceof N||(e=this.fromRecipe(e)),new vt(e)}opt(e){return e instanceof N||(e=this.fromRecipe(e)),new Fe(e)}not(e){return e instanceof N||(e=this.fromRecipe(e)),new pe(e)}lookahead(e){return e instanceof N||(e=this.fromRecipe(e)),new me(e)}lex(e){return e instanceof N||(e=this.fromRecipe(e)),new ve(e)}app(e,t){return t&&t.length>0&&(t=t.map(function(n){return n instanceof N?n:this.fromRecipe(n)},this)),new W(e,t)}splice(e,t){return new Lt(this.currentDecl.superGrammar,this.currentRuleName,e.map(n=>this.fromRecipe(n)),t.map(n=>this.fromRecipe(n)))}fromRecipe(e){let t=e[0]==="grammar"?e.slice(1):e.slice(2),n=this[e[0]](...t),a=e[1];return a&&a.sourceInterval&&this.currentDecl&&n.withSource(this.currentDecl.sourceInterval(...a.sourceInterval)),n}};function yn(i){return typeof i=="function"?i.call(new Zt):(typeof i=="string"&&(i=JSON.parse(i)),new Zt().fromRecipe(i))}var $s=yn(["grammar",{source:`BuiltInRules {

  alnum  (an alpha-numeric character)
    = letter
    | digit

  letter  (a letter)
    = lower
    | upper
    | unicodeLtmo

  digit  (a digit)
    = "0".."9"

  hexDigit  (a hexadecimal digit)
    = digit
    | "a".."f"
    | "A".."F"

  ListOf<elem, sep>
    = NonemptyListOf<elem, sep>
    | EmptyListOf<elem, sep>

  NonemptyListOf<elem, sep>
    = elem (sep elem)*

  EmptyListOf<elem, sep>
    = /* nothing */

  listOf<elem, sep>
    = nonemptyListOf<elem, sep>
    | emptyListOf<elem, sep>

  nonemptyListOf<elem, sep>
    = elem (sep elem)*

  emptyListOf<elem, sep>
    = /* nothing */

  // Allows a syntactic rule application within a lexical context.
  applySyntactic<app> = app
}`},"BuiltInRules",null,null,{alnum:["define",{sourceInterval:[18,78]},"an alpha-numeric character",[],["alt",{sourceInterval:[60,78]},["app",{sourceInterval:[60,66]},"letter",[]],["app",{sourceInterval:[73,78]},"digit",[]]]],letter:["define",{sourceInterval:[82,142]},"a letter",[],["alt",{sourceInterval:[107,142]},["app",{sourceInterval:[107,112]},"lower",[]],["app",{sourceInterval:[119,124]},"upper",[]],["app",{sourceInterval:[131,142]},"unicodeLtmo",[]]]],digit:["define",{sourceInterval:[146,177]},"a digit",[],["range",{sourceInterval:[169,177]},"0","9"]],hexDigit:["define",{sourceInterval:[181,254]},"a hexadecimal digit",[],["alt",{sourceInterval:[219,254]},["app",{sourceInterval:[219,224]},"digit",[]],["range",{sourceInterval:[231,239]},"a","f"],["range",{sourceInterval:[246,254]},"A","F"]]],ListOf:["define",{sourceInterval:[258,336]},null,["elem","sep"],["alt",{sourceInterval:[282,336]},["app",{sourceInterval:[282,307]},"NonemptyListOf",[["param",{sourceInterval:[297,301]},0],["param",{sourceInterval:[303,306]},1]]],["app",{sourceInterval:[314,336]},"EmptyListOf",[["param",{sourceInterval:[326,330]},0],["param",{sourceInterval:[332,335]},1]]]]],NonemptyListOf:["define",{sourceInterval:[340,388]},null,["elem","sep"],["seq",{sourceInterval:[372,388]},["param",{sourceInterval:[372,376]},0],["star",{sourceInterval:[377,388]},["seq",{sourceInterval:[378,386]},["param",{sourceInterval:[378,381]},1],["param",{sourceInterval:[382,386]},0]]]]],EmptyListOf:["define",{sourceInterval:[392,434]},null,["elem","sep"],["seq",{sourceInterval:[438,438]}]],listOf:["define",{sourceInterval:[438,516]},null,["elem","sep"],["alt",{sourceInterval:[462,516]},["app",{sourceInterval:[462,487]},"nonemptyListOf",[["param",{sourceInterval:[477,481]},0],["param",{sourceInterval:[483,486]},1]]],["app",{sourceInterval:[494,516]},"emptyListOf",[["param",{sourceInterval:[506,510]},0],["param",{sourceInterval:[512,515]},1]]]]],nonemptyListOf:["define",{sourceInterval:[520,568]},null,["elem","sep"],["seq",{sourceInterval:[552,568]},["param",{sourceInterval:[552,556]},0],["star",{sourceInterval:[557,568]},["seq",{sourceInterval:[558,566]},["param",{sourceInterval:[558,561]},1],["param",{sourceInterval:[562,566]},0]]]]],emptyListOf:["define",{sourceInterval:[572,682]},null,["elem","sep"],["seq",{sourceInterval:[685,685]}]],applySyntactic:["define",{sourceInterval:[685,710]},null,["app"],["param",{sourceInterval:[707,710]},0]]}]);Oe.BuiltInRules=$s;Ah(Oe.BuiltInRules);var _n=yn(["grammar",{source:`Ohm {

  Grammars
    = Grammar*

  Grammar
    = ident SuperGrammar? "{" Rule* "}"

  SuperGrammar
    = "<:" ident

  Rule
    = ident Formals? ruleDescr? "="  RuleBody  -- define
    | ident Formals?            ":=" OverrideRuleBody  -- override
    | ident Formals?            "+=" RuleBody  -- extend

  RuleBody
    = "|"? NonemptyListOf<TopLevelTerm, "|">

  TopLevelTerm
    = Seq caseName  -- inline
    | Seq

  OverrideRuleBody
    = "|"? NonemptyListOf<OverrideTopLevelTerm, "|">

  OverrideTopLevelTerm
    = "..."  -- superSplice
    | TopLevelTerm

  Formals
    = "<" ListOf<ident, ","> ">"

  Params
    = "<" ListOf<Seq, ","> ">"

  Alt
    = NonemptyListOf<Seq, "|">

  Seq
    = Iter*

  Iter
    = Pred "*"  -- star
    | Pred "+"  -- plus
    | Pred "?"  -- opt
    | Pred

  Pred
    = "~" Lex  -- not
    | "&" Lex  -- lookahead
    | Lex

  Lex
    = "#" Base  -- lex
    | Base

  Base
    = ident Params? ~(ruleDescr? "=" | ":=" | "+=")  -- application
    | oneCharTerminal ".." oneCharTerminal           -- range
    | terminal                                       -- terminal
    | "(" Alt ")"                                    -- paren

  ruleDescr  (a rule description)
    = "(" ruleDescrText ")"

  ruleDescrText
    = (~")" any)*

  caseName
    = "--" (~"\\n" space)* name (~"\\n" space)* ("\\n" | &"}")

  name  (a name)
    = nameFirst nameRest*

  nameFirst
    = "_"
    | letter

  nameRest
    = "_"
    | alnum

  ident  (an identifier)
    = name

  terminal
    = "\\"" terminalChar* "\\""

  oneCharTerminal
    = "\\"" terminalChar "\\""

  terminalChar
    = escapeChar
      | ~"\\\\" ~"\\"" ~"\\n" "\\u{0}".."\\u{10FFFF}"

  escapeChar  (an escape sequence)
    = "\\\\\\\\"                                     -- backslash
    | "\\\\\\""                                     -- doubleQuote
    | "\\\\\\'"                                     -- singleQuote
    | "\\\\b"                                      -- backspace
    | "\\\\n"                                      -- lineFeed
    | "\\\\r"                                      -- carriageReturn
    | "\\\\t"                                      -- tab
    | "\\\\u{" hexDigit hexDigit? hexDigit?
             hexDigit? hexDigit? hexDigit? "}"   -- unicodeCodePoint
    | "\\\\u" hexDigit hexDigit hexDigit hexDigit  -- unicodeEscape
    | "\\\\x" hexDigit hexDigit                    -- hexEscape

  space
   += comment

  comment
    = "//" (~"\\n" any)* &("\\n" | end)  -- singleLine
    | "/*" (~"*/" any)* "*/"  -- multiLine

  tokens = token*

  token = caseName | comment | ident | operator | punctuation | terminal | any

  operator = "<:" | "=" | ":=" | "+=" | "*" | "+" | "?" | "~" | "&"

  punctuation = "<" | ">" | "," | "--"
}`},"Ohm",null,"Grammars",{Grammars:["define",{sourceInterval:[9,32]},null,[],["star",{sourceInterval:[24,32]},["app",{sourceInterval:[24,31]},"Grammar",[]]]],Grammar:["define",{sourceInterval:[36,83]},null,[],["seq",{sourceInterval:[50,83]},["app",{sourceInterval:[50,55]},"ident",[]],["opt",{sourceInterval:[56,69]},["app",{sourceInterval:[56,68]},"SuperGrammar",[]]],["terminal",{sourceInterval:[70,73]},"{"],["star",{sourceInterval:[74,79]},["app",{sourceInterval:[74,78]},"Rule",[]]],["terminal",{sourceInterval:[80,83]},"}"]]],SuperGrammar:["define",{sourceInterval:[87,116]},null,[],["seq",{sourceInterval:[106,116]},["terminal",{sourceInterval:[106,110]},"<:"],["app",{sourceInterval:[111,116]},"ident",[]]]],Rule_define:["define",{sourceInterval:[131,181]},null,[],["seq",{sourceInterval:[131,170]},["app",{sourceInterval:[131,136]},"ident",[]],["opt",{sourceInterval:[137,145]},["app",{sourceInterval:[137,144]},"Formals",[]]],["opt",{sourceInterval:[146,156]},["app",{sourceInterval:[146,155]},"ruleDescr",[]]],["terminal",{sourceInterval:[157,160]},"="],["app",{sourceInterval:[162,170]},"RuleBody",[]]]],Rule_override:["define",{sourceInterval:[188,248]},null,[],["seq",{sourceInterval:[188,235]},["app",{sourceInterval:[188,193]},"ident",[]],["opt",{sourceInterval:[194,202]},["app",{sourceInterval:[194,201]},"Formals",[]]],["terminal",{sourceInterval:[214,218]},":="],["app",{sourceInterval:[219,235]},"OverrideRuleBody",[]]]],Rule_extend:["define",{sourceInterval:[255,305]},null,[],["seq",{sourceInterval:[255,294]},["app",{sourceInterval:[255,260]},"ident",[]],["opt",{sourceInterval:[261,269]},["app",{sourceInterval:[261,268]},"Formals",[]]],["terminal",{sourceInterval:[281,285]},"+="],["app",{sourceInterval:[286,294]},"RuleBody",[]]]],Rule:["define",{sourceInterval:[120,305]},null,[],["alt",{sourceInterval:[131,305]},["app",{sourceInterval:[131,170]},"Rule_define",[]],["app",{sourceInterval:[188,235]},"Rule_override",[]],["app",{sourceInterval:[255,294]},"Rule_extend",[]]]],RuleBody:["define",{sourceInterval:[309,362]},null,[],["seq",{sourceInterval:[324,362]},["opt",{sourceInterval:[324,328]},["terminal",{sourceInterval:[324,327]},"|"]],["app",{sourceInterval:[329,362]},"NonemptyListOf",[["app",{sourceInterval:[344,356]},"TopLevelTerm",[]],["terminal",{sourceInterval:[358,361]},"|"]]]]],TopLevelTerm_inline:["define",{sourceInterval:[385,408]},null,[],["seq",{sourceInterval:[385,397]},["app",{sourceInterval:[385,388]},"Seq",[]],["app",{sourceInterval:[389,397]},"caseName",[]]]],TopLevelTerm:["define",{sourceInterval:[366,418]},null,[],["alt",{sourceInterval:[385,418]},["app",{sourceInterval:[385,397]},"TopLevelTerm_inline",[]],["app",{sourceInterval:[415,418]},"Seq",[]]]],OverrideRuleBody:["define",{sourceInterval:[422,491]},null,[],["seq",{sourceInterval:[445,491]},["opt",{sourceInterval:[445,449]},["terminal",{sourceInterval:[445,448]},"|"]],["app",{sourceInterval:[450,491]},"NonemptyListOf",[["app",{sourceInterval:[465,485]},"OverrideTopLevelTerm",[]],["terminal",{sourceInterval:[487,490]},"|"]]]]],OverrideTopLevelTerm_superSplice:["define",{sourceInterval:[522,543]},null,[],["terminal",{sourceInterval:[522,527]},"..."]],OverrideTopLevelTerm:["define",{sourceInterval:[495,562]},null,[],["alt",{sourceInterval:[522,562]},["app",{sourceInterval:[522,527]},"OverrideTopLevelTerm_superSplice",[]],["app",{sourceInterval:[550,562]},"TopLevelTerm",[]]]],Formals:["define",{sourceInterval:[566,606]},null,[],["seq",{sourceInterval:[580,606]},["terminal",{sourceInterval:[580,583]},"<"],["app",{sourceInterval:[584,602]},"ListOf",[["app",{sourceInterval:[591,596]},"ident",[]],["terminal",{sourceInterval:[598,601]},","]]],["terminal",{sourceInterval:[603,606]},">"]]],Params:["define",{sourceInterval:[610,647]},null,[],["seq",{sourceInterval:[623,647]},["terminal",{sourceInterval:[623,626]},"<"],["app",{sourceInterval:[627,643]},"ListOf",[["app",{sourceInterval:[634,637]},"Seq",[]],["terminal",{sourceInterval:[639,642]},","]]],["terminal",{sourceInterval:[644,647]},">"]]],Alt:["define",{sourceInterval:[651,685]},null,[],["app",{sourceInterval:[661,685]},"NonemptyListOf",[["app",{sourceInterval:[676,679]},"Seq",[]],["terminal",{sourceInterval:[681,684]},"|"]]]],Seq:["define",{sourceInterval:[689,704]},null,[],["star",{sourceInterval:[699,704]},["app",{sourceInterval:[699,703]},"Iter",[]]]],Iter_star:["define",{sourceInterval:[719,736]},null,[],["seq",{sourceInterval:[719,727]},["app",{sourceInterval:[719,723]},"Pred",[]],["terminal",{sourceInterval:[724,727]},"*"]]],Iter_plus:["define",{sourceInterval:[743,760]},null,[],["seq",{sourceInterval:[743,751]},["app",{sourceInterval:[743,747]},"Pred",[]],["terminal",{sourceInterval:[748,751]},"+"]]],Iter_opt:["define",{sourceInterval:[767,783]},null,[],["seq",{sourceInterval:[767,775]},["app",{sourceInterval:[767,771]},"Pred",[]],["terminal",{sourceInterval:[772,775]},"?"]]],Iter:["define",{sourceInterval:[708,794]},null,[],["alt",{sourceInterval:[719,794]},["app",{sourceInterval:[719,727]},"Iter_star",[]],["app",{sourceInterval:[743,751]},"Iter_plus",[]],["app",{sourceInterval:[767,775]},"Iter_opt",[]],["app",{sourceInterval:[790,794]},"Pred",[]]]],Pred_not:["define",{sourceInterval:[809,824]},null,[],["seq",{sourceInterval:[809,816]},["terminal",{sourceInterval:[809,812]},"~"],["app",{sourceInterval:[813,816]},"Lex",[]]]],Pred_lookahead:["define",{sourceInterval:[831,852]},null,[],["seq",{sourceInterval:[831,838]},["terminal",{sourceInterval:[831,834]},"&"],["app",{sourceInterval:[835,838]},"Lex",[]]]],Pred:["define",{sourceInterval:[798,862]},null,[],["alt",{sourceInterval:[809,862]},["app",{sourceInterval:[809,816]},"Pred_not",[]],["app",{sourceInterval:[831,838]},"Pred_lookahead",[]],["app",{sourceInterval:[859,862]},"Lex",[]]]],Lex_lex:["define",{sourceInterval:[876,892]},null,[],["seq",{sourceInterval:[876,884]},["terminal",{sourceInterval:[876,879]},"#"],["app",{sourceInterval:[880,884]},"Base",[]]]],Lex:["define",{sourceInterval:[866,903]},null,[],["alt",{sourceInterval:[876,903]},["app",{sourceInterval:[876,884]},"Lex_lex",[]],["app",{sourceInterval:[899,903]},"Base",[]]]],Base_application:["define",{sourceInterval:[918,979]},null,[],["seq",{sourceInterval:[918,963]},["app",{sourceInterval:[918,923]},"ident",[]],["opt",{sourceInterval:[924,931]},["app",{sourceInterval:[924,930]},"Params",[]]],["not",{sourceInterval:[932,963]},["alt",{sourceInterval:[934,962]},["seq",{sourceInterval:[934,948]},["opt",{sourceInterval:[934,944]},["app",{sourceInterval:[934,943]},"ruleDescr",[]]],["terminal",{sourceInterval:[945,948]},"="]],["terminal",{sourceInterval:[951,955]},":="],["terminal",{sourceInterval:[958,962]},"+="]]]]],Base_range:["define",{sourceInterval:[986,1041]},null,[],["seq",{sourceInterval:[986,1022]},["app",{sourceInterval:[986,1001]},"oneCharTerminal",[]],["terminal",{sourceInterval:[1002,1006]},".."],["app",{sourceInterval:[1007,1022]},"oneCharTerminal",[]]]],Base_terminal:["define",{sourceInterval:[1048,1106]},null,[],["app",{sourceInterval:[1048,1056]},"terminal",[]]],Base_paren:["define",{sourceInterval:[1113,1168]},null,[],["seq",{sourceInterval:[1113,1124]},["terminal",{sourceInterval:[1113,1116]},"("],["app",{sourceInterval:[1117,1120]},"Alt",[]],["terminal",{sourceInterval:[1121,1124]},")"]]],Base:["define",{sourceInterval:[907,1168]},null,[],["alt",{sourceInterval:[918,1168]},["app",{sourceInterval:[918,963]},"Base_application",[]],["app",{sourceInterval:[986,1022]},"Base_range",[]],["app",{sourceInterval:[1048,1056]},"Base_terminal",[]],["app",{sourceInterval:[1113,1124]},"Base_paren",[]]]],ruleDescr:["define",{sourceInterval:[1172,1231]},"a rule description",[],["seq",{sourceInterval:[1210,1231]},["terminal",{sourceInterval:[1210,1213]},"("],["app",{sourceInterval:[1214,1227]},"ruleDescrText",[]],["terminal",{sourceInterval:[1228,1231]},")"]]],ruleDescrText:["define",{sourceInterval:[1235,1266]},null,[],["star",{sourceInterval:[1255,1266]},["seq",{sourceInterval:[1256,1264]},["not",{sourceInterval:[1256,1260]},["terminal",{sourceInterval:[1257,1260]},")"]],["app",{sourceInterval:[1261,1264]},"any",[]]]]],caseName:["define",{sourceInterval:[1270,1338]},null,[],["seq",{sourceInterval:[1285,1338]},["terminal",{sourceInterval:[1285,1289]},"--"],["star",{sourceInterval:[1290,1304]},["seq",{sourceInterval:[1291,1302]},["not",{sourceInterval:[1291,1296]},["terminal",{sourceInterval:[1292,1296]},`
`]],["app",{sourceInterval:[1297,1302]},"space",[]]]],["app",{sourceInterval:[1305,1309]},"name",[]],["star",{sourceInterval:[1310,1324]},["seq",{sourceInterval:[1311,1322]},["not",{sourceInterval:[1311,1316]},["terminal",{sourceInterval:[1312,1316]},`
`]],["app",{sourceInterval:[1317,1322]},"space",[]]]],["alt",{sourceInterval:[1326,1337]},["terminal",{sourceInterval:[1326,1330]},`
`],["lookahead",{sourceInterval:[1333,1337]},["terminal",{sourceInterval:[1334,1337]},"}"]]]]],name:["define",{sourceInterval:[1342,1382]},"a name",[],["seq",{sourceInterval:[1363,1382]},["app",{sourceInterval:[1363,1372]},"nameFirst",[]],["star",{sourceInterval:[1373,1382]},["app",{sourceInterval:[1373,1381]},"nameRest",[]]]]],nameFirst:["define",{sourceInterval:[1386,1418]},null,[],["alt",{sourceInterval:[1402,1418]},["terminal",{sourceInterval:[1402,1405]},"_"],["app",{sourceInterval:[1412,1418]},"letter",[]]]],nameRest:["define",{sourceInterval:[1422,1452]},null,[],["alt",{sourceInterval:[1437,1452]},["terminal",{sourceInterval:[1437,1440]},"_"],["app",{sourceInterval:[1447,1452]},"alnum",[]]]],ident:["define",{sourceInterval:[1456,1489]},"an identifier",[],["app",{sourceInterval:[1485,1489]},"name",[]]],terminal:["define",{sourceInterval:[1493,1531]},null,[],["seq",{sourceInterval:[1508,1531]},["terminal",{sourceInterval:[1508,1512]},'"'],["star",{sourceInterval:[1513,1526]},["app",{sourceInterval:[1513,1525]},"terminalChar",[]]],["terminal",{sourceInterval:[1527,1531]},'"']]],oneCharTerminal:["define",{sourceInterval:[1535,1579]},null,[],["seq",{sourceInterval:[1557,1579]},["terminal",{sourceInterval:[1557,1561]},'"'],["app",{sourceInterval:[1562,1574]},"terminalChar",[]],["terminal",{sourceInterval:[1575,1579]},'"']]],terminalChar:["define",{sourceInterval:[1583,1660]},null,[],["alt",{sourceInterval:[1602,1660]},["app",{sourceInterval:[1602,1612]},"escapeChar",[]],["seq",{sourceInterval:[1621,1660]},["not",{sourceInterval:[1621,1626]},["terminal",{sourceInterval:[1622,1626]},"\\"]],["not",{sourceInterval:[1627,1632]},["terminal",{sourceInterval:[1628,1632]},'"']],["not",{sourceInterval:[1633,1638]},["terminal",{sourceInterval:[1634,1638]},`
`]],["range",{sourceInterval:[1639,1660]},"\0","\u{10FFFF}"]]]],escapeChar_backslash:["define",{sourceInterval:[1703,1758]},null,[],["terminal",{sourceInterval:[1703,1709]},"\\\\"]],escapeChar_doubleQuote:["define",{sourceInterval:[1765,1822]},null,[],["terminal",{sourceInterval:[1765,1771]},'\\"']],escapeChar_singleQuote:["define",{sourceInterval:[1829,1886]},null,[],["terminal",{sourceInterval:[1829,1835]},"\\'"]],escapeChar_backspace:["define",{sourceInterval:[1893,1948]},null,[],["terminal",{sourceInterval:[1893,1898]},"\\b"]],escapeChar_lineFeed:["define",{sourceInterval:[1955,2009]},null,[],["terminal",{sourceInterval:[1955,1960]},"\\n"]],escapeChar_carriageReturn:["define",{sourceInterval:[2016,2076]},null,[],["terminal",{sourceInterval:[2016,2021]},"\\r"]],escapeChar_tab:["define",{sourceInterval:[2083,2132]},null,[],["terminal",{sourceInterval:[2083,2088]},"\\t"]],escapeChar_unicodeCodePoint:["define",{sourceInterval:[2139,2243]},null,[],["seq",{sourceInterval:[2139,2221]},["terminal",{sourceInterval:[2139,2145]},"\\u{"],["app",{sourceInterval:[2146,2154]},"hexDigit",[]],["opt",{sourceInterval:[2155,2164]},["app",{sourceInterval:[2155,2163]},"hexDigit",[]]],["opt",{sourceInterval:[2165,2174]},["app",{sourceInterval:[2165,2173]},"hexDigit",[]]],["opt",{sourceInterval:[2188,2197]},["app",{sourceInterval:[2188,2196]},"hexDigit",[]]],["opt",{sourceInterval:[2198,2207]},["app",{sourceInterval:[2198,2206]},"hexDigit",[]]],["opt",{sourceInterval:[2208,2217]},["app",{sourceInterval:[2208,2216]},"hexDigit",[]]],["terminal",{sourceInterval:[2218,2221]},"}"]]],escapeChar_unicodeEscape:["define",{sourceInterval:[2250,2309]},null,[],["seq",{sourceInterval:[2250,2291]},["terminal",{sourceInterval:[2250,2255]},"\\u"],["app",{sourceInterval:[2256,2264]},"hexDigit",[]],["app",{sourceInterval:[2265,2273]},"hexDigit",[]],["app",{sourceInterval:[2274,2282]},"hexDigit",[]],["app",{sourceInterval:[2283,2291]},"hexDigit",[]]]],escapeChar_hexEscape:["define",{sourceInterval:[2316,2371]},null,[],["seq",{sourceInterval:[2316,2339]},["terminal",{sourceInterval:[2316,2321]},"\\x"],["app",{sourceInterval:[2322,2330]},"hexDigit",[]],["app",{sourceInterval:[2331,2339]},"hexDigit",[]]]],escapeChar:["define",{sourceInterval:[1664,2371]},"an escape sequence",[],["alt",{sourceInterval:[1703,2371]},["app",{sourceInterval:[1703,1709]},"escapeChar_backslash",[]],["app",{sourceInterval:[1765,1771]},"escapeChar_doubleQuote",[]],["app",{sourceInterval:[1829,1835]},"escapeChar_singleQuote",[]],["app",{sourceInterval:[1893,1898]},"escapeChar_backspace",[]],["app",{sourceInterval:[1955,1960]},"escapeChar_lineFeed",[]],["app",{sourceInterval:[2016,2021]},"escapeChar_carriageReturn",[]],["app",{sourceInterval:[2083,2088]},"escapeChar_tab",[]],["app",{sourceInterval:[2139,2221]},"escapeChar_unicodeCodePoint",[]],["app",{sourceInterval:[2250,2291]},"escapeChar_unicodeEscape",[]],["app",{sourceInterval:[2316,2339]},"escapeChar_hexEscape",[]]]],space:["extend",{sourceInterval:[2375,2394]},null,[],["app",{sourceInterval:[2387,2394]},"comment",[]]],comment_singleLine:["define",{sourceInterval:[2412,2458]},null,[],["seq",{sourceInterval:[2412,2443]},["terminal",{sourceInterval:[2412,2416]},"//"],["star",{sourceInterval:[2417,2429]},["seq",{sourceInterval:[2418,2427]},["not",{sourceInterval:[2418,2423]},["terminal",{sourceInterval:[2419,2423]},`
`]],["app",{sourceInterval:[2424,2427]},"any",[]]]],["lookahead",{sourceInterval:[2430,2443]},["alt",{sourceInterval:[2432,2442]},["terminal",{sourceInterval:[2432,2436]},`
`],["app",{sourceInterval:[2439,2442]},"end",[]]]]]],comment_multiLine:["define",{sourceInterval:[2465,2501]},null,[],["seq",{sourceInterval:[2465,2487]},["terminal",{sourceInterval:[2465,2469]},"/*"],["star",{sourceInterval:[2470,2482]},["seq",{sourceInterval:[2471,2480]},["not",{sourceInterval:[2471,2476]},["terminal",{sourceInterval:[2472,2476]},"*/"]],["app",{sourceInterval:[2477,2480]},"any",[]]]],["terminal",{sourceInterval:[2483,2487]},"*/"]]],comment:["define",{sourceInterval:[2398,2501]},null,[],["alt",{sourceInterval:[2412,2501]},["app",{sourceInterval:[2412,2443]},"comment_singleLine",[]],["app",{sourceInterval:[2465,2487]},"comment_multiLine",[]]]],tokens:["define",{sourceInterval:[2505,2520]},null,[],["star",{sourceInterval:[2514,2520]},["app",{sourceInterval:[2514,2519]},"token",[]]]],token:["define",{sourceInterval:[2524,2600]},null,[],["alt",{sourceInterval:[2532,2600]},["app",{sourceInterval:[2532,2540]},"caseName",[]],["app",{sourceInterval:[2543,2550]},"comment",[]],["app",{sourceInterval:[2553,2558]},"ident",[]],["app",{sourceInterval:[2561,2569]},"operator",[]],["app",{sourceInterval:[2572,2583]},"punctuation",[]],["app",{sourceInterval:[2586,2594]},"terminal",[]],["app",{sourceInterval:[2597,2600]},"any",[]]]],operator:["define",{sourceInterval:[2604,2669]},null,[],["alt",{sourceInterval:[2615,2669]},["terminal",{sourceInterval:[2615,2619]},"<:"],["terminal",{sourceInterval:[2622,2625]},"="],["terminal",{sourceInterval:[2628,2632]},":="],["terminal",{sourceInterval:[2635,2639]},"+="],["terminal",{sourceInterval:[2642,2645]},"*"],["terminal",{sourceInterval:[2648,2651]},"+"],["terminal",{sourceInterval:[2654,2657]},"?"],["terminal",{sourceInterval:[2660,2663]},"~"],["terminal",{sourceInterval:[2666,2669]},"&"]]],punctuation:["define",{sourceInterval:[2673,2709]},null,[],["alt",{sourceInterval:[2687,2709]},["terminal",{sourceInterval:[2687,2690]},"<"],["terminal",{sourceInterval:[2693,2696]},">"],["terminal",{sourceInterval:[2699,2702]},","],["terminal",{sourceInterval:[2705,2709]},"--"]]]}]),Ns=Object.create(N.prototype);function Oa(i,e){for(let t in i)if(t===e)return!0;return!1}function Ks(i,e,t){let n=new Zt,a,u,p,h=!1;return(t||_n).createSemantics().addOperation("visit",{Grammars(g){return g.children.map(I=>I.visit())},Grammar(g,I,y,x,S){let V=g.visit();a=n.newGrammar(V),I.child(0)&&I.child(0).visit(),x.children.map(re=>re.visit());let K=a.build();if(K.source=this.source.trimmed(),Oa(e,V))throw mh(K);return e[V]=K,K},SuperGrammar(g,I){let y=I.visit();if(y==="null")a.withSuperGrammar(null);else{if(!e||!Oa(e,y))throw ph(y,e,I.source);a.withSuperGrammar(e[y])}},Rule_define(g,I,y,x,S){u=g.visit(),p=I.children.map(Pe=>Pe.visit())[0]||[],!a.defaultStartRule&&a.ensureSuperGrammar()!==Oe.ProtoBuiltInRules&&a.withDefaultStartRule(u);let V=S.visit(),K=y.children.map(Pe=>Pe.visit())[0],re=this.source.trimmed();return a.define(u,p,V,K,re)},Rule_override(g,I,y,x){u=g.visit(),p=I.children.map(K=>K.visit())[0]||[];let S=this.source.trimmed();a.ensureSuperGrammarRuleForOverriding(u,S),h=!0;let V=x.visit();return h=!1,a.override(u,p,V,null,S)},Rule_extend(g,I,y,x){u=g.visit(),p=I.children.map(K=>K.visit())[0]||[];let S=x.visit(),V=this.source.trimmed();return a.extend(u,p,S,null,V)},RuleBody(g,I){return n.alt(...I.visit()).withSource(this.source)},OverrideRuleBody(g,I){let y=I.visit(),x=y.indexOf(Ns);if(x>=0){let S=y.slice(0,x),V=y.slice(x+1);return V.forEach(K=>{if(K===Ns)throw wh(K)}),new Lt(a.superGrammar,u,S,V).withSource(this.source)}else return n.alt(...y).withSource(this.source)},Formals(g,I,y){return I.visit()},Params(g,I,y){return I.visit()},Alt(g){return n.alt(...g.visit()).withSource(this.source)},TopLevelTerm_inline(g,I){let y=u+"_"+I.visit(),x=g.visit(),S=this.source.trimmed(),V=!(a.superGrammar&&a.superGrammar.rules[y]);h&&!V?a.override(y,p,x,null,S):a.define(y,p,x,null,S);let K=p.map(re=>n.app(re));return n.app(y,K).withSource(x.source)},OverrideTopLevelTerm_superSplice(g){return Ns},Seq(g){return n.seq(...g.children.map(I=>I.visit())).withSource(this.source)},Iter_star(g,I){return n.star(g.visit()).withSource(this.source)},Iter_plus(g,I){return n.plus(g.visit()).withSource(this.source)},Iter_opt(g,I){return n.opt(g.visit()).withSource(this.source)},Pred_not(g,I){return n.not(I.visit()).withSource(this.source)},Pred_lookahead(g,I){return n.lookahead(I.visit()).withSource(this.source)},Lex_lex(g,I){return n.lex(I.visit()).withSource(this.source)},Base_application(g,I){let y=I.children.map(x=>x.visit())[0]||[];return n.app(g.visit(),y).withSource(this.source)},Base_range(g,I,y){return n.range(g.visit(),y.visit()).withSource(this.source)},Base_terminal(g){return n.terminal(g.visit()).withSource(this.source)},Base_paren(g,I,y){return I.visit()},ruleDescr(g,I,y){return I.visit()},ruleDescrText(g){return this.sourceString.trim()},caseName(g,I,y,x,S){return y.visit()},name(g,I){return this.sourceString},nameFirst(g){},nameRest(g){},terminal(g,I,y){return I.children.map(x=>x.visit()).join("")},oneCharTerminal(g,I,y){return I.visit()},escapeChar(g){try{return Ca(this.sourceString)}catch(I){throw I instanceof RangeError&&I.message.startsWith("Invalid code point ")?bh(g):I}},NonemptyListOf(g,I,y){return[g.visit()].concat(y.children.map(x=>x.visit()))},EmptyListOf(){return[]},_terminal(){return this.sourceString}})(i).visit()}var Wh=yn(["grammar",{source:`OperationsAndAttributes {

  AttributeSignature =
    name

  OperationSignature =
    name Formals?

  Formals
    = "(" ListOf<name, ","> ")"

  name  (a name)
    = nameFirst nameRest*

  nameFirst
    = "_"
    | letter

  nameRest
    = "_"
    | alnum

}`},"OperationsAndAttributes",null,"AttributeSignature",{AttributeSignature:["define",{sourceInterval:[29,58]},null,[],["app",{sourceInterval:[54,58]},"name",[]]],OperationSignature:["define",{sourceInterval:[62,100]},null,[],["seq",{sourceInterval:[87,100]},["app",{sourceInterval:[87,91]},"name",[]],["opt",{sourceInterval:[92,100]},["app",{sourceInterval:[92,99]},"Formals",[]]]]],Formals:["define",{sourceInterval:[104,143]},null,[],["seq",{sourceInterval:[118,143]},["terminal",{sourceInterval:[118,121]},"("],["app",{sourceInterval:[122,139]},"ListOf",[["app",{sourceInterval:[129,133]},"name",[]],["terminal",{sourceInterval:[135,138]},","]]],["terminal",{sourceInterval:[140,143]},")"]]],name:["define",{sourceInterval:[147,187]},"a name",[],["seq",{sourceInterval:[168,187]},["app",{sourceInterval:[168,177]},"nameFirst",[]],["star",{sourceInterval:[178,187]},["app",{sourceInterval:[178,186]},"nameRest",[]]]]],nameFirst:["define",{sourceInterval:[191,223]},null,[],["alt",{sourceInterval:[207,223]},["terminal",{sourceInterval:[207,210]},"_"],["app",{sourceInterval:[217,223]},"letter",[]]]],nameRest:["define",{sourceInterval:[227,257]},null,[],["alt",{sourceInterval:[242,257]},["terminal",{sourceInterval:[242,245]},"_"],["app",{sourceInterval:[252,257]},"alnum",[]]]]}]);zh(Oe.BuiltInRules);Hh(Wh);function zh(i){let e={empty(){return this.iteration()},nonEmpty(t,n,a){return this.iteration([t].concat(a.children))}};Ae.BuiltInSemantics=Ae.createSemantics(i,null).addOperation("asIteration",{emptyListOf:e.empty,nonemptyListOf:e.nonEmpty,EmptyListOf:e.empty,NonemptyListOf:e.nonEmpty})}function Hh(i){Ae.prototypeGrammarSemantics=i.createSemantics().addOperation("parse",{AttributeSignature(e){return{name:e.parse(),formals:[]}},OperationSignature(e,t){return{name:e.parse(),formals:t.children.map(n=>n.parse())[0]||[]}},Formals(e,t,n){return t.asIteration().children.map(a=>a.parse())},name(e,t){return this.sourceString}}),Ae.prototypeGrammar=i}function jh(i){let e=0,t=[0],n=()=>t[t.length-1],a={},u=/( *).*(?:$|\r?\n|\r)/g,p;for(;(p=u.exec(i))!=null;){let[h,v]=p;if(h.length===0)break;let d=v.length,g=n(),I=e+d;if(d>g)t.push(d),a[I]=1;else if(d<g){let y=t.length;for(;n()!==d;)t.pop();a[I]=-1*(y-t.length)}e+=h.length}return t.length>1&&(a[e]=1-t.length),a}var ja="an indented block",$a="a dedent",Ea=1114111+1,Gs=class extends $t{constructor(e){super(e.input),this.state=e}_indentationAt(e){return this.state.userData[e]||0}atEnd(){return super.atEnd()&&this._indentationAt(this.pos)===0}next(){if(this._indentationAt(this.pos)!==0){this.examinedLength=Math.max(this.examinedLength,this.pos);return}return super.next()}nextCharCode(){return this._indentationAt(this.pos)!==0?(this.examinedLength=Math.max(this.examinedLength,this.pos),Ea):super.nextCharCode()}nextCodePoint(){return this._indentationAt(this.pos)!==0?(this.examinedLength=Math.max(this.examinedLength,this.pos),Ea):super.nextCodePoint()}},In=class extends N{constructor(e=!0){super(),this.isIndent=e}allowsSkippingPrecedingSpace(){return!0}eval(e){let{inputStream:t}=e,n=e.userData;e.doNotMemoize=!0;let a=t.pos,u=this.isIndent?1:-1;return(n[a]||0)*u>0?(e.userData=Object.create(n),e.userData[a]-=u,e.pushBinding(new ht(0),a),!0):(e.processFailure(a,this),!1)}getArity(){return 1}_assertAllApplicationsAreValid(e,t){}_isNullable(e,t){return!1}assertChoicesHaveUniformArity(e){}assertIteratedExprsAreNotNullable(e){}introduceParams(e){return this}substituteParams(e){return this}toString(){return this.isIndent?"indent":"dedent"}toDisplayString(){return this.toString()}toFailure(e){let t=this.isIndent?ja:$a;return new Ee(this,t,"description")}},$h=new W("indent"),Kh=new W("dedent"),Zh=new Lt($s,"any",[$h,Kh],[]),Ka=new Zt().newGrammar("IndentationSensitive").withSuperGrammar($s).define("indent",[],new In(!0),ja,void 0,!0).define("dedent",[],new In(!1),$a,void 0,!0).extend("any",[],Zh,"any character",void 0).build();Object.assign(Ka,{_matchStateInitializer(i){i.userData=jh(i.input),i.inputStream=new Gs(i)},supportsIncrementalParsing:!1});var Jh="17.1.0";Oe.initApplicationParser(_n,Ks);var Qh=i=>!!i.constructor&&typeof i.constructor.isBuffer=="function"&&i.constructor.isBuffer(i);function Xh(i,e){let t=_n.match(i,"Grammars");if(t.failed())throw ch(t);return Ks(t,e)}function ed(i,e){let t=Za(i,e),n=Object.keys(t);if(n.length===0)throw new Error("Missing grammar definition");if(n.length>1){let u=t[n[1]].source;throw new Error(Hs(u.sourceString,u.startIdx)+"Found more than one grammar definition -- use ohm.grammars() instead.")}return t[n[0]]}function Za(i,e){let t=Object.create(e||{});if(typeof i!="string")if(Qh(i))i=i.toString();else throw new TypeError("Expected string as first argument, got "+Ws(i));return Xh(i,t),t}rt.ExperimentalIndentationSensitive=Ka;rt._buildGrammar=Ks;rt.grammar=ed;rt.grammars=Za;rt.makeRecipe=yn;rt.ohmGrammar=_n;rt.pexprs=Bh;rt.version=Jh});var Qa=O((x1,Ja)=>{"use strict";var{makeRecipe:td}=nt(),rd=td(["grammar",{source:`BasicArithmetic {\r
  Expression\r
    = LogicalShift\r
\r
  LogicalShift\r
    = LogicalShift "<<" LogicalShift -- left\r
    | LogicalShift ">>" LogicalShift -- right\r
    | AS \r
\r
  // Addition or Subtraction\r
  AS\r
    = AS add MD  -- addition\r
    | AS subtract MD  -- subtraction\r
    | MD\r
\r
  // Multiply or Divide\r
  MD\r
    = MD multiply E  -- multiplication\r
    | MD divide E  -- division\r
    | MD modulo E  -- modulo\r
    | E\r
\r
  // Exponent\r
  E\r
    = P exponent E  -- exponent\r
    | P\r
\r
  // Parenthesis\r
  P\r
    = "(" Expression ")"  -- parenthesis\r
    | Primitive\r
    \r
  Primitive\r
    = "+" Primitive -- positive\r
    | "-" Primitive -- negative\r
    | constant\r
    | hex\r
    | number\r
 \r
  // Lexical Rules\r
  add \r
  	= "+"\r
    | caseInsensitive<"plus">\r
  	| caseInsensitive<"add">\r
    | caseInsensitive<"and">\r
    \r
  subtract \r
    = "-"\r
    | caseInsensitive<"minus">\r
    | caseInsensitive<"subtract">\r
    | caseInsensitive<"remove">\r
    | caseInsensitive<"take">\r
      \r
  multiply \r
    = "*"\r
    | "\\\\*" // Escaped e.g. \\* for markdown\r
    | "\\u{00D7}" // Multiplication Symbol \xD7\r
    | caseInsensitive<"x">\r
    | caseInsensitive<"times by">\r
    | caseInsensitive<"times">\r
    | caseInsensitive<"multiply by">\r
    | caseInsensitive<"multiply">\r
      \r
  divide\r
    = "/"\r
    | "\\u{00F7}" // Division Symbol \xF7\r
    | caseInsensitive<"divide by">\r
    | caseInsensitive<"divide">\r
\r
  modulo\r
    = "%"\r
    | caseInsensitive<"modulo">\r
    | caseInsensitive<"mod">\r
\r
  exponent\r
    = "^"\r
    | caseInsensitive<"to the power of">\r
    | caseInsensitive<"power of">\r
    | caseInsensitive<"exponent">\r
    | caseInsensitive<"prime">\r
\r
  constant  \r
  	= caseInsensitive<"PI"> \r
    | caseInsensitive<"E">\r
\r
  number\r
    = digit* "." digit+  -- fract\r
    | digit+             -- whole\r
  \r
  hex\r
    = "0x" hexDigit+\r
    | hexDigit+ "h"\r
}`},"BasicArithmetic",null,"Expression",{Expression:["define",{sourceInterval:[21,51]},null,[],["app",{sourceInterval:[39,51]},"LogicalShift",[]]],LogicalShift_left:["define",{sourceInterval:[77,115]},null,[],["seq",{sourceInterval:[77,107]},["app",{sourceInterval:[77,89]},"LogicalShift",[]],["terminal",{sourceInterval:[90,94]},"<<"],["app",{sourceInterval:[95,107]},"LogicalShift",[]]]],LogicalShift_right:["define",{sourceInterval:[123,162]},null,[],["seq",{sourceInterval:[123,153]},["app",{sourceInterval:[123,135]},"LogicalShift",[]],["terminal",{sourceInterval:[136,140]},">>"],["app",{sourceInterval:[141,153]},"LogicalShift",[]]]],LogicalShift:["define",{sourceInterval:[57,172]},null,[],["alt",{sourceInterval:[77,172]},["app",{sourceInterval:[77,107]},"LogicalShift_left",[]],["app",{sourceInterval:[123,153]},"LogicalShift_right",[]],["app",{sourceInterval:[170,172]},"AS",[]]]],AS_addition:["define",{sourceInterval:[219,241]},null,[],["seq",{sourceInterval:[219,228]},["app",{sourceInterval:[219,221]},"AS",[]],["app",{sourceInterval:[222,225]},"add",[]],["app",{sourceInterval:[226,228]},"MD",[]]]],AS_subtraction:["define",{sourceInterval:[249,279]},null,[],["seq",{sourceInterval:[249,263]},["app",{sourceInterval:[249,251]},"AS",[]],["app",{sourceInterval:[252,260]},"subtract",[]],["app",{sourceInterval:[261,263]},"MD",[]]]],AS:["define",{sourceInterval:[209,289]},null,[],["alt",{sourceInterval:[219,289]},["app",{sourceInterval:[219,228]},"AS_addition",[]],["app",{sourceInterval:[249,263]},"AS_subtraction",[]],["app",{sourceInterval:[287,289]},"MD",[]]]],MD_multiplication:["define",{sourceInterval:[330,362]},null,[],["seq",{sourceInterval:[330,343]},["app",{sourceInterval:[330,332]},"MD",[]],["app",{sourceInterval:[333,341]},"multiply",[]],["app",{sourceInterval:[342,343]},"E",[]]]],MD_division:["define",{sourceInterval:[370,394]},null,[],["seq",{sourceInterval:[370,381]},["app",{sourceInterval:[370,372]},"MD",[]],["app",{sourceInterval:[373,379]},"divide",[]],["app",{sourceInterval:[380,381]},"E",[]]]],MD_modulo:["define",{sourceInterval:[402,424]},null,[],["seq",{sourceInterval:[402,413]},["app",{sourceInterval:[402,404]},"MD",[]],["app",{sourceInterval:[405,411]},"modulo",[]],["app",{sourceInterval:[412,413]},"E",[]]]],MD:["define",{sourceInterval:[320,433]},null,[],["alt",{sourceInterval:[330,433]},["app",{sourceInterval:[330,343]},"MD_multiplication",[]],["app",{sourceInterval:[370,381]},"MD_division",[]],["app",{sourceInterval:[402,413]},"MD_modulo",[]],["app",{sourceInterval:[432,433]},"E",[]]]],E_exponent:["define",{sourceInterval:[463,488]},null,[],["seq",{sourceInterval:[463,475]},["app",{sourceInterval:[463,464]},"P",[]],["app",{sourceInterval:[465,473]},"exponent",[]],["app",{sourceInterval:[474,475]},"E",[]]]],E:["define",{sourceInterval:[454,497]},null,[],["alt",{sourceInterval:[463,497]},["app",{sourceInterval:[463,475]},"E_exponent",[]],["app",{sourceInterval:[496,497]},"P",[]]]],P_parenthesis:["define",{sourceInterval:[530,564]},null,[],["seq",{sourceInterval:[530,548]},["terminal",{sourceInterval:[530,533]},"("],["app",{sourceInterval:[534,544]},"Expression",[]],["terminal",{sourceInterval:[545,548]},")"]]],P:["define",{sourceInterval:[521,581]},null,[],["alt",{sourceInterval:[530,581]},["app",{sourceInterval:[530,548]},"P_parenthesis",[]],["app",{sourceInterval:[572,581]},"Primitive",[]]]],Primitive_positive:["define",{sourceInterval:[608,633]},null,[],["seq",{sourceInterval:[608,621]},["terminal",{sourceInterval:[608,611]},"+"],["app",{sourceInterval:[612,621]},"Primitive",[]]]],Primitive_negative:["define",{sourceInterval:[641,666]},null,[],["seq",{sourceInterval:[641,654]},["terminal",{sourceInterval:[641,644]},"-"],["app",{sourceInterval:[645,654]},"Primitive",[]]]],Primitive:["define",{sourceInterval:[591,707]},null,[],["alt",{sourceInterval:[608,707]},["app",{sourceInterval:[608,621]},"Primitive_positive",[]],["app",{sourceInterval:[641,654]},"Primitive_negative",[]],["app",{sourceInterval:[674,682]},"constant",[]],["app",{sourceInterval:[690,693]},"hex",[]],["app",{sourceInterval:[701,707]},"number",[]]]],add:["define",{sourceInterval:[734,838]},null,[],["alt",{sourceInterval:[745,838]},["terminal",{sourceInterval:[745,748]},"+"],["app",{sourceInterval:[756,779]},"caseInsensitive",[["terminal",{sourceInterval:[772,778]},"plus"]]],["app",{sourceInterval:[786,808]},"caseInsensitive",[["terminal",{sourceInterval:[802,807]},"add"]]],["app",{sourceInterval:[816,838]},"caseInsensitive",[["terminal",{sourceInterval:[832,837]},"and"]]]]],subtract:["define",{sourceInterval:[848,999]},null,[],["alt",{sourceInterval:[865,999]},["terminal",{sourceInterval:[865,868]},"-"],["app",{sourceInterval:[876,900]},"caseInsensitive",[["terminal",{sourceInterval:[892,899]},"minus"]]],["app",{sourceInterval:[908,935]},"caseInsensitive",[["terminal",{sourceInterval:[924,934]},"subtract"]]],["app",{sourceInterval:[943,968]},"caseInsensitive",[["terminal",{sourceInterval:[959,967]},"remove"]]],["app",{sourceInterval:[976,999]},"caseInsensitive",[["terminal",{sourceInterval:[992,998]},"take"]]]]],multiply:["define",{sourceInterval:[1011,1289]},null,[],["alt",{sourceInterval:[1028,1289]},["terminal",{sourceInterval:[1028,1031]},"*"],["terminal",{sourceInterval:[1039,1044]},"\\*"],["terminal",{sourceInterval:[1084,1094]},"\xD7"],["app",{sourceInterval:[1129,1149]},"caseInsensitive",[["terminal",{sourceInterval:[1145,1148]},"x"]]],["app",{sourceInterval:[1157,1184]},"caseInsensitive",[["terminal",{sourceInterval:[1173,1183]},"times by"]]],["app",{sourceInterval:[1192,1216]},"caseInsensitive",[["terminal",{sourceInterval:[1208,1215]},"times"]]],["app",{sourceInterval:[1224,1254]},"caseInsensitive",[["terminal",{sourceInterval:[1240,1253]},"multiply by"]]],["app",{sourceInterval:[1262,1289]},"caseInsensitive",[["terminal",{sourceInterval:[1278,1288]},"multiply"]]]]],divide:["define",{sourceInterval:[1301,1426]},null,[],["alt",{sourceInterval:[1315,1426]},["terminal",{sourceInterval:[1315,1318]},"/"],["terminal",{sourceInterval:[1326,1336]},"\xF7"],["app",{sourceInterval:[1365,1393]},"caseInsensitive",[["terminal",{sourceInterval:[1381,1392]},"divide by"]]],["app",{sourceInterval:[1401,1426]},"caseInsensitive",[["terminal",{sourceInterval:[1417,1425]},"divide"]]]]],modulo:["define",{sourceInterval:[1432,1512]},null,[],["alt",{sourceInterval:[1446,1512]},["terminal",{sourceInterval:[1446,1449]},"%"],["app",{sourceInterval:[1457,1482]},"caseInsensitive",[["terminal",{sourceInterval:[1473,1481]},"modulo"]]],["app",{sourceInterval:[1490,1512]},"caseInsensitive",[["terminal",{sourceInterval:[1506,1511]},"mod"]]]]],exponent:["define",{sourceInterval:[1518,1681]},null,[],["alt",{sourceInterval:[1534,1681]},["terminal",{sourceInterval:[1534,1537]},"^"],["app",{sourceInterval:[1545,1579]},"caseInsensitive",[["terminal",{sourceInterval:[1561,1578]},"to the power of"]]],["app",{sourceInterval:[1587,1614]},"caseInsensitive",[["terminal",{sourceInterval:[1603,1613]},"power of"]]],["app",{sourceInterval:[1622,1649]},"caseInsensitive",[["terminal",{sourceInterval:[1638,1648]},"exponent"]]],["app",{sourceInterval:[1657,1681]},"caseInsensitive",[["terminal",{sourceInterval:[1673,1680]},"prime"]]]]],constant:["define",{sourceInterval:[1687,1754]},null,[],["alt",{sourceInterval:[1704,1754]},["app",{sourceInterval:[1704,1725]},"caseInsensitive",[["terminal",{sourceInterval:[1720,1724]},"PI"]]],["app",{sourceInterval:[1734,1754]},"caseInsensitive",[["terminal",{sourceInterval:[1750,1753]},"E"]]]]],number_fract:["define",{sourceInterval:[1774,1801]},null,[],["seq",{sourceInterval:[1774,1791]},["star",{sourceInterval:[1774,1780]},["app",{sourceInterval:[1774,1779]},"digit",[]]],["terminal",{sourceInterval:[1781,1784]},"."],["plus",{sourceInterval:[1785,1791]},["app",{sourceInterval:[1785,1790]},"digit",[]]]]],number_whole:["define",{sourceInterval:[1809,1836]},null,[],["plus",{sourceInterval:[1809,1815]},["app",{sourceInterval:[1809,1814]},"digit",[]]]],number:["define",{sourceInterval:[1760,1836]},null,[],["alt",{sourceInterval:[1774,1836]},["app",{sourceInterval:[1774,1791]},"number_fract",[]],["app",{sourceInterval:[1809,1815]},"number_whole",[]]]],hex:["define",{sourceInterval:[1844,1890]},null,[],["alt",{sourceInterval:[1855,1890]},["seq",{sourceInterval:[1855,1869]},["terminal",{sourceInterval:[1855,1859]},"0x"],["plus",{sourceInterval:[1860,1869]},["app",{sourceInterval:[1860,1868]},"hexDigit",[]]]],["seq",{sourceInterval:[1877,1890]},["plus",{sourceInterval:[1877,1886]},["app",{sourceInterval:[1877,1885]},"hexDigit",[]]],["terminal",{sourceInterval:[1887,1890]},"h"]]]]}]);Ja.exports=rd});var Sn=O((H1,eo)=>{var nd={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1};eo.exports=nd});var yr=O((j1,to)=>{var sd=Sn();function id(i){return!!(i&&sd[typeof i])}to.exports=id});var Jt=O(($1,ro)=>{var ad=Object.prototype,od=ad.toString,ld=RegExp("^"+String(od).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");ro.exports=ld});var so=O((K1,no)=>{var ud=Sn(),cd=Object.prototype,pd=cd.hasOwnProperty,md=function(i){var e,t=i,n=[];if(!t||!ud[typeof i])return n;for(e in t)pd.call(t,e)&&n.push(e);return n};no.exports=md});var Zs=O((Z1,io)=>{var vd=yr(),hd=Jt(),dd=so(),wn=hd.test(wn=Object.keys)&&wn,fd=wn?function(i){return vd(i)?wn(i):[]}:dd;io.exports=fd});var Js=O((J1,ao)=>{function Id(){}ao.exports=Id});var Qs=O((X1,uo)=>{var oo=yr(),Q1=Js(),gd=Jt(),bn=gd.test(bn=Object.create)&&bn;function lo(i,e){return oo(i)?bn(i):{}}bn||(lo=function(){function i(){}return function(e){if(oo(e)){i.prototype=e;var t=new i;i.prototype=null}return t||globalThis.Object()}}());uo.exports=lo});var xn=O((eI,mo)=>{var yd=Js(),_d=Jt(),co={configurable:!1,enumerable:!1,value:null,writable:!1},po=function(){try{var i={},e=_d.test(e=Object.defineProperty)&&e,t=e(i,i,i)&&e}catch(n){}return t}(),Sd=po?function(i,e){co.value=e,po(i,"__bindData__",co)}:yd;mo.exports=Sd});var ho=O((tI,vo)=>{var wd=Qs(),bd=yr(),xd=xn(),Rd=[],Dd=Rd.push;function Md(i){var e=i[0],t=i[2],n=i[4];function a(){if(t){var u=t.slice();Dd.apply(u,arguments)}if(this instanceof a){var p=wd(e.prototype),h=e.apply(p,u||arguments);return bd(h)?h:p}return e.apply(n,u||arguments)}return xd(a,i),a}vo.exports=Md});var Xs=O((rI,fo)=>{function Pd(i,e,t){e||(e=0),typeof t=="undefined"&&(t=i?i.length:0);for(var n=-1,a=t-e||0,u=Array(a<0?0:a);++n<a;)u[n]=i[e+n];return u}fo.exports=Pd});var _o=O((nI,yo)=>{var Ad=Qs(),Od=yr(),Ed=xn(),Nd=Xs(),Vd=[],Io=Vd.push;function go(i){var e=i[0],t=i[1],n=i[2],a=i[3],u=i[4],p=i[5],h=t&1,v=t&2,d=t&4,g=t&8,I=e;function y(){var x=h?u:this;if(n){var S=n.slice();Io.apply(S,arguments)}if((a||d)&&(S||(S=Nd(arguments)),a&&Io.apply(S,a),d&&S.length<p))return t|=16,go([e,g?t:t&-4,S,null,u,p]);if(S||(S=arguments),v&&(e=x[I]),this instanceof y){x=Ad(e.prototype);var V=e.apply(x,S);return Od(V)?V:x}return e.apply(x,S)}return Ed(y,i),y}yo.exports=go});var wo=O((sI,So)=>{function kd(i){return typeof i=="function"}So.exports=kd});var Do=O((iI,Ro)=>{var Ld=ho(),Td=_o(),Cd=wo(),Fd=[],bo=Fd.push;function xo(i,e,t,n,a,u){var p=e&1,h=e&2,v=e&4,d=e&8,g=e&16,I=e&32;if(!h&&!Cd(i))throw new TypeError;g&&!t.length&&(e&=-17,g=t=!1),I&&!n.length&&(e&=-33,I=n=!1);var y=i&&i.__bindData__;if(y&&y!==!0)return y=y.slice(),p&&!(y[1]&1)&&(y[4]=a),!p&&y[1]&1&&(e|=8),v&&!(y[1]&4)&&(y[5]=u),g&&bo.apply(y[2]||(y[2]=[]),t),I&&bo.apply(y[3]||(y[3]=[]),n),y[1]|=e,xo.apply(null,y);var x=e==1||e===17?Ld:Td;return x([i,e,t,n,a,u])}Ro.exports=xo});var Ao=O((oI,Po)=>{var Mo=Do(),aI=Jt(),qd=Xs();function Ud(i,e){return arguments.length>2?Mo(i,17,qd(arguments,2),null,e):Mo(i,1,null,null,e)}Po.exports=Ud});var Eo=O((lI,Oo)=>{function Bd(i){return i}Oo.exports=Bd});var Vo=O((uI,No)=>{var Yd=Jt(),Gd=/\bthis\b/,ei={};ei.funcDecomp=!Yd.test(globalThis.WinRTError)&&Gd.test(function(){return this});ei.funcNames=typeof Function.name=="string";No.exports=ei});var ri=O((cI,ko)=>{var Wd=Ao(),zd=Eo(),Hd=xn(),ti=Vo(),jd=/^\s*function[ \n\r\t]+\w/,$d=/\bthis\b/,Kd=Function.prototype.toString;function Zd(i,e,t){if(typeof i!="function")return zd;if(typeof e=="undefined"||!("prototype"in i))return i;var n=i.__bindData__;if(typeof n=="undefined"&&(ti.funcNames&&(n=!i.name),n=n||!ti.funcDecomp,!n)){var a=Kd.call(i);ti.funcNames||(n=!jd.test(a)),n||(n=$d.test(a),Hd(i,n))}if(n===!1||n!==!0&&n[1]&1)return i;switch(t){case 1:return function(u){return i.call(e,u)};case 2:return function(u,p){return i.call(e,u,p)};case 3:return function(u,p,h){return i.call(e,u,p,h)};case 4:return function(u,p,h,v){return i.call(e,u,p,h,v)}}return Wd(i,e)}ko.exports=Zd});var Co=O((pI,To)=>{var Jd=ri(),Qd=Zs(),Lo=Sn(),Xd=function(i,e,t){var n,a=i,u=a;if(!a||!Lo[typeof a])return u;e=e&&typeof t=="undefined"?e:Jd(e,t,3);for(var p=-1,h=Lo[typeof a]&&Qd(a),v=h?h.length:0;++p<v;)if(n=h[p],e(a[n],n,i)===!1)return u;return u};To.exports=Xd});var qo=O((mI,Fo)=>{var ef=ri(),tf=Co();function rf(i,e,t){var n=-1,a=i?i.length:0;if(e=e&&typeof t=="undefined"?e:ef(e,t,3),typeof a=="number")for(;++n<a&&e(i[n],n,i)!==!1;);else tf(i,e);return i}Fo.exports=rf});var Go=O((vI,Yo)=>{var Uo,Bo;Uo={mm:{name:{singular:"Millimeter",plural:"Millimeters"},to_anchor:1/1e3},cm:{name:{singular:"Centimeter",plural:"Centimeters"},to_anchor:1/100},m:{name:{singular:"Meter",plural:"Meters"},to_anchor:1},km:{name:{singular:"Kilometer",plural:"Kilometers"},to_anchor:1e3}};Bo={in:{name:{singular:"Inch",plural:"Inches"},to_anchor:1/12},yd:{name:{singular:"Yard",plural:"Yards"},to_anchor:3},"ft-us":{name:{singular:"US Survey Foot",plural:"US Survey Feet"},to_anchor:1.000002},ft:{name:{singular:"Foot",plural:"Feet"},to_anchor:1},mi:{name:{singular:"Mile",plural:"Miles"},to_anchor:5280}};Yo.exports={metric:Uo,imperial:Bo,_anchors:{metric:{unit:"m",ratio:3.28084},imperial:{unit:"ft",ratio:1/3.28084}}}});var jo=O((hI,Ho)=>{var Wo,zo;Wo={mm2:{name:{singular:"Square Millimeter",plural:"Square Millimeters"},to_anchor:1/1e6},cm2:{name:{singular:"Centimeter",plural:"Centimeters"},to_anchor:1/1e4},m2:{name:{singular:"Square Meter",plural:"Square Meters"},to_anchor:1},ha:{name:{singular:"Hectare",plural:"Hectares"},to_anchor:1e4},km2:{name:{singular:"Square Kilometer",plural:"Square Kilometers"},to_anchor:1e6}};zo={in2:{name:{singular:"Square Inch",plural:"Square Inches"},to_anchor:1/144},yd2:{name:{singular:"Square Yard",plural:"Square Yards"},to_anchor:9},ft2:{name:{singular:"Square Foot",plural:"Square Feet"},to_anchor:1},ac:{name:{singular:"Acre",plural:"Acres"},to_anchor:43560},mi2:{name:{singular:"Square Mile",plural:"Square Miles"},to_anchor:27878400}};Ho.exports={metric:Wo,imperial:zo,_anchors:{metric:{unit:"m2",ratio:10.7639},imperial:{unit:"ft2",ratio:1/10.7639}}}});var Jo=O((dI,Zo)=>{var $o,Ko;$o={mcg:{name:{singular:"Microgram",plural:"Micrograms"},to_anchor:1/1e6},mg:{name:{singular:"Milligram",plural:"Milligrams"},to_anchor:1/1e3},g:{name:{singular:"Gram",plural:"Grams"},to_anchor:1},kg:{name:{singular:"Kilogram",plural:"Kilograms"},to_anchor:1e3},mt:{name:{singular:"Metric Tonne",plural:"Metric Tonnes"},to_anchor:1e6}};Ko={oz:{name:{singular:"Ounce",plural:"Ounces"},to_anchor:1/16},lb:{name:{singular:"Pound",plural:"Pounds"},to_anchor:1},t:{name:{singular:"Ton",plural:"Tons"},to_anchor:2e3}};Zo.exports={metric:$o,imperial:Ko,_anchors:{metric:{unit:"g",ratio:1/453.592},imperial:{unit:"lb",ratio:453.592}}}});var tl=O((fI,el)=>{var Qo,Xo;Qo={mm3:{name:{singular:"Cubic Millimeter",plural:"Cubic Millimeters"},to_anchor:1/1e6},cm3:{name:{singular:"Cubic Centimeter",plural:"Cubic Centimeters"},to_anchor:1/1e3},ml:{name:{singular:"Millilitre",plural:"Millilitres"},to_anchor:1/1e3},cl:{name:{singular:"Centilitre",plural:"Centilitres"},to_anchor:1/100},dl:{name:{singular:"Decilitre",plural:"Decilitres"},to_anchor:1/10},l:{name:{singular:"Litre",plural:"Litres"},to_anchor:1},kl:{name:{singular:"Kilolitre",plural:"Kilolitres"},to_anchor:1e3},m3:{name:{singular:"Cubic meter",plural:"Cubic meters"},to_anchor:1e3},km3:{name:{singular:"Cubic kilometer",plural:"Cubic kilometers"},to_anchor:1e12},krm:{name:{singular:"Matsked",plural:"Matskedar"},to_anchor:1/1e3},tsk:{name:{singular:"Tesked",plural:"Teskedar"},to_anchor:5/1e3},msk:{name:{singular:"Matsked",plural:"Matskedar"},to_anchor:15/1e3},kkp:{name:{singular:"Kaffekopp",plural:"Kaffekoppar"},to_anchor:150/1e3},glas:{name:{singular:"Glas",plural:"Glas"},to_anchor:200/1e3},kanna:{name:{singular:"Kanna",plural:"Kannor"},to_anchor:2.617}};Xo={tsp:{name:{singular:"Teaspoon",plural:"Teaspoons"},to_anchor:1/6},Tbs:{name:{singular:"Tablespoon",plural:"Tablespoons"},to_anchor:1/2},in3:{name:{singular:"Cubic inch",plural:"Cubic inches"},to_anchor:.55411},"fl-oz":{name:{singular:"Fluid Ounce",plural:"Fluid Ounces"},to_anchor:1},cup:{name:{singular:"Cup",plural:"Cups"},to_anchor:8},pnt:{name:{singular:"Pint",plural:"Pints"},to_anchor:16},qt:{name:{singular:"Quart",plural:"Quarts"},to_anchor:32},gal:{name:{singular:"Gallon",plural:"Gallons"},to_anchor:128},ft3:{name:{singular:"Cubic foot",plural:"Cubic feet"},to_anchor:957.506},yd3:{name:{singular:"Cubic yard",plural:"Cubic yards"},to_anchor:25852.7}};el.exports={metric:Qo,imperial:Xo,_anchors:{metric:{unit:"l",ratio:33.8140226},imperial:{unit:"fl-oz",ratio:1/33.8140226}}}});var sl=O((II,nl)=>{var rl;rl={ea:{name:{singular:"Each",plural:"Each"},to_anchor:1},dz:{name:{singular:"Dozen",plural:"Dozens"},to_anchor:12}};nl.exports={metric:rl,imperial:{},_anchors:{metric:{unit:"ea",ratio:1}}}});var ll=O((gI,ol)=>{var il,al;il={C:{name:{singular:"degree Celsius",plural:"degrees Celsius"},to_anchor:1,anchor_shift:0},K:{name:{singular:"degree Kelvin",plural:"degrees Kelvin"},to_anchor:1,anchor_shift:273.15}};al={F:{name:{singular:"degree Fahrenheit",plural:"degrees Fahrenheit"},to_anchor:1},R:{name:{singular:"degree Rankine",plural:"degrees Rankine"},to_anchor:1,anchor_shift:459.67}};ol.exports={metric:il,imperial:al,_anchors:{metric:{unit:"C",transform:function(i){return i/(5/9)+32}},imperial:{unit:"F",transform:function(i){return(i-32)*(5/9)}}}}});var ml=O((yI,pl)=>{var cl,ul=365.25;cl={ns:{name:{singular:"Nanosecond",plural:"Nanoseconds"},to_anchor:1/1e9},mu:{name:{singular:"Microsecond",plural:"Microseconds"},to_anchor:1/1e6},ms:{name:{singular:"Millisecond",plural:"Milliseconds"},to_anchor:1/1e3},s:{name:{singular:"Second",plural:"Seconds"},to_anchor:1},min:{name:{singular:"Minute",plural:"Minutes"},to_anchor:60},h:{name:{singular:"Hour",plural:"Hours"},to_anchor:60*60},d:{name:{singular:"Day",plural:"Days"},to_anchor:60*60*24},week:{name:{singular:"Week",plural:"Weeks"},to_anchor:60*60*24*7},month:{name:{singular:"Month",plural:"Months"},to_anchor:60*60*24*ul/12},year:{name:{singular:"Year",plural:"Years"},to_anchor:60*60*24*ul}};pl.exports={metric:cl,_anchors:{metric:{unit:"s",ratio:1}}}});var fl=O((_I,dl)=>{var vl,hl;vl={b:{name:{singular:"Bit",plural:"Bits"},to_anchor:1},Kb:{name:{singular:"Kilobit",plural:"Kilobits"},to_anchor:1024},Mb:{name:{singular:"Megabit",plural:"Megabits"},to_anchor:1048576},Gb:{name:{singular:"Gigabit",plural:"Gigabits"},to_anchor:1073741824},Tb:{name:{singular:"Terabit",plural:"Terabits"},to_anchor:1099511627776}};hl={B:{name:{singular:"Byte",plural:"Bytes"},to_anchor:1},KB:{name:{singular:"Kilobyte",plural:"Kilobytes"},to_anchor:1024},MB:{name:{singular:"Megabyte",plural:"Megabytes"},to_anchor:1048576},GB:{name:{singular:"Gigabyte",plural:"Gigabytes"},to_anchor:1073741824},TB:{name:{singular:"Terabyte",plural:"Terabytes"},to_anchor:1099511627776}};dl.exports={bits:vl,bytes:hl,_anchors:{bits:{unit:"b",ratio:1/8},bytes:{unit:"B",ratio:8}}}});var yl=O((SI,gl)=>{var Il;Il={ppm:{name:{singular:"Part-per Million",plural:"Parts-per Million"},to_anchor:1},ppb:{name:{singular:"Part-per Billion",plural:"Parts-per Billion"},to_anchor:.001},ppt:{name:{singular:"Part-per Trillion",plural:"Parts-per Trillion"},to_anchor:1e-6},ppq:{name:{singular:"Part-per Quadrillion",plural:"Parts-per Quadrillion"},to_anchor:1e-9}};gl.exports={metric:Il,imperial:{},_anchors:{metric:{unit:"ppm",ratio:1e-6}}}});var bl=O((wI,wl)=>{var _l,Sl;_l={"m/s":{name:{singular:"Metre per second",plural:"Metres per second"},to_anchor:3.6},"km/h":{name:{singular:"Kilometre per hour",plural:"Kilometres per hour"},to_anchor:1}};Sl={"m/h":{name:{singular:"Mile per hour",plural:"Miles per hour"},to_anchor:1},knot:{name:{singular:"Knot",plural:"Knots"},to_anchor:1.150779},"ft/s":{name:{singular:"Foot per second",plural:"Feet per second"},to_anchor:.681818}};wl.exports={metric:_l,imperial:Sl,_anchors:{metric:{unit:"km/h",ratio:1/1.609344},imperial:{unit:"m/h",ratio:1.609344}}}});var Ml=O((bI,Dl)=>{var xl,Rl;xl={"min/km":{name:{singular:"Minute per kilometre",plural:"Minutes per kilometre"},to_anchor:.06},"s/m":{name:{singular:"Second per metre",plural:"Seconds per metre"},to_anchor:1}};Rl={"min/mi":{name:{singular:"Minute per mile",plural:"Minutes per mile"},to_anchor:.0113636},"s/ft":{name:{singular:"Second per foot",plural:"Seconds per foot"},to_anchor:1}};Dl.exports={metric:xl,imperial:Rl,_anchors:{metric:{unit:"s/m",ratio:.3048},imperial:{unit:"s/ft",ratio:1/.3048}}}});var El=O((xI,Ol)=>{var Pl,Al;Pl={Pa:{name:{singular:"pascal",plural:"pascals"},to_anchor:1/1e3},kPa:{name:{singular:"kilopascal",plural:"kilopascals"},to_anchor:1},MPa:{name:{singular:"megapascal",plural:"megapascals"},to_anchor:1e3},hPa:{name:{singular:"hectopascal",plural:"hectopascals"},to_anchor:1/10},bar:{name:{singular:"bar",plural:"bar"},to_anchor:100},torr:{name:{singular:"torr",plural:"torr"},to_anchor:101325/76e4}};Al={psi:{name:{singular:"pound per square inch",plural:"pounds per square inch"},to_anchor:1/1e3},ksi:{name:{singular:"kilopound per square inch",plural:"kilopound per square inch"},to_anchor:1}};Ol.exports={metric:Pl,imperial:Al,_anchors:{metric:{unit:"kPa",ratio:.00014503768078},imperial:{unit:"psi",ratio:1/.00014503768078}}}});var kl=O((RI,Vl)=>{var Nl;Nl={A:{name:{singular:"Ampere",plural:"Amperes"},to_anchor:1},mA:{name:{singular:"Milliampere",plural:"Milliamperes"},to_anchor:.001},kA:{name:{singular:"Kiloampere",plural:"Kiloamperes"},to_anchor:1e3}};Vl.exports={metric:Nl,_anchors:{metric:{unit:"A",ratio:1}}}});var Cl=O((DI,Tl)=>{var Ll;Ll={V:{name:{singular:"Volt",plural:"Volts"},to_anchor:1},mV:{name:{singular:"Millivolt",plural:"Millivolts"},to_anchor:.001},kV:{name:{singular:"Kilovolt",plural:"Kilovolts"},to_anchor:1e3}};Tl.exports={metric:Ll,_anchors:{metric:{unit:"V",ratio:1}}}});var Ul=O((MI,ql)=>{var Fl;Fl={W:{name:{singular:"Watt",plural:"Watts"},to_anchor:1},mW:{name:{singular:"Milliwatt",plural:"Milliwatts"},to_anchor:.001},kW:{name:{singular:"Kilowatt",plural:"Kilowatts"},to_anchor:1e3},MW:{name:{singular:"Megawatt",plural:"Megawatts"},to_anchor:1e6},GW:{name:{singular:"Gigawatt",plural:"Gigawatts"},to_anchor:1e9}};ql.exports={metric:Fl,_anchors:{metric:{unit:"W",ratio:1}}}});var Gl=O((PI,Yl)=>{var Bl;Bl={VAR:{name:{singular:"Volt-Ampere Reactive",plural:"Volt-Amperes Reactive"},to_anchor:1},mVAR:{name:{singular:"Millivolt-Ampere Reactive",plural:"Millivolt-Amperes Reactive"},to_anchor:.001},kVAR:{name:{singular:"Kilovolt-Ampere Reactive",plural:"Kilovolt-Amperes Reactive"},to_anchor:1e3},MVAR:{name:{singular:"Megavolt-Ampere Reactive",plural:"Megavolt-Amperes Reactive"},to_anchor:1e6},GVAR:{name:{singular:"Gigavolt-Ampere Reactive",plural:"Gigavolt-Amperes Reactive"},to_anchor:1e9}};Yl.exports={metric:Bl,_anchors:{metric:{unit:"VAR",ratio:1}}}});var Hl=O((AI,zl)=>{var Wl;Wl={VA:{name:{singular:"Volt-Ampere",plural:"Volt-Amperes"},to_anchor:1},mVA:{name:{singular:"Millivolt-Ampere",plural:"Millivolt-Amperes"},to_anchor:.001},kVA:{name:{singular:"Kilovolt-Ampere",plural:"Kilovolt-Amperes"},to_anchor:1e3},MVA:{name:{singular:"Megavolt-Ampere",plural:"Megavolt-Amperes"},to_anchor:1e6},GVA:{name:{singular:"Gigavolt-Ampere",plural:"Gigavolt-Amperes"},to_anchor:1e9}};zl.exports={metric:Wl,_anchors:{metric:{unit:"VA",ratio:1}}}});var Kl=O((OI,$l)=>{var jl;jl={Wh:{name:{singular:"Watt-hour",plural:"Watt-hours"},to_anchor:3600},mWh:{name:{singular:"Milliwatt-hour",plural:"Milliwatt-hours"},to_anchor:3.6},kWh:{name:{singular:"Kilowatt-hour",plural:"Kilowatt-hours"},to_anchor:36e5},MWh:{name:{singular:"Megawatt-hour",plural:"Megawatt-hours"},to_anchor:36e8},GWh:{name:{singular:"Gigawatt-hour",plural:"Gigawatt-hours"},to_anchor:36e11},J:{name:{singular:"Joule",plural:"Joules"},to_anchor:1},kJ:{name:{singular:"Kilojoule",plural:"Kilojoules"},to_anchor:1e3}};$l.exports={metric:jl,_anchors:{metric:{unit:"J",ratio:1}}}});var Ql=O((EI,Jl)=>{var Zl;Zl={VARh:{name:{singular:"Volt-Ampere Reactive Hour",plural:"Volt-Amperes Reactive Hour"},to_anchor:1},mVARh:{name:{singular:"Millivolt-Ampere Reactive Hour",plural:"Millivolt-Amperes Reactive Hour"},to_anchor:.001},kVARh:{name:{singular:"Kilovolt-Ampere Reactive Hour",plural:"Kilovolt-Amperes Reactive Hour"},to_anchor:1e3},MVARh:{name:{singular:"Megavolt-Ampere Reactive Hour",plural:"Megavolt-Amperes Reactive Hour"},to_anchor:1e6},GVARh:{name:{singular:"Gigavolt-Ampere Reactive Hour",plural:"Gigavolt-Amperes Reactive Hour"},to_anchor:1e9}};Jl.exports={metric:Zl,_anchors:{metric:{unit:"VARh",ratio:1}}}});var ru=O((NI,tu)=>{var Xl,eu;Xl={"mm3/s":{name:{singular:"Cubic Millimeter per second",plural:"Cubic Millimeters per second"},to_anchor:1/1e6},"cm3/s":{name:{singular:"Cubic Centimeter per second",plural:"Cubic Centimeters per second"},to_anchor:1/1e3},"ml/s":{name:{singular:"Millilitre per second",plural:"Millilitres per second"},to_anchor:1/1e3},"cl/s":{name:{singular:"Centilitre per second",plural:"Centilitres per second"},to_anchor:1/100},"dl/s":{name:{singular:"Decilitre per second",plural:"Decilitres per second"},to_anchor:1/10},"l/s":{name:{singular:"Litre per second",plural:"Litres per second"},to_anchor:1},"l/min":{name:{singular:"Litre per minute",plural:"Litres per minute"},to_anchor:1/60},"l/h":{name:{singular:"Litre per hour",plural:"Litres per hour"},to_anchor:1/3600},"kl/s":{name:{singular:"Kilolitre per second",plural:"Kilolitres per second"},to_anchor:1e3},"kl/min":{name:{singular:"Kilolitre per minute",plural:"Kilolitres per minute"},to_anchor:50/3},"kl/h":{name:{singular:"Kilolitre per hour",plural:"Kilolitres per hour"},to_anchor:5/18},"m3/s":{name:{singular:"Cubic meter per second",plural:"Cubic meters per second"},to_anchor:1e3},"m3/min":{name:{singular:"Cubic meter per minute",plural:"Cubic meters per minute"},to_anchor:50/3},"m3/h":{name:{singular:"Cubic meter per hour",plural:"Cubic meters per hour"},to_anchor:5/18},"km3/s":{name:{singular:"Cubic kilometer per second",plural:"Cubic kilometers per second"},to_anchor:1e12}};eu={"tsp/s":{name:{singular:"Teaspoon per second",plural:"Teaspoons per second"},to_anchor:1/6},"Tbs/s":{name:{singular:"Tablespoon per second",plural:"Tablespoons per second"},to_anchor:1/2},"in3/s":{name:{singular:"Cubic inch per second",plural:"Cubic inches per second"},to_anchor:.55411},"in3/min":{name:{singular:"Cubic inch per minute",plural:"Cubic inches per minute"},to_anchor:.55411/60},"in3/h":{name:{singular:"Cubic inch per hour",plural:"Cubic inches per hour"},to_anchor:.55411/3600},"fl-oz/s":{name:{singular:"Fluid Ounce per second",plural:"Fluid Ounces per second"},to_anchor:1},"fl-oz/min":{name:{singular:"Fluid Ounce per minute",plural:"Fluid Ounces per minute"},to_anchor:1/60},"fl-oz/h":{name:{singular:"Fluid Ounce per hour",plural:"Fluid Ounces per hour"},to_anchor:1/3600},"cup/s":{name:{singular:"Cup per second",plural:"Cups per second"},to_anchor:8},"pnt/s":{name:{singular:"Pint per second",plural:"Pints per second"},to_anchor:16},"pnt/min":{name:{singular:"Pint per minute",plural:"Pints per minute"},to_anchor:4/15},"pnt/h":{name:{singular:"Pint per hour",plural:"Pints per hour"},to_anchor:1/225},"qt/s":{name:{singular:"Quart per second",plural:"Quarts per second"},to_anchor:32},"gal/s":{name:{singular:"Gallon per second",plural:"Gallons per second"},to_anchor:128},"gal/min":{name:{singular:"Gallon per minute",plural:"Gallons per minute"},to_anchor:32/15},"gal/h":{name:{singular:"Gallon per hour",plural:"Gallons per hour"},to_anchor:8/225},"ft3/s":{name:{singular:"Cubic foot per second",plural:"Cubic feet per second"},to_anchor:957.506},"ft3/min":{name:{singular:"Cubic foot per minute",plural:"Cubic feet per minute"},to_anchor:957.506/60},"ft3/h":{name:{singular:"Cubic foot per hour",plural:"Cubic feet per hour"},to_anchor:957.506/3600},"yd3/s":{name:{singular:"Cubic yard per second",plural:"Cubic yards per second"},to_anchor:25852.7},"yd3/min":{name:{singular:"Cubic yard per minute",plural:"Cubic yards per minute"},to_anchor:25852.7/60},"yd3/h":{name:{singular:"Cubic yard per hour",plural:"Cubic yards per hour"},to_anchor:25852.7/3600}};tu.exports={metric:Xl,imperial:eu,_anchors:{metric:{unit:"l/s",ratio:33.8140227},imperial:{unit:"fl-oz/s",ratio:1/33.8140227}}}});var au=O((VI,iu)=>{var nu,su;nu={lx:{name:{singular:"Lux",plural:"Lux"},to_anchor:1}};su={"ft-cd":{name:{singular:"Foot-candle",plural:"Foot-candles"},to_anchor:1}};iu.exports={metric:nu,imperial:su,_anchors:{metric:{unit:"lx",ratio:1/10.76391},imperial:{unit:"ft-cd",ratio:10.76391}}}});var uu=O((kI,lu)=>{var ou;ou={mHz:{name:{singular:"millihertz",plural:"millihertz"},to_anchor:1/1e3},Hz:{name:{singular:"hertz",plural:"hertz"},to_anchor:1},kHz:{name:{singular:"kilohertz",plural:"kilohertz"},to_anchor:1e3},MHz:{name:{singular:"megahertz",plural:"megahertz"},to_anchor:1e3*1e3},GHz:{name:{singular:"gigahertz",plural:"gigahertz"},to_anchor:1e3*1e3*1e3},THz:{name:{singular:"terahertz",plural:"terahertz"},to_anchor:1e3*1e3*1e3*1e3},rpm:{name:{singular:"rotation per minute",plural:"rotations per minute"},to_anchor:1/60},"deg/s":{name:{singular:"degree per second",plural:"degrees per second"},to_anchor:1/360},"rad/s":{name:{singular:"radian per second",plural:"radians per second"},to_anchor:1/(Math.PI*2)}};lu.exports={metric:ou,_anchors:{frequency:{unit:"hz",ratio:1}}}});var mu=O((LI,pu)=>{var cu;cu={rad:{name:{singular:"radian",plural:"radians"},to_anchor:180/Math.PI},deg:{name:{singular:"degree",plural:"degrees"},to_anchor:1},grad:{name:{singular:"gradian",plural:"gradians"},to_anchor:9/10},arcmin:{name:{singular:"arcminute",plural:"arcminutes"},to_anchor:1/60},arcsec:{name:{singular:"arcsecond",plural:"arcseconds"},to_anchor:1/3600}};pu.exports={metric:cu,_anchors:{metric:{unit:"deg",ratio:1}}}});var Rn=O((TI,du)=>{var vu,_r=Zs(),qe=qo(),ft={length:Go(),area:jo(),mass:Jo(),volume:tl(),each:sl(),temperature:ll(),time:ml(),digital:fl(),partsPer:yl(),speed:bl(),pace:Ml(),pressure:El(),current:kl(),voltage:Cl(),power:Ul(),reactivePower:Gl(),apparentPower:Hl(),energy:Kl(),reactiveEnergy:Ql(),volumeFlowRate:ru(),illuminance:au(),frequency:uu(),angle:mu()},Ue;Ue=function(i,e){e?this.val=i/e:this.val=i};Ue.prototype.from=function(i){if(this.destination)throw new Error(".from must be called before .to");return this.origin=this.getUnit(i),this.origin||this.throwUnsupportedUnitError(i),this};Ue.prototype.to=function(i){if(!this.origin)throw new Error(".to must be called after .from");this.destination=this.getUnit(i);var e,t;if(this.destination||this.throwUnsupportedUnitError(i),this.origin.abbr===this.destination.abbr)return this.val;if(this.destination.measure!=this.origin.measure)throw new Error("Cannot convert incompatible measures of "+this.destination.measure+" and "+this.origin.measure);return e=this.val*this.origin.unit.to_anchor,this.origin.unit.anchor_shift&&(e-=this.origin.unit.anchor_shift),this.origin.system!=this.destination.system&&(t=ft[this.origin.measure]._anchors[this.origin.system].transform,typeof t=="function"?e=t(e):e*=ft[this.origin.measure]._anchors[this.origin.system].ratio),this.destination.unit.anchor_shift&&(e+=this.destination.unit.anchor_shift),e/this.destination.unit.to_anchor};Ue.prototype.toBest=function(e){if(!this.origin)throw new Error(".toBest must be called after .from");var e=Object.assign({exclude:[],cutOffNumber:1},e),t;return qe(this.possibilities(),function(n){var a=this.describe(n),u=e.exclude.indexOf(n)===-1;if(u&&a.system===this.origin.system){var p=this.to(n);(!t||p>=e.cutOffNumber&&p<t.val)&&(t={val:p,unit:n,singular:a.singular,plural:a.plural})}}.bind(this)),t};Ue.prototype.getUnit=function(i){var e;return qe(ft,function(t,n){if(qe(t,function(a,u){if(u=="_anchors"||(qe(a,function(p,h){if(h==i)return e={abbr:i,measure:n,system:u,unit:p},!1}),e))return!1}),e)return!1}),e};var hu=function(i){return{abbr:i.abbr,measure:i.measure,system:i.system,singular:i.unit.name.singular,plural:i.unit.name.plural}};Ue.prototype.describe=function(i){var e=Ue.prototype.getUnit(i),t=null;try{t=hu(e)}catch(n){this.throwUnsupportedUnitError(i)}return t};Ue.prototype.list=function(i){var e=[];return qe(ft,function(t,n){i&&i!==n||qe(t,function(a,u){if(u=="_anchors")return!1;qe(a,function(p,h){e=e.concat(hu({abbr:h,measure:n,system:u,unit:p}))})})}),e};Ue.prototype.throwUnsupportedUnitError=function(i){var e=[];throw qe(ft,function(t,n){qe(t,function(a,u){if(u=="_anchors")return!1;e=e.concat(_r(a))})}),new Error("Unsupported unit "+i+", use one of: "+e.join(", "))};Ue.prototype.possibilities=function(i){var e=[];return!this.origin&&!i?qe(_r(ft),function(t){qe(ft[t],function(n,a){if(a=="_anchors")return!1;e=e.concat(_r(n))})}):(i=i||this.origin.measure,qe(ft[i],function(t,n){if(n=="_anchors")return!1;e=e.concat(_r(t))})),e};Ue.prototype.measures=function(){return _r(ft)};vu=function(i){return new Ue(i)};du.exports=vu});var wu=O((K2,Su)=>{"use strict";var{makeRecipe:nf}=nt(),sf=nf(["grammar",{source:`Datetime {\r
  Expression\r
    = Addition\r
    | Subtraction\r
    | TimeUnitUntilDate\r
    | TimeUnitSinceDate\r
    | Primitive\r
\r
  Addition\r
    = Primitive add Timespan\r
\r
  Subtraction\r
    = Primitive subtract Timespan\r
  \r
  Primitive\r
    = Datetime\r
    | Now\r
    | Today\r
    | Tomorrow\r
    | Yesterday\r
    | NextDayOfWeek\r
    | LastDayOfWeek\r
\r
  Timespan\r
    = number unitsOfTime\r
\r
  Now \r
    = now\r
\r
  Today \r
    = today\r
\r
  Tomorrow \r
    = tomorrow\r
\r
  Yesterday \r
    = yesterday\r
  \r
  // e.g. 1/10/23 or 01.10.2023\r
  Datetime \r
  	= datetimeIso8601\r
    | datetimeFormatEuropeanOrUs\r
  \r
  // e.g. Next Monday\r
  NextDayOfWeek\r
    = caseInsensitive<"next"> dayOfWeek\r
  \r
  // e.g. Last Tuesday\r
  LastDayOfWeek\r
    = caseInsensitive<"last"> dayOfWeek\r
    \r
  TimeUnitUntilDate\r
  	= (year | month | week | day) until Datetime\r
    \r
  TimeUnitSinceDate\r
  	= (year | month | week | day) since Datetime\r
\r
  // Lexical Rules\r
  oneDigit\r
    = digit\r
\r
  twoDigit \r
    = digit digit\r
  \r
  fourDigit\r
    = digit digit digit digit\r
\r
  time\r
    =  (twoDigit | oneDigit) ":" (twoDigit | oneDigit) ":" (twoDigit | oneDigit)\r
\r
  datetimeIso8601\r
    = fourDigit "-" twoDigit "-" twoDigit "T"? (twoDigit ":" twoDigit ":" twoDigit)? ("." digit+)? ("Z" | timeZone)?\r
\r
  datetimeFormatEuropeanOrUs\r
    = (twoDigit | oneDigit) "/" (twoDigit | oneDigit) "/" (fourDigit | twoDigit) time?\r
    | (twoDigit | oneDigit) "-" (twoDigit | oneDigit) "-" (fourDigit | twoDigit) time?\r
    | (twoDigit | oneDigit) "." (twoDigit | oneDigit) "." (fourDigit | twoDigit) time?\r
    \r
  timeZone\r
 	 = "+" digit+ ":" digit+\r
 	 | "-" digit+ ":" digit+\r
\r
  add \r
  	= "+"\r
  	| caseInsensitive<"add">\r
    | caseInsensitive<"plus">\r
\r
  subtract \r
    = "-"\r
    | caseInsensitive<"take">\r
    | caseInsensitive<"minus">\r
    | caseInsensitive<"subtract">\r
\r
  now\r
    = caseInsensitive<"now">\r
\r
  today\r
    = caseInsensitive<"today">\r
\r
  tomorrow\r
    = caseInsensitive<"tomorrow">\r
\r
  yesterday\r
    = caseInsensitive<"yesterday">\r
\r
  dayOfWeek\r
    = monday\r
    | tuesday\r
    | wednesday\r
    | thursday\r
    | friday\r
    | saturday\r
    | sunday\r
\r
  monday\r
    = caseInsensitive<"monday">\r
\r
  tuesday\r
    = caseInsensitive<"tuesday">\r
\r
  wednesday\r
    = caseInsensitive<"wednesday">\r
\r
  thursday\r
    = caseInsensitive<"thursday">\r
  \r
  friday\r
    = caseInsensitive<"friday">\r
\r
  saturday\r
    = caseInsensitive<"saturday">\r
\r
  sunday\r
    = caseInsensitive<"sunday">\r
\r
  unitsOfTime\r
    = year\r
    | month\r
    | week\r
    | day\r
    | hour\r
    | minute\r
    | second\r
    | millisecond\r
\r
  year\r
    = caseInsensitive<"years">\r
    | caseInsensitive<"year">\r
    | "y"\r
\r
  month\r
    = caseInsensitive<"months">\r
    | caseInsensitive<"month">\r
    | "M"\r
\r
  week\r
    = caseInsensitive<"weeks">\r
    | caseInsensitive<"week">\r
    | "w"\r
\r
  day\r
    = caseInsensitive<"days">\r
    | caseInsensitive<"day">\r
    | "d"\r
\r
  hour\r
    = caseInsensitive<"hours">\r
    | caseInsensitive<"hour">\r
    | "h"\r
\r
  minute\r
    = caseInsensitive<"minutes">\r
    | caseInsensitive<"minute">\r
    | "m"\r
    \r
  second\r
    = caseInsensitive<"seconds">\r
    | caseInsensitive<"second">\r
    | "s"\r
\r
  millisecond\r
    = caseInsensitive<"milliseconds">\r
    | caseInsensitive<"millisecond">\r
    | "ms"\r
    \r
  until\r
  	= "until"\r
    | "before"\r
    \r
  since\r
  	= "since"\r
    | "after"\r
\r
  number\r
    = digit* "." digit+  -- fract\r
    | digit+             -- whole\r
    \r
  integer\r
  	= digit+\r
}`},"Datetime",null,"Expression",{Expression:["define",{sourceInterval:[14,126]},null,[],["alt",{sourceInterval:[32,126]},["app",{sourceInterval:[32,40]},"Addition",[]],["app",{sourceInterval:[48,59]},"Subtraction",[]],["app",{sourceInterval:[67,84]},"TimeUnitUntilDate",[]],["app",{sourceInterval:[92,109]},"TimeUnitSinceDate",[]],["app",{sourceInterval:[117,126]},"Primitive",[]]]],Addition:["define",{sourceInterval:[132,170]},null,[],["seq",{sourceInterval:[148,170]},["app",{sourceInterval:[148,157]},"Primitive",[]],["app",{sourceInterval:[158,161]},"add",[]],["app",{sourceInterval:[162,170]},"Timespan",[]]]],Subtraction:["define",{sourceInterval:[176,222]},null,[],["seq",{sourceInterval:[195,222]},["app",{sourceInterval:[195,204]},"Primitive",[]],["app",{sourceInterval:[205,213]},"subtract",[]],["app",{sourceInterval:[214,222]},"Timespan",[]]]],Primitive:["define",{sourceInterval:[230,354]},null,[],["alt",{sourceInterval:[247,354]},["app",{sourceInterval:[247,255]},"Datetime",[]],["app",{sourceInterval:[263,266]},"Now",[]],["app",{sourceInterval:[274,279]},"Today",[]],["app",{sourceInterval:[287,295]},"Tomorrow",[]],["app",{sourceInterval:[303,312]},"Yesterday",[]],["app",{sourceInterval:[320,333]},"NextDayOfWeek",[]],["app",{sourceInterval:[341,354]},"LastDayOfWeek",[]]]],Timespan:["define",{sourceInterval:[360,394]},null,[],["seq",{sourceInterval:[376,394]},["app",{sourceInterval:[376,382]},"number",[]],["app",{sourceInterval:[383,394]},"unitsOfTime",[]]]],Now:["define",{sourceInterval:[400,415]},null,[],["app",{sourceInterval:[412,415]},"now",[]]],Today:["define",{sourceInterval:[421,440]},null,[],["app",{sourceInterval:[435,440]},"today",[]]],Tomorrow:["define",{sourceInterval:[446,471]},null,[],["app",{sourceInterval:[463,471]},"tomorrow",[]]],Yesterday:["define",{sourceInterval:[477,504]},null,[],["app",{sourceInterval:[495,504]},"yesterday",[]]],Datetime:["define",{sourceInterval:[545,610]},null,[],["alt",{sourceInterval:[561,610]},["app",{sourceInterval:[561,576]},"datetimeIso8601",[]],["app",{sourceInterval:[584,610]},"datetimeFormatEuropeanOrUs",[]]]],NextDayOfWeek:["define",{sourceInterval:[641,695]},null,[],["seq",{sourceInterval:[662,695]},["app",{sourceInterval:[662,685]},"caseInsensitive",[["terminal",{sourceInterval:[678,684]},"next"]]],["app",{sourceInterval:[686,695]},"dayOfWeek",[]]]],LastDayOfWeek:["define",{sourceInterval:[727,781]},null,[],["seq",{sourceInterval:[748,781]},["app",{sourceInterval:[748,771]},"caseInsensitive",[["terminal",{sourceInterval:[764,770]},"last"]]],["app",{sourceInterval:[772,781]},"dayOfWeek",[]]]],TimeUnitUntilDate:["define",{sourceInterval:[791,857]},null,[],["seq",{sourceInterval:[815,857]},["alt",{sourceInterval:[816,841]},["app",{sourceInterval:[816,820]},"year",[]],["app",{sourceInterval:[823,828]},"month",[]],["app",{sourceInterval:[831,835]},"week",[]],["app",{sourceInterval:[838,841]},"day",[]]],["app",{sourceInterval:[843,848]},"until",[]],["app",{sourceInterval:[849,857]},"Datetime",[]]]],TimeUnitSinceDate:["define",{sourceInterval:[867,933]},null,[],["seq",{sourceInterval:[891,933]},["alt",{sourceInterval:[892,917]},["app",{sourceInterval:[892,896]},"year",[]],["app",{sourceInterval:[899,904]},"month",[]],["app",{sourceInterval:[907,911]},"week",[]],["app",{sourceInterval:[914,917]},"day",[]]],["app",{sourceInterval:[919,924]},"since",[]],["app",{sourceInterval:[925,933]},"Datetime",[]]]],oneDigit:["define",{sourceInterval:[959,980]},null,[],["app",{sourceInterval:[975,980]},"digit",[]]],twoDigit:["define",{sourceInterval:[986,1014]},null,[],["seq",{sourceInterval:[1003,1014]},["app",{sourceInterval:[1003,1008]},"digit",[]],["app",{sourceInterval:[1009,1014]},"digit",[]]]],fourDigit:["define",{sourceInterval:[1022,1062]},null,[],["seq",{sourceInterval:[1039,1062]},["app",{sourceInterval:[1039,1044]},"digit",[]],["app",{sourceInterval:[1045,1050]},"digit",[]],["app",{sourceInterval:[1051,1056]},"digit",[]],["app",{sourceInterval:[1057,1062]},"digit",[]]]],time:["define",{sourceInterval:[1068,1154]},null,[],["seq",{sourceInterval:[1081,1154]},["alt",{sourceInterval:[1082,1101]},["app",{sourceInterval:[1082,1090]},"twoDigit",[]],["app",{sourceInterval:[1093,1101]},"oneDigit",[]]],["terminal",{sourceInterval:[1103,1106]},":"],["alt",{sourceInterval:[1108,1127]},["app",{sourceInterval:[1108,1116]},"twoDigit",[]],["app",{sourceInterval:[1119,1127]},"oneDigit",[]]],["terminal",{sourceInterval:[1129,1132]},":"],["alt",{sourceInterval:[1134,1153]},["app",{sourceInterval:[1134,1142]},"twoDigit",[]],["app",{sourceInterval:[1145,1153]},"oneDigit",[]]]]],datetimeIso8601:["define",{sourceInterval:[1160,1293]},null,[],["seq",{sourceInterval:[1183,1293]},["app",{sourceInterval:[1183,1192]},"fourDigit",[]],["terminal",{sourceInterval:[1193,1196]},"-"],["app",{sourceInterval:[1197,1205]},"twoDigit",[]],["terminal",{sourceInterval:[1206,1209]},"-"],["app",{sourceInterval:[1210,1218]},"twoDigit",[]],["opt",{sourceInterval:[1219,1223]},["terminal",{sourceInterval:[1219,1222]},"T"]],["opt",{sourceInterval:[1224,1261]},["seq",{sourceInterval:[1225,1259]},["app",{sourceInterval:[1225,1233]},"twoDigit",[]],["terminal",{sourceInterval:[1234,1237]},":"],["app",{sourceInterval:[1238,1246]},"twoDigit",[]],["terminal",{sourceInterval:[1247,1250]},":"],["app",{sourceInterval:[1251,1259]},"twoDigit",[]]]],["opt",{sourceInterval:[1262,1275]},["seq",{sourceInterval:[1263,1273]},["terminal",{sourceInterval:[1263,1266]},"."],["plus",{sourceInterval:[1267,1273]},["app",{sourceInterval:[1267,1272]},"digit",[]]]]],["opt",{sourceInterval:[1276,1293]},["alt",{sourceInterval:[1277,1291]},["terminal",{sourceInterval:[1277,1280]},"Z"],["app",{sourceInterval:[1283,1291]},"timeZone",[]]]]]],datetimeFormatEuropeanOrUs:["define",{sourceInterval:[1299,1589]},null,[],["alt",{sourceInterval:[1333,1589]},["seq",{sourceInterval:[1333,1413]},["alt",{sourceInterval:[1334,1353]},["app",{sourceInterval:[1334,1342]},"twoDigit",[]],["app",{sourceInterval:[1345,1353]},"oneDigit",[]]],["terminal",{sourceInterval:[1355,1358]},"/"],["alt",{sourceInterval:[1360,1379]},["app",{sourceInterval:[1360,1368]},"twoDigit",[]],["app",{sourceInterval:[1371,1379]},"oneDigit",[]]],["terminal",{sourceInterval:[1381,1384]},"/"],["alt",{sourceInterval:[1386,1406]},["app",{sourceInterval:[1386,1395]},"fourDigit",[]],["app",{sourceInterval:[1398,1406]},"twoDigit",[]]],["opt",{sourceInterval:[1408,1413]},["app",{sourceInterval:[1408,1412]},"time",[]]]],["seq",{sourceInterval:[1421,1501]},["alt",{sourceInterval:[1422,1441]},["app",{sourceInterval:[1422,1430]},"twoDigit",[]],["app",{sourceInterval:[1433,1441]},"oneDigit",[]]],["terminal",{sourceInterval:[1443,1446]},"-"],["alt",{sourceInterval:[1448,1467]},["app",{sourceInterval:[1448,1456]},"twoDigit",[]],["app",{sourceInterval:[1459,1467]},"oneDigit",[]]],["terminal",{sourceInterval:[1469,1472]},"-"],["alt",{sourceInterval:[1474,1494]},["app",{sourceInterval:[1474,1483]},"fourDigit",[]],["app",{sourceInterval:[1486,1494]},"twoDigit",[]]],["opt",{sourceInterval:[1496,1501]},["app",{sourceInterval:[1496,1500]},"time",[]]]],["seq",{sourceInterval:[1509,1589]},["alt",{sourceInterval:[1510,1529]},["app",{sourceInterval:[1510,1518]},"twoDigit",[]],["app",{sourceInterval:[1521,1529]},"oneDigit",[]]],["terminal",{sourceInterval:[1531,1534]},"."],["alt",{sourceInterval:[1536,1555]},["app",{sourceInterval:[1536,1544]},"twoDigit",[]],["app",{sourceInterval:[1547,1555]},"oneDigit",[]]],["terminal",{sourceInterval:[1557,1560]},"."],["alt",{sourceInterval:[1562,1582]},["app",{sourceInterval:[1562,1571]},"fourDigit",[]],["app",{sourceInterval:[1574,1582]},"twoDigit",[]]],["opt",{sourceInterval:[1584,1589]},["app",{sourceInterval:[1584,1588]},"time",[]]]]]],timeZone:["define",{sourceInterval:[1599,1663]},null,[],["alt",{sourceInterval:[1614,1663]},["seq",{sourceInterval:[1614,1635]},["terminal",{sourceInterval:[1614,1617]},"+"],["plus",{sourceInterval:[1618,1624]},["app",{sourceInterval:[1618,1623]},"digit",[]]],["terminal",{sourceInterval:[1625,1628]},":"],["plus",{sourceInterval:[1629,1635]},["app",{sourceInterval:[1629,1634]},"digit",[]]]],["seq",{sourceInterval:[1642,1663]},["terminal",{sourceInterval:[1642,1645]},"-"],["plus",{sourceInterval:[1646,1652]},["app",{sourceInterval:[1646,1651]},"digit",[]]],["terminal",{sourceInterval:[1653,1656]},":"],["plus",{sourceInterval:[1657,1663]},["app",{sourceInterval:[1657,1662]},"digit",[]]]]]],add:["define",{sourceInterval:[1669,1743]},null,[],["alt",{sourceInterval:[1680,1743]},["terminal",{sourceInterval:[1680,1683]},"+"],["app",{sourceInterval:[1690,1712]},"caseInsensitive",[["terminal",{sourceInterval:[1706,1711]},"add"]]],["app",{sourceInterval:[1720,1743]},"caseInsensitive",[["terminal",{sourceInterval:[1736,1742]},"plus"]]]]],subtract:["define",{sourceInterval:[1749,1867]},null,[],["alt",{sourceInterval:[1766,1867]},["terminal",{sourceInterval:[1766,1769]},"-"],["app",{sourceInterval:[1777,1800]},"caseInsensitive",[["terminal",{sourceInterval:[1793,1799]},"take"]]],["app",{sourceInterval:[1808,1832]},"caseInsensitive",[["terminal",{sourceInterval:[1824,1831]},"minus"]]],["app",{sourceInterval:[1840,1867]},"caseInsensitive",[["terminal",{sourceInterval:[1856,1866]},"subtract"]]]]],now:["define",{sourceInterval:[1873,1906]},null,[],["app",{sourceInterval:[1884,1906]},"caseInsensitive",[["terminal",{sourceInterval:[1900,1905]},"now"]]]],today:["define",{sourceInterval:[1912,1949]},null,[],["app",{sourceInterval:[1925,1949]},"caseInsensitive",[["terminal",{sourceInterval:[1941,1948]},"today"]]]],tomorrow:["define",{sourceInterval:[1955,1998]},null,[],["app",{sourceInterval:[1971,1998]},"caseInsensitive",[["terminal",{sourceInterval:[1987,1997]},"tomorrow"]]]],yesterday:["define",{sourceInterval:[2004,2049]},null,[],["app",{sourceInterval:[2021,2049]},"caseInsensitive",[["terminal",{sourceInterval:[2037,2048]},"yesterday"]]]],dayOfWeek:["define",{sourceInterval:[2055,2170]},null,[],["alt",{sourceInterval:[2072,2170]},["app",{sourceInterval:[2072,2078]},"monday",[]],["app",{sourceInterval:[2086,2093]},"tuesday",[]],["app",{sourceInterval:[2101,2110]},"wednesday",[]],["app",{sourceInterval:[2118,2126]},"thursday",[]],["app",{sourceInterval:[2134,2140]},"friday",[]],["app",{sourceInterval:[2148,2156]},"saturday",[]],["app",{sourceInterval:[2164,2170]},"sunday",[]]]],monday:["define",{sourceInterval:[2176,2215]},null,[],["app",{sourceInterval:[2190,2215]},"caseInsensitive",[["terminal",{sourceInterval:[2206,2214]},"monday"]]]],tuesday:["define",{sourceInterval:[2221,2262]},null,[],["app",{sourceInterval:[2236,2262]},"caseInsensitive",[["terminal",{sourceInterval:[2252,2261]},"tuesday"]]]],wednesday:["define",{sourceInterval:[2268,2313]},null,[],["app",{sourceInterval:[2285,2313]},"caseInsensitive",[["terminal",{sourceInterval:[2301,2312]},"wednesday"]]]],thursday:["define",{sourceInterval:[2319,2362]},null,[],["app",{sourceInterval:[2335,2362]},"caseInsensitive",[["terminal",{sourceInterval:[2351,2361]},"thursday"]]]],friday:["define",{sourceInterval:[2370,2409]},null,[],["app",{sourceInterval:[2384,2409]},"caseInsensitive",[["terminal",{sourceInterval:[2400,2408]},"friday"]]]],saturday:["define",{sourceInterval:[2415,2458]},null,[],["app",{sourceInterval:[2431,2458]},"caseInsensitive",[["terminal",{sourceInterval:[2447,2457]},"saturday"]]]],sunday:["define",{sourceInterval:[2464,2503]},null,[],["app",{sourceInterval:[2478,2503]},"caseInsensitive",[["terminal",{sourceInterval:[2494,2502]},"sunday"]]]],unitsOfTime:["define",{sourceInterval:[2509,2627]},null,[],["alt",{sourceInterval:[2528,2627]},["app",{sourceInterval:[2528,2532]},"year",[]],["app",{sourceInterval:[2540,2545]},"month",[]],["app",{sourceInterval:[2553,2557]},"week",[]],["app",{sourceInterval:[2565,2568]},"day",[]],["app",{sourceInterval:[2576,2580]},"hour",[]],["app",{sourceInterval:[2588,2594]},"minute",[]],["app",{sourceInterval:[2602,2608]},"second",[]],["app",{sourceInterval:[2616,2627]},"millisecond",[]]]],year:["define",{sourceInterval:[2633,2711]},null,[],["alt",{sourceInterval:[2645,2711]},["app",{sourceInterval:[2645,2669]},"caseInsensitive",[["terminal",{sourceInterval:[2661,2668]},"years"]]],["app",{sourceInterval:[2677,2700]},"caseInsensitive",[["terminal",{sourceInterval:[2693,2699]},"year"]]],["terminal",{sourceInterval:[2708,2711]},"y"]]],month:["define",{sourceInterval:[2717,2798]},null,[],["alt",{sourceInterval:[2730,2798]},["app",{sourceInterval:[2730,2755]},"caseInsensitive",[["terminal",{sourceInterval:[2746,2754]},"months"]]],["app",{sourceInterval:[2763,2787]},"caseInsensitive",[["terminal",{sourceInterval:[2779,2786]},"month"]]],["terminal",{sourceInterval:[2795,2798]},"M"]]],week:["define",{sourceInterval:[2804,2882]},null,[],["alt",{sourceInterval:[2816,2882]},["app",{sourceInterval:[2816,2840]},"caseInsensitive",[["terminal",{sourceInterval:[2832,2839]},"weeks"]]],["app",{sourceInterval:[2848,2871]},"caseInsensitive",[["terminal",{sourceInterval:[2864,2870]},"week"]]],["terminal",{sourceInterval:[2879,2882]},"w"]]],day:["define",{sourceInterval:[2888,2963]},null,[],["alt",{sourceInterval:[2899,2963]},["app",{sourceInterval:[2899,2922]},"caseInsensitive",[["terminal",{sourceInterval:[2915,2921]},"days"]]],["app",{sourceInterval:[2930,2952]},"caseInsensitive",[["terminal",{sourceInterval:[2946,2951]},"day"]]],["terminal",{sourceInterval:[2960,2963]},"d"]]],hour:["define",{sourceInterval:[2969,3047]},null,[],["alt",{sourceInterval:[2981,3047]},["app",{sourceInterval:[2981,3005]},"caseInsensitive",[["terminal",{sourceInterval:[2997,3004]},"hours"]]],["app",{sourceInterval:[3013,3036]},"caseInsensitive",[["terminal",{sourceInterval:[3029,3035]},"hour"]]],["terminal",{sourceInterval:[3044,3047]},"h"]]],minute:["define",{sourceInterval:[3053,3137]},null,[],["alt",{sourceInterval:[3067,3137]},["app",{sourceInterval:[3067,3093]},"caseInsensitive",[["terminal",{sourceInterval:[3083,3092]},"minutes"]]],["app",{sourceInterval:[3101,3126]},"caseInsensitive",[["terminal",{sourceInterval:[3117,3125]},"minute"]]],["terminal",{sourceInterval:[3134,3137]},"m"]]],second:["define",{sourceInterval:[3147,3231]},null,[],["alt",{sourceInterval:[3161,3231]},["app",{sourceInterval:[3161,3187]},"caseInsensitive",[["terminal",{sourceInterval:[3177,3186]},"seconds"]]],["app",{sourceInterval:[3195,3220]},"caseInsensitive",[["terminal",{sourceInterval:[3211,3219]},"second"]]],["terminal",{sourceInterval:[3228,3231]},"s"]]],millisecond:["define",{sourceInterval:[3237,3337]},null,[],["alt",{sourceInterval:[3256,3337]},["app",{sourceInterval:[3256,3287]},"caseInsensitive",[["terminal",{sourceInterval:[3272,3286]},"milliseconds"]]],["app",{sourceInterval:[3295,3325]},"caseInsensitive",[["terminal",{sourceInterval:[3311,3324]},"millisecond"]]],["terminal",{sourceInterval:[3333,3337]},"ms"]]],until:["define",{sourceInterval:[3347,3382]},null,[],["alt",{sourceInterval:[3359,3382]},["terminal",{sourceInterval:[3359,3366]},"until"],["terminal",{sourceInterval:[3374,3382]},"before"]]],since:["define",{sourceInterval:[3392,3426]},null,[],["alt",{sourceInterval:[3404,3426]},["terminal",{sourceInterval:[3404,3411]},"since"],["terminal",{sourceInterval:[3419,3426]},"after"]]],number_fract:["define",{sourceInterval:[3446,3473]},null,[],["seq",{sourceInterval:[3446,3463]},["star",{sourceInterval:[3446,3452]},["app",{sourceInterval:[3446,3451]},"digit",[]]],["terminal",{sourceInterval:[3453,3456]},"."],["plus",{sourceInterval:[3457,3463]},["app",{sourceInterval:[3457,3462]},"digit",[]]]]],number_whole:["define",{sourceInterval:[3481,3508]},null,[],["plus",{sourceInterval:[3481,3487]},["app",{sourceInterval:[3481,3486]},"digit",[]]]],number:["define",{sourceInterval:[3432,3508]},null,[],["alt",{sourceInterval:[3446,3508]},["app",{sourceInterval:[3446,3463]},"number_fract",[]],["app",{sourceInterval:[3481,3487]},"number_whole",[]]]],integer:["define",{sourceInterval:[3518,3538]},null,[],["plus",{sourceInterval:[3532,3538]},["app",{sourceInterval:[3532,3537]},"digit",[]]]]}]);Su.exports=sf});var Du=O((i0,Ru)=>{"use strict";var{makeRecipe:af}=nt(),of=af(["grammar",{source:`Dice {\r
  Expression = Roll\r
\r
  /*\r
    Patterns Examples:\r
    roll(0, 7)\r
    roll between 1 and 4\r
    roll from 2 to 6\r
    roll 4-8\r
  */\r
  Roll\r
    = caseInsensitive<"roll"> rollOpen? Primitive rollSeperator? Primitive rollEnd?\r
\r
  Primitive\r
    = "+" Primitive -- positive\r
    | "-" Primitive -- negative\r
    | number\r
\r
  rollOpen \r
    = "("\r
    | caseInsensitive<"between">\r
    | caseInsensitive<"from">\r
\r
  rollSeperator\r
    = ","\r
    | "-"\r
    | caseInsensitive<"and">\r
    | caseInsensitive<"to">\r
\r
  rollEnd\r
    = ")"\r
\r
  number\r
    = digit* "." digit+  -- fract\r
    | digit+             -- whole\r
}`},"Dice",null,"Expression",{Expression:["define",{sourceInterval:[10,27]},null,[],["app",{sourceInterval:[23,27]},"Roll",[]]],Roll:["define",{sourceInterval:[147,236]},null,[],["seq",{sourceInterval:[159,236]},["app",{sourceInterval:[159,182]},"caseInsensitive",[["terminal",{sourceInterval:[175,181]},"roll"]]],["opt",{sourceInterval:[183,192]},["app",{sourceInterval:[183,191]},"rollOpen",[]]],["app",{sourceInterval:[193,202]},"Primitive",[]],["opt",{sourceInterval:[203,217]},["app",{sourceInterval:[203,216]},"rollSeperator",[]]],["app",{sourceInterval:[218,227]},"Primitive",[]],["opt",{sourceInterval:[228,236]},["app",{sourceInterval:[228,235]},"rollEnd",[]]]]],Primitive_positive:["define",{sourceInterval:[259,284]},null,[],["seq",{sourceInterval:[259,272]},["terminal",{sourceInterval:[259,262]},"+"],["app",{sourceInterval:[263,272]},"Primitive",[]]]],Primitive_negative:["define",{sourceInterval:[292,317]},null,[],["seq",{sourceInterval:[292,305]},["terminal",{sourceInterval:[292,295]},"-"],["app",{sourceInterval:[296,305]},"Primitive",[]]]],Primitive:["define",{sourceInterval:[242,331]},null,[],["alt",{sourceInterval:[259,331]},["app",{sourceInterval:[259,272]},"Primitive_positive",[]],["app",{sourceInterval:[292,305]},"Primitive_negative",[]],["app",{sourceInterval:[325,331]},"number",[]]]],rollOpen:["define",{sourceInterval:[337,422]},null,[],["alt",{sourceInterval:[354,422]},["terminal",{sourceInterval:[354,357]},"("],["app",{sourceInterval:[365,391]},"caseInsensitive",[["terminal",{sourceInterval:[381,390]},"between"]]],["app",{sourceInterval:[399,422]},"caseInsensitive",[["terminal",{sourceInterval:[415,421]},"from"]]]]],rollSeperator:["define",{sourceInterval:[428,522]},null,[],["alt",{sourceInterval:[449,522]},["terminal",{sourceInterval:[449,452]},","],["terminal",{sourceInterval:[460,463]},"-"],["app",{sourceInterval:[471,493]},"caseInsensitive",[["terminal",{sourceInterval:[487,492]},"and"]]],["app",{sourceInterval:[501,522]},"caseInsensitive",[["terminal",{sourceInterval:[517,521]},"to"]]]]],rollEnd:["define",{sourceInterval:[528,546]},null,[],["terminal",{sourceInterval:[543,546]},")"]],number_fract:["define",{sourceInterval:[566,593]},null,[],["seq",{sourceInterval:[566,583]},["star",{sourceInterval:[566,572]},["app",{sourceInterval:[566,571]},"digit",[]]],["terminal",{sourceInterval:[573,576]},"."],["plus",{sourceInterval:[577,583]},["app",{sourceInterval:[577,582]},"digit",[]]]]],number_whole:["define",{sourceInterval:[601,628]},null,[],["plus",{sourceInterval:[601,607]},["app",{sourceInterval:[601,606]},"digit",[]]]],number:["define",{sourceInterval:[552,628]},null,[],["alt",{sourceInterval:[566,628]},["app",{sourceInterval:[566,583]},"number_fract",[]],["app",{sourceInterval:[601,607]},"number_whole",[]]]]}]);Ru.exports=of});var Au=O((v0,Pu)=>{"use strict";var{makeRecipe:Mu}=nt(),Vn={};Vn.BasicArithmetic=Mu(["grammar",{source:`BasicArithmetic {\r
  Expression\r
    = LogicalShift\r
\r
  LogicalShift\r
    = LogicalShift "<<" LogicalShift -- left\r
    | LogicalShift ">>" LogicalShift -- right\r
    | AS \r
\r
  // Addition or Subtraction\r
  AS\r
    = AS add MD  -- addition\r
    | AS subtract MD  -- subtraction\r
    | MD\r
\r
  // Multiply or Divide\r
  MD\r
    = MD multiply E  -- multiplication\r
    | MD divide E  -- division\r
    | MD modulo E  -- modulo\r
    | E\r
\r
  // Exponent\r
  E\r
    = P exponent E  -- exponent\r
    | P\r
\r
  // Parenthesis\r
  P\r
    = "(" Expression ")"  -- parenthesis\r
    | Primitive\r
    \r
  Primitive\r
    = "+" Primitive -- positive\r
    | "-" Primitive -- negative\r
    | constant\r
    | hex\r
    | number\r
 \r
  // Lexical Rules\r
  add \r
  	= "+"\r
    | caseInsensitive<"plus">\r
  	| caseInsensitive<"add">\r
    | caseInsensitive<"and">\r
    \r
  subtract \r
    = "-"\r
    | caseInsensitive<"minus">\r
    | caseInsensitive<"subtract">\r
    | caseInsensitive<"remove">\r
    | caseInsensitive<"take">\r
      \r
  multiply \r
    = "*"\r
    | "\\\\*" // Escaped e.g. \\* for markdown\r
    | "\\u{00D7}" // Multiplication Symbol \xD7\r
    | caseInsensitive<"x">\r
    | caseInsensitive<"times by">\r
    | caseInsensitive<"times">\r
    | caseInsensitive<"multiply by">\r
    | caseInsensitive<"multiply">\r
      \r
  divide\r
    = "/"\r
    | "\\u{00F7}" // Division Symbol \xF7\r
    | caseInsensitive<"divide by">\r
    | caseInsensitive<"divide">\r
\r
  modulo\r
    = "%"\r
    | caseInsensitive<"modulo">\r
    | caseInsensitive<"mod">\r
\r
  exponent\r
    = "^"\r
    | caseInsensitive<"to the power of">\r
    | caseInsensitive<"power of">\r
    | caseInsensitive<"exponent">\r
    | caseInsensitive<"prime">\r
\r
  constant  \r
  	= caseInsensitive<"PI"> \r
    | caseInsensitive<"E">\r
\r
  number\r
    = digit* "." digit+  -- fract\r
    | digit+             -- whole\r
  \r
  hex\r
    = "0x" hexDigit+\r
    | hexDigit+ "h"\r
}`},"BasicArithmetic",null,"Expression",{Expression:["define",{sourceInterval:[21,51]},null,[],["app",{sourceInterval:[39,51]},"LogicalShift",[]]],LogicalShift_left:["define",{sourceInterval:[77,115]},null,[],["seq",{sourceInterval:[77,107]},["app",{sourceInterval:[77,89]},"LogicalShift",[]],["terminal",{sourceInterval:[90,94]},"<<"],["app",{sourceInterval:[95,107]},"LogicalShift",[]]]],LogicalShift_right:["define",{sourceInterval:[123,162]},null,[],["seq",{sourceInterval:[123,153]},["app",{sourceInterval:[123,135]},"LogicalShift",[]],["terminal",{sourceInterval:[136,140]},">>"],["app",{sourceInterval:[141,153]},"LogicalShift",[]]]],LogicalShift:["define",{sourceInterval:[57,172]},null,[],["alt",{sourceInterval:[77,172]},["app",{sourceInterval:[77,107]},"LogicalShift_left",[]],["app",{sourceInterval:[123,153]},"LogicalShift_right",[]],["app",{sourceInterval:[170,172]},"AS",[]]]],AS_addition:["define",{sourceInterval:[219,241]},null,[],["seq",{sourceInterval:[219,228]},["app",{sourceInterval:[219,221]},"AS",[]],["app",{sourceInterval:[222,225]},"add",[]],["app",{sourceInterval:[226,228]},"MD",[]]]],AS_subtraction:["define",{sourceInterval:[249,279]},null,[],["seq",{sourceInterval:[249,263]},["app",{sourceInterval:[249,251]},"AS",[]],["app",{sourceInterval:[252,260]},"subtract",[]],["app",{sourceInterval:[261,263]},"MD",[]]]],AS:["define",{sourceInterval:[209,289]},null,[],["alt",{sourceInterval:[219,289]},["app",{sourceInterval:[219,228]},"AS_addition",[]],["app",{sourceInterval:[249,263]},"AS_subtraction",[]],["app",{sourceInterval:[287,289]},"MD",[]]]],MD_multiplication:["define",{sourceInterval:[330,362]},null,[],["seq",{sourceInterval:[330,343]},["app",{sourceInterval:[330,332]},"MD",[]],["app",{sourceInterval:[333,341]},"multiply",[]],["app",{sourceInterval:[342,343]},"E",[]]]],MD_division:["define",{sourceInterval:[370,394]},null,[],["seq",{sourceInterval:[370,381]},["app",{sourceInterval:[370,372]},"MD",[]],["app",{sourceInterval:[373,379]},"divide",[]],["app",{sourceInterval:[380,381]},"E",[]]]],MD_modulo:["define",{sourceInterval:[402,424]},null,[],["seq",{sourceInterval:[402,413]},["app",{sourceInterval:[402,404]},"MD",[]],["app",{sourceInterval:[405,411]},"modulo",[]],["app",{sourceInterval:[412,413]},"E",[]]]],MD:["define",{sourceInterval:[320,433]},null,[],["alt",{sourceInterval:[330,433]},["app",{sourceInterval:[330,343]},"MD_multiplication",[]],["app",{sourceInterval:[370,381]},"MD_division",[]],["app",{sourceInterval:[402,413]},"MD_modulo",[]],["app",{sourceInterval:[432,433]},"E",[]]]],E_exponent:["define",{sourceInterval:[463,488]},null,[],["seq",{sourceInterval:[463,475]},["app",{sourceInterval:[463,464]},"P",[]],["app",{sourceInterval:[465,473]},"exponent",[]],["app",{sourceInterval:[474,475]},"E",[]]]],E:["define",{sourceInterval:[454,497]},null,[],["alt",{sourceInterval:[463,497]},["app",{sourceInterval:[463,475]},"E_exponent",[]],["app",{sourceInterval:[496,497]},"P",[]]]],P_parenthesis:["define",{sourceInterval:[530,564]},null,[],["seq",{sourceInterval:[530,548]},["terminal",{sourceInterval:[530,533]},"("],["app",{sourceInterval:[534,544]},"Expression",[]],["terminal",{sourceInterval:[545,548]},")"]]],P:["define",{sourceInterval:[521,581]},null,[],["alt",{sourceInterval:[530,581]},["app",{sourceInterval:[530,548]},"P_parenthesis",[]],["app",{sourceInterval:[572,581]},"Primitive",[]]]],Primitive_positive:["define",{sourceInterval:[608,633]},null,[],["seq",{sourceInterval:[608,621]},["terminal",{sourceInterval:[608,611]},"+"],["app",{sourceInterval:[612,621]},"Primitive",[]]]],Primitive_negative:["define",{sourceInterval:[641,666]},null,[],["seq",{sourceInterval:[641,654]},["terminal",{sourceInterval:[641,644]},"-"],["app",{sourceInterval:[645,654]},"Primitive",[]]]],Primitive:["define",{sourceInterval:[591,707]},null,[],["alt",{sourceInterval:[608,707]},["app",{sourceInterval:[608,621]},"Primitive_positive",[]],["app",{sourceInterval:[641,654]},"Primitive_negative",[]],["app",{sourceInterval:[674,682]},"constant",[]],["app",{sourceInterval:[690,693]},"hex",[]],["app",{sourceInterval:[701,707]},"number",[]]]],add:["define",{sourceInterval:[734,838]},null,[],["alt",{sourceInterval:[745,838]},["terminal",{sourceInterval:[745,748]},"+"],["app",{sourceInterval:[756,779]},"caseInsensitive",[["terminal",{sourceInterval:[772,778]},"plus"]]],["app",{sourceInterval:[786,808]},"caseInsensitive",[["terminal",{sourceInterval:[802,807]},"add"]]],["app",{sourceInterval:[816,838]},"caseInsensitive",[["terminal",{sourceInterval:[832,837]},"and"]]]]],subtract:["define",{sourceInterval:[848,999]},null,[],["alt",{sourceInterval:[865,999]},["terminal",{sourceInterval:[865,868]},"-"],["app",{sourceInterval:[876,900]},"caseInsensitive",[["terminal",{sourceInterval:[892,899]},"minus"]]],["app",{sourceInterval:[908,935]},"caseInsensitive",[["terminal",{sourceInterval:[924,934]},"subtract"]]],["app",{sourceInterval:[943,968]},"caseInsensitive",[["terminal",{sourceInterval:[959,967]},"remove"]]],["app",{sourceInterval:[976,999]},"caseInsensitive",[["terminal",{sourceInterval:[992,998]},"take"]]]]],multiply:["define",{sourceInterval:[1011,1289]},null,[],["alt",{sourceInterval:[1028,1289]},["terminal",{sourceInterval:[1028,1031]},"*"],["terminal",{sourceInterval:[1039,1044]},"\\*"],["terminal",{sourceInterval:[1084,1094]},"\xD7"],["app",{sourceInterval:[1129,1149]},"caseInsensitive",[["terminal",{sourceInterval:[1145,1148]},"x"]]],["app",{sourceInterval:[1157,1184]},"caseInsensitive",[["terminal",{sourceInterval:[1173,1183]},"times by"]]],["app",{sourceInterval:[1192,1216]},"caseInsensitive",[["terminal",{sourceInterval:[1208,1215]},"times"]]],["app",{sourceInterval:[1224,1254]},"caseInsensitive",[["terminal",{sourceInterval:[1240,1253]},"multiply by"]]],["app",{sourceInterval:[1262,1289]},"caseInsensitive",[["terminal",{sourceInterval:[1278,1288]},"multiply"]]]]],divide:["define",{sourceInterval:[1301,1426]},null,[],["alt",{sourceInterval:[1315,1426]},["terminal",{sourceInterval:[1315,1318]},"/"],["terminal",{sourceInterval:[1326,1336]},"\xF7"],["app",{sourceInterval:[1365,1393]},"caseInsensitive",[["terminal",{sourceInterval:[1381,1392]},"divide by"]]],["app",{sourceInterval:[1401,1426]},"caseInsensitive",[["terminal",{sourceInterval:[1417,1425]},"divide"]]]]],modulo:["define",{sourceInterval:[1432,1512]},null,[],["alt",{sourceInterval:[1446,1512]},["terminal",{sourceInterval:[1446,1449]},"%"],["app",{sourceInterval:[1457,1482]},"caseInsensitive",[["terminal",{sourceInterval:[1473,1481]},"modulo"]]],["app",{sourceInterval:[1490,1512]},"caseInsensitive",[["terminal",{sourceInterval:[1506,1511]},"mod"]]]]],exponent:["define",{sourceInterval:[1518,1681]},null,[],["alt",{sourceInterval:[1534,1681]},["terminal",{sourceInterval:[1534,1537]},"^"],["app",{sourceInterval:[1545,1579]},"caseInsensitive",[["terminal",{sourceInterval:[1561,1578]},"to the power of"]]],["app",{sourceInterval:[1587,1614]},"caseInsensitive",[["terminal",{sourceInterval:[1603,1613]},"power of"]]],["app",{sourceInterval:[1622,1649]},"caseInsensitive",[["terminal",{sourceInterval:[1638,1648]},"exponent"]]],["app",{sourceInterval:[1657,1681]},"caseInsensitive",[["terminal",{sourceInterval:[1673,1680]},"prime"]]]]],constant:["define",{sourceInterval:[1687,1754]},null,[],["alt",{sourceInterval:[1704,1754]},["app",{sourceInterval:[1704,1725]},"caseInsensitive",[["terminal",{sourceInterval:[1720,1724]},"PI"]]],["app",{sourceInterval:[1734,1754]},"caseInsensitive",[["terminal",{sourceInterval:[1750,1753]},"E"]]]]],number_fract:["define",{sourceInterval:[1774,1801]},null,[],["seq",{sourceInterval:[1774,1791]},["star",{sourceInterval:[1774,1780]},["app",{sourceInterval:[1774,1779]},"digit",[]]],["terminal",{sourceInterval:[1781,1784]},"."],["plus",{sourceInterval:[1785,1791]},["app",{sourceInterval:[1785,1790]},"digit",[]]]]],number_whole:["define",{sourceInterval:[1809,1836]},null,[],["plus",{sourceInterval:[1809,1815]},["app",{sourceInterval:[1809,1814]},"digit",[]]]],number:["define",{sourceInterval:[1760,1836]},null,[],["alt",{sourceInterval:[1774,1836]},["app",{sourceInterval:[1774,1791]},"number_fract",[]],["app",{sourceInterval:[1809,1815]},"number_whole",[]]]],hex:["define",{sourceInterval:[1844,1890]},null,[],["alt",{sourceInterval:[1855,1890]},["seq",{sourceInterval:[1855,1869]},["terminal",{sourceInterval:[1855,1859]},"0x"],["plus",{sourceInterval:[1860,1869]},["app",{sourceInterval:[1860,1868]},"hexDigit",[]]]],["seq",{sourceInterval:[1877,1890]},["plus",{sourceInterval:[1877,1886]},["app",{sourceInterval:[1877,1885]},"hexDigit",[]]],["terminal",{sourceInterval:[1887,1890]},"h"]]]]}]);Vn.FunctionArithmetic=Mu(["grammar",{source:`FunctionArithmetic <: BasicArithmetic {\r
  P\r
    := "(" Expression ")"  -- parenthesis\r
    | Function\r
    | Primitive\r
\r
  Function\r
    = DegreesToRadians\r
    | RadiansToDegrees\r
    | LogBase\r
    | JavascriptMathObjectFunction\r
\r
  LogBase \r
    = caseInsensitive<"logb"> "(" number "," number ")"\r
    | caseInsensitive<"logBase"> "(" number "," number ")"\r
\r
  DegreesToRadians \r
    = caseInsensitive<"degToRad"> "(" number ")"\r
    | caseInsensitive<"degreesToRadians"> "(" number ")"\r
    | caseInsensitive<"radians"> "(" number ")"\r
    | caseInsensitive<"toRadians"> "(" number ")"\r
\r
  RadiansToDegrees \r
    = caseInsensitive<"radToDeg"> "(" number ")"\r
    | caseInsensitive<"radiansToDegrees"> "(" number ")"\r
    | caseInsensitive<"degrees"> "(" number ")"\r
    | caseInsensitive<"toDegrees"> "(" number ")"\r
\r
  // Pass-through for Math.* functions from JS\r
  JavascriptMathObjectFunction = mathJsName "(" ListOf<Expression, ","> ")"\r
\r
  mathJsName \r
 	  = caseInsensitive<"sinh">\r
    | caseInsensitive<"sin">\r
    | caseInsensitive<"abs">\r
    | caseInsensitive<"acosh">\r
    | caseInsensitive<"acos">\r
    | caseInsensitive<"asinh">\r
    | caseInsensitive<"asin">\r
    | caseInsensitive<"atan2">\r
    | caseInsensitive<"atanh">\r
    | caseInsensitive<"atan">\r
    | caseInsensitive<"cbrt">\r
    | caseInsensitive<"ceil">\r
    | caseInsensitive<"clz32">\r
    | caseInsensitive<"cosh">\r
    | caseInsensitive<"cos">\r
    | caseInsensitive<"expm1">\r
    | caseInsensitive<"exp">\r
    | caseInsensitive<"floor">\r
    | caseInsensitive<"fround">\r
    | caseInsensitive<"hypot">\r
    | caseInsensitive<"imul">\r
    | caseInsensitive<"log10">\r
    | caseInsensitive<"log1p">\r
    | caseInsensitive<"log2">\r
    | caseInsensitive<"log">\r
    | caseInsensitive<"max">\r
    | caseInsensitive<"min">\r
    | caseInsensitive<"pow">\r
    | caseInsensitive<"random">\r
    | caseInsensitive<"round">\r
    | caseInsensitive<"sign">\r
    | caseInsensitive<"sqrt">\r
    | caseInsensitive<"tanh">\r
    | caseInsensitive<"tan">\r
    | caseInsensitive<"trunc">\r
}`},"FunctionArithmetic",Vn.BasicArithmetic,"Expression",{P_parenthesis:["override",{sourceInterval:[53,87]},null,[],["seq",{sourceInterval:[53,71]},["terminal",{sourceInterval:[53,56]},"("],["app",{sourceInterval:[57,67]},"Expression",[]],["terminal",{sourceInterval:[68,71]},")"]]],P:["override",{sourceInterval:[43,120]},null,[],["alt",{sourceInterval:[53,120]},["app",{sourceInterval:[53,71]},"P_parenthesis",[]],["app",{sourceInterval:[95,103]},"Function",[]],["app",{sourceInterval:[111,120]},"Primitive",[]]]],Function:["define",{sourceInterval:[126,233]},null,[],["alt",{sourceInterval:[142,233]},["app",{sourceInterval:[142,158]},"DegreesToRadians",[]],["app",{sourceInterval:[166,182]},"RadiansToDegrees",[]],["app",{sourceInterval:[190,197]},"LogBase",[]],["app",{sourceInterval:[205,233]},"JavascriptMathObjectFunction",[]]]],LogBase:["define",{sourceInterval:[239,364]},null,[],["alt",{sourceInterval:[255,364]},["seq",{sourceInterval:[255,304]},["app",{sourceInterval:[255,278]},"caseInsensitive",[["terminal",{sourceInterval:[271,277]},"logb"]]],["terminal",{sourceInterval:[279,282]},"("],["app",{sourceInterval:[283,289]},"number",[]],["terminal",{sourceInterval:[290,293]},","],["app",{sourceInterval:[294,300]},"number",[]],["terminal",{sourceInterval:[301,304]},")"]],["seq",{sourceInterval:[312,364]},["app",{sourceInterval:[312,338]},"caseInsensitive",[["terminal",{sourceInterval:[328,337]},"logBase"]]],["terminal",{sourceInterval:[339,342]},"("],["app",{sourceInterval:[343,349]},"number",[]],["terminal",{sourceInterval:[350,353]},","],["app",{sourceInterval:[354,360]},"number",[]],["terminal",{sourceInterval:[361,364]},")"]]]],DegreesToRadians:["define",{sourceInterval:[370,595]},null,[],["alt",{sourceInterval:[395,595]},["seq",{sourceInterval:[395,437]},["app",{sourceInterval:[395,422]},"caseInsensitive",[["terminal",{sourceInterval:[411,421]},"degToRad"]]],["terminal",{sourceInterval:[423,426]},"("],["app",{sourceInterval:[427,433]},"number",[]],["terminal",{sourceInterval:[434,437]},")"]],["seq",{sourceInterval:[445,495]},["app",{sourceInterval:[445,480]},"caseInsensitive",[["terminal",{sourceInterval:[461,479]},"degreesToRadians"]]],["terminal",{sourceInterval:[481,484]},"("],["app",{sourceInterval:[485,491]},"number",[]],["terminal",{sourceInterval:[492,495]},")"]],["seq",{sourceInterval:[503,544]},["app",{sourceInterval:[503,529]},"caseInsensitive",[["terminal",{sourceInterval:[519,528]},"radians"]]],["terminal",{sourceInterval:[530,533]},"("],["app",{sourceInterval:[534,540]},"number",[]],["terminal",{sourceInterval:[541,544]},")"]],["seq",{sourceInterval:[552,595]},["app",{sourceInterval:[552,580]},"caseInsensitive",[["terminal",{sourceInterval:[568,579]},"toRadians"]]],["terminal",{sourceInterval:[581,584]},"("],["app",{sourceInterval:[585,591]},"number",[]],["terminal",{sourceInterval:[592,595]},")"]]]],RadiansToDegrees:["define",{sourceInterval:[601,826]},null,[],["alt",{sourceInterval:[626,826]},["seq",{sourceInterval:[626,668]},["app",{sourceInterval:[626,653]},"caseInsensitive",[["terminal",{sourceInterval:[642,652]},"radToDeg"]]],["terminal",{sourceInterval:[654,657]},"("],["app",{sourceInterval:[658,664]},"number",[]],["terminal",{sourceInterval:[665,668]},")"]],["seq",{sourceInterval:[676,726]},["app",{sourceInterval:[676,711]},"caseInsensitive",[["terminal",{sourceInterval:[692,710]},"radiansToDegrees"]]],["terminal",{sourceInterval:[712,715]},"("],["app",{sourceInterval:[716,722]},"number",[]],["terminal",{sourceInterval:[723,726]},")"]],["seq",{sourceInterval:[734,775]},["app",{sourceInterval:[734,760]},"caseInsensitive",[["terminal",{sourceInterval:[750,759]},"degrees"]]],["terminal",{sourceInterval:[761,764]},"("],["app",{sourceInterval:[765,771]},"number",[]],["terminal",{sourceInterval:[772,775]},")"]],["seq",{sourceInterval:[783,826]},["app",{sourceInterval:[783,811]},"caseInsensitive",[["terminal",{sourceInterval:[799,810]},"toDegrees"]]],["terminal",{sourceInterval:[812,815]},"("],["app",{sourceInterval:[816,822]},"number",[]],["terminal",{sourceInterval:[823,826]},")"]]]],JavascriptMathObjectFunction:["define",{sourceInterval:[880,953]},null,[],["seq",{sourceInterval:[911,953]},["app",{sourceInterval:[911,921]},"mathJsName",[]],["terminal",{sourceInterval:[922,925]},"("],["app",{sourceInterval:[926,949]},"ListOf",[["app",{sourceInterval:[933,943]},"Expression",[]],["terminal",{sourceInterval:[945,948]},","]]],["terminal",{sourceInterval:[950,953]},")"]]],mathJsName:["define",{sourceInterval:[959,2062]},null,[],["alt",{sourceInterval:[978,2062]},["app",{sourceInterval:[978,1001]},"caseInsensitive",[["terminal",{sourceInterval:[994,1e3]},"sinh"]]],["app",{sourceInterval:[1009,1031]},"caseInsensitive",[["terminal",{sourceInterval:[1025,1030]},"sin"]]],["app",{sourceInterval:[1039,1061]},"caseInsensitive",[["terminal",{sourceInterval:[1055,1060]},"abs"]]],["app",{sourceInterval:[1069,1093]},"caseInsensitive",[["terminal",{sourceInterval:[1085,1092]},"acosh"]]],["app",{sourceInterval:[1101,1124]},"caseInsensitive",[["terminal",{sourceInterval:[1117,1123]},"acos"]]],["app",{sourceInterval:[1132,1156]},"caseInsensitive",[["terminal",{sourceInterval:[1148,1155]},"asinh"]]],["app",{sourceInterval:[1164,1187]},"caseInsensitive",[["terminal",{sourceInterval:[1180,1186]},"asin"]]],["app",{sourceInterval:[1195,1219]},"caseInsensitive",[["terminal",{sourceInterval:[1211,1218]},"atan2"]]],["app",{sourceInterval:[1227,1251]},"caseInsensitive",[["terminal",{sourceInterval:[1243,1250]},"atanh"]]],["app",{sourceInterval:[1259,1282]},"caseInsensitive",[["terminal",{sourceInterval:[1275,1281]},"atan"]]],["app",{sourceInterval:[1290,1313]},"caseInsensitive",[["terminal",{sourceInterval:[1306,1312]},"cbrt"]]],["app",{sourceInterval:[1321,1344]},"caseInsensitive",[["terminal",{sourceInterval:[1337,1343]},"ceil"]]],["app",{sourceInterval:[1352,1376]},"caseInsensitive",[["terminal",{sourceInterval:[1368,1375]},"clz32"]]],["app",{sourceInterval:[1384,1407]},"caseInsensitive",[["terminal",{sourceInterval:[1400,1406]},"cosh"]]],["app",{sourceInterval:[1415,1437]},"caseInsensitive",[["terminal",{sourceInterval:[1431,1436]},"cos"]]],["app",{sourceInterval:[1445,1469]},"caseInsensitive",[["terminal",{sourceInterval:[1461,1468]},"expm1"]]],["app",{sourceInterval:[1477,1499]},"caseInsensitive",[["terminal",{sourceInterval:[1493,1498]},"exp"]]],["app",{sourceInterval:[1507,1531]},"caseInsensitive",[["terminal",{sourceInterval:[1523,1530]},"floor"]]],["app",{sourceInterval:[1539,1564]},"caseInsensitive",[["terminal",{sourceInterval:[1555,1563]},"fround"]]],["app",{sourceInterval:[1572,1596]},"caseInsensitive",[["terminal",{sourceInterval:[1588,1595]},"hypot"]]],["app",{sourceInterval:[1604,1627]},"caseInsensitive",[["terminal",{sourceInterval:[1620,1626]},"imul"]]],["app",{sourceInterval:[1635,1659]},"caseInsensitive",[["terminal",{sourceInterval:[1651,1658]},"log10"]]],["app",{sourceInterval:[1667,1691]},"caseInsensitive",[["terminal",{sourceInterval:[1683,1690]},"log1p"]]],["app",{sourceInterval:[1699,1722]},"caseInsensitive",[["terminal",{sourceInterval:[1715,1721]},"log2"]]],["app",{sourceInterval:[1730,1752]},"caseInsensitive",[["terminal",{sourceInterval:[1746,1751]},"log"]]],["app",{sourceInterval:[1760,1782]},"caseInsensitive",[["terminal",{sourceInterval:[1776,1781]},"max"]]],["app",{sourceInterval:[1790,1812]},"caseInsensitive",[["terminal",{sourceInterval:[1806,1811]},"min"]]],["app",{sourceInterval:[1820,1842]},"caseInsensitive",[["terminal",{sourceInterval:[1836,1841]},"pow"]]],["app",{sourceInterval:[1850,1875]},"caseInsensitive",[["terminal",{sourceInterval:[1866,1874]},"random"]]],["app",{sourceInterval:[1883,1907]},"caseInsensitive",[["terminal",{sourceInterval:[1899,1906]},"round"]]],["app",{sourceInterval:[1915,1938]},"caseInsensitive",[["terminal",{sourceInterval:[1931,1937]},"sign"]]],["app",{sourceInterval:[1946,1969]},"caseInsensitive",[["terminal",{sourceInterval:[1962,1968]},"sqrt"]]],["app",{sourceInterval:[1977,2e3]},"caseInsensitive",[["terminal",{sourceInterval:[1993,1999]},"tanh"]]],["app",{sourceInterval:[2008,2030]},"caseInsensitive",[["terminal",{sourceInterval:[2024,2029]},"tan"]]],["app",{sourceInterval:[2038,2062]},"caseInsensitive",[["terminal",{sourceInterval:[2054,2061]},"trunc"]]]]]}]);Pu.exports=Vn});var Lu=O((R0,ku)=>{"use strict";var{makeRecipe:Vu}=nt(),Ln={};Ln.BasicArithmetic=Vu(["grammar",{source:`BasicArithmetic {\r
  Expression\r
    = LogicalShift\r
\r
  LogicalShift\r
    = LogicalShift "<<" LogicalShift -- left\r
    | LogicalShift ">>" LogicalShift -- right\r
    | AS \r
\r
  // Addition or Subtraction\r
  AS\r
    = AS add MD  -- addition\r
    | AS subtract MD  -- subtraction\r
    | MD\r
\r
  // Multiply or Divide\r
  MD\r
    = MD multiply E  -- multiplication\r
    | MD divide E  -- division\r
    | MD modulo E  -- modulo\r
    | E\r
\r
  // Exponent\r
  E\r
    = P exponent E  -- exponent\r
    | P\r
\r
  // Parenthesis\r
  P\r
    = "(" Expression ")"  -- parenthesis\r
    | Primitive\r
    \r
  Primitive\r
    = "+" Primitive -- positive\r
    | "-" Primitive -- negative\r
    | constant\r
    | hex\r
    | number\r
 \r
  // Lexical Rules\r
  add \r
  	= "+"\r
    | caseInsensitive<"plus">\r
  	| caseInsensitive<"add">\r
    | caseInsensitive<"and">\r
    \r
  subtract \r
    = "-"\r
    | caseInsensitive<"minus">\r
    | caseInsensitive<"subtract">\r
    | caseInsensitive<"remove">\r
    | caseInsensitive<"take">\r
      \r
  multiply \r
    = "*"\r
    | "\\\\*" // Escaped e.g. \\* for markdown\r
    | "\\u{00D7}" // Multiplication Symbol \xD7\r
    | caseInsensitive<"x">\r
    | caseInsensitive<"times by">\r
    | caseInsensitive<"times">\r
    | caseInsensitive<"multiply by">\r
    | caseInsensitive<"multiply">\r
      \r
  divide\r
    = "/"\r
    | "\\u{00F7}" // Division Symbol \xF7\r
    | caseInsensitive<"divide by">\r
    | caseInsensitive<"divide">\r
\r
  modulo\r
    = "%"\r
    | caseInsensitive<"modulo">\r
    | caseInsensitive<"mod">\r
\r
  exponent\r
    = "^"\r
    | caseInsensitive<"to the power of">\r
    | caseInsensitive<"power of">\r
    | caseInsensitive<"exponent">\r
    | caseInsensitive<"prime">\r
\r
  constant  \r
  	= caseInsensitive<"PI"> \r
    | caseInsensitive<"E">\r
\r
  number\r
    = digit* "." digit+  -- fract\r
    | digit+             -- whole\r
  \r
  hex\r
    = "0x" hexDigit+\r
    | hexDigit+ "h"\r
}`},"BasicArithmetic",null,"Expression",{Expression:["define",{sourceInterval:[21,51]},null,[],["app",{sourceInterval:[39,51]},"LogicalShift",[]]],LogicalShift_left:["define",{sourceInterval:[77,115]},null,[],["seq",{sourceInterval:[77,107]},["app",{sourceInterval:[77,89]},"LogicalShift",[]],["terminal",{sourceInterval:[90,94]},"<<"],["app",{sourceInterval:[95,107]},"LogicalShift",[]]]],LogicalShift_right:["define",{sourceInterval:[123,162]},null,[],["seq",{sourceInterval:[123,153]},["app",{sourceInterval:[123,135]},"LogicalShift",[]],["terminal",{sourceInterval:[136,140]},">>"],["app",{sourceInterval:[141,153]},"LogicalShift",[]]]],LogicalShift:["define",{sourceInterval:[57,172]},null,[],["alt",{sourceInterval:[77,172]},["app",{sourceInterval:[77,107]},"LogicalShift_left",[]],["app",{sourceInterval:[123,153]},"LogicalShift_right",[]],["app",{sourceInterval:[170,172]},"AS",[]]]],AS_addition:["define",{sourceInterval:[219,241]},null,[],["seq",{sourceInterval:[219,228]},["app",{sourceInterval:[219,221]},"AS",[]],["app",{sourceInterval:[222,225]},"add",[]],["app",{sourceInterval:[226,228]},"MD",[]]]],AS_subtraction:["define",{sourceInterval:[249,279]},null,[],["seq",{sourceInterval:[249,263]},["app",{sourceInterval:[249,251]},"AS",[]],["app",{sourceInterval:[252,260]},"subtract",[]],["app",{sourceInterval:[261,263]},"MD",[]]]],AS:["define",{sourceInterval:[209,289]},null,[],["alt",{sourceInterval:[219,289]},["app",{sourceInterval:[219,228]},"AS_addition",[]],["app",{sourceInterval:[249,263]},"AS_subtraction",[]],["app",{sourceInterval:[287,289]},"MD",[]]]],MD_multiplication:["define",{sourceInterval:[330,362]},null,[],["seq",{sourceInterval:[330,343]},["app",{sourceInterval:[330,332]},"MD",[]],["app",{sourceInterval:[333,341]},"multiply",[]],["app",{sourceInterval:[342,343]},"E",[]]]],MD_division:["define",{sourceInterval:[370,394]},null,[],["seq",{sourceInterval:[370,381]},["app",{sourceInterval:[370,372]},"MD",[]],["app",{sourceInterval:[373,379]},"divide",[]],["app",{sourceInterval:[380,381]},"E",[]]]],MD_modulo:["define",{sourceInterval:[402,424]},null,[],["seq",{sourceInterval:[402,413]},["app",{sourceInterval:[402,404]},"MD",[]],["app",{sourceInterval:[405,411]},"modulo",[]],["app",{sourceInterval:[412,413]},"E",[]]]],MD:["define",{sourceInterval:[320,433]},null,[],["alt",{sourceInterval:[330,433]},["app",{sourceInterval:[330,343]},"MD_multiplication",[]],["app",{sourceInterval:[370,381]},"MD_division",[]],["app",{sourceInterval:[402,413]},"MD_modulo",[]],["app",{sourceInterval:[432,433]},"E",[]]]],E_exponent:["define",{sourceInterval:[463,488]},null,[],["seq",{sourceInterval:[463,475]},["app",{sourceInterval:[463,464]},"P",[]],["app",{sourceInterval:[465,473]},"exponent",[]],["app",{sourceInterval:[474,475]},"E",[]]]],E:["define",{sourceInterval:[454,497]},null,[],["alt",{sourceInterval:[463,497]},["app",{sourceInterval:[463,475]},"E_exponent",[]],["app",{sourceInterval:[496,497]},"P",[]]]],P_parenthesis:["define",{sourceInterval:[530,564]},null,[],["seq",{sourceInterval:[530,548]},["terminal",{sourceInterval:[530,533]},"("],["app",{sourceInterval:[534,544]},"Expression",[]],["terminal",{sourceInterval:[545,548]},")"]]],P:["define",{sourceInterval:[521,581]},null,[],["alt",{sourceInterval:[530,581]},["app",{sourceInterval:[530,548]},"P_parenthesis",[]],["app",{sourceInterval:[572,581]},"Primitive",[]]]],Primitive_positive:["define",{sourceInterval:[608,633]},null,[],["seq",{sourceInterval:[608,621]},["terminal",{sourceInterval:[608,611]},"+"],["app",{sourceInterval:[612,621]},"Primitive",[]]]],Primitive_negative:["define",{sourceInterval:[641,666]},null,[],["seq",{sourceInterval:[641,654]},["terminal",{sourceInterval:[641,644]},"-"],["app",{sourceInterval:[645,654]},"Primitive",[]]]],Primitive:["define",{sourceInterval:[591,707]},null,[],["alt",{sourceInterval:[608,707]},["app",{sourceInterval:[608,621]},"Primitive_positive",[]],["app",{sourceInterval:[641,654]},"Primitive_negative",[]],["app",{sourceInterval:[674,682]},"constant",[]],["app",{sourceInterval:[690,693]},"hex",[]],["app",{sourceInterval:[701,707]},"number",[]]]],add:["define",{sourceInterval:[734,838]},null,[],["alt",{sourceInterval:[745,838]},["terminal",{sourceInterval:[745,748]},"+"],["app",{sourceInterval:[756,779]},"caseInsensitive",[["terminal",{sourceInterval:[772,778]},"plus"]]],["app",{sourceInterval:[786,808]},"caseInsensitive",[["terminal",{sourceInterval:[802,807]},"add"]]],["app",{sourceInterval:[816,838]},"caseInsensitive",[["terminal",{sourceInterval:[832,837]},"and"]]]]],subtract:["define",{sourceInterval:[848,999]},null,[],["alt",{sourceInterval:[865,999]},["terminal",{sourceInterval:[865,868]},"-"],["app",{sourceInterval:[876,900]},"caseInsensitive",[["terminal",{sourceInterval:[892,899]},"minus"]]],["app",{sourceInterval:[908,935]},"caseInsensitive",[["terminal",{sourceInterval:[924,934]},"subtract"]]],["app",{sourceInterval:[943,968]},"caseInsensitive",[["terminal",{sourceInterval:[959,967]},"remove"]]],["app",{sourceInterval:[976,999]},"caseInsensitive",[["terminal",{sourceInterval:[992,998]},"take"]]]]],multiply:["define",{sourceInterval:[1011,1289]},null,[],["alt",{sourceInterval:[1028,1289]},["terminal",{sourceInterval:[1028,1031]},"*"],["terminal",{sourceInterval:[1039,1044]},"\\*"],["terminal",{sourceInterval:[1084,1094]},"\xD7"],["app",{sourceInterval:[1129,1149]},"caseInsensitive",[["terminal",{sourceInterval:[1145,1148]},"x"]]],["app",{sourceInterval:[1157,1184]},"caseInsensitive",[["terminal",{sourceInterval:[1173,1183]},"times by"]]],["app",{sourceInterval:[1192,1216]},"caseInsensitive",[["terminal",{sourceInterval:[1208,1215]},"times"]]],["app",{sourceInterval:[1224,1254]},"caseInsensitive",[["terminal",{sourceInterval:[1240,1253]},"multiply by"]]],["app",{sourceInterval:[1262,1289]},"caseInsensitive",[["terminal",{sourceInterval:[1278,1288]},"multiply"]]]]],divide:["define",{sourceInterval:[1301,1426]},null,[],["alt",{sourceInterval:[1315,1426]},["terminal",{sourceInterval:[1315,1318]},"/"],["terminal",{sourceInterval:[1326,1336]},"\xF7"],["app",{sourceInterval:[1365,1393]},"caseInsensitive",[["terminal",{sourceInterval:[1381,1392]},"divide by"]]],["app",{sourceInterval:[1401,1426]},"caseInsensitive",[["terminal",{sourceInterval:[1417,1425]},"divide"]]]]],modulo:["define",{sourceInterval:[1432,1512]},null,[],["alt",{sourceInterval:[1446,1512]},["terminal",{sourceInterval:[1446,1449]},"%"],["app",{sourceInterval:[1457,1482]},"caseInsensitive",[["terminal",{sourceInterval:[1473,1481]},"modulo"]]],["app",{sourceInterval:[1490,1512]},"caseInsensitive",[["terminal",{sourceInterval:[1506,1511]},"mod"]]]]],exponent:["define",{sourceInterval:[1518,1681]},null,[],["alt",{sourceInterval:[1534,1681]},["terminal",{sourceInterval:[1534,1537]},"^"],["app",{sourceInterval:[1545,1579]},"caseInsensitive",[["terminal",{sourceInterval:[1561,1578]},"to the power of"]]],["app",{sourceInterval:[1587,1614]},"caseInsensitive",[["terminal",{sourceInterval:[1603,1613]},"power of"]]],["app",{sourceInterval:[1622,1649]},"caseInsensitive",[["terminal",{sourceInterval:[1638,1648]},"exponent"]]],["app",{sourceInterval:[1657,1681]},"caseInsensitive",[["terminal",{sourceInterval:[1673,1680]},"prime"]]]]],constant:["define",{sourceInterval:[1687,1754]},null,[],["alt",{sourceInterval:[1704,1754]},["app",{sourceInterval:[1704,1725]},"caseInsensitive",[["terminal",{sourceInterval:[1720,1724]},"PI"]]],["app",{sourceInterval:[1734,1754]},"caseInsensitive",[["terminal",{sourceInterval:[1750,1753]},"E"]]]]],number_fract:["define",{sourceInterval:[1774,1801]},null,[],["seq",{sourceInterval:[1774,1791]},["star",{sourceInterval:[1774,1780]},["app",{sourceInterval:[1774,1779]},"digit",[]]],["terminal",{sourceInterval:[1781,1784]},"."],["plus",{sourceInterval:[1785,1791]},["app",{sourceInterval:[1785,1790]},"digit",[]]]]],number_whole:["define",{sourceInterval:[1809,1836]},null,[],["plus",{sourceInterval:[1809,1815]},["app",{sourceInterval:[1809,1814]},"digit",[]]]],number:["define",{sourceInterval:[1760,1836]},null,[],["alt",{sourceInterval:[1774,1836]},["app",{sourceInterval:[1774,1791]},"number_fract",[]],["app",{sourceInterval:[1809,1815]},"number_whole",[]]]],hex:["define",{sourceInterval:[1844,1890]},null,[],["alt",{sourceInterval:[1855,1890]},["seq",{sourceInterval:[1855,1869]},["terminal",{sourceInterval:[1855,1859]},"0x"],["plus",{sourceInterval:[1860,1869]},["app",{sourceInterval:[1860,1868]},"hexDigit",[]]]],["seq",{sourceInterval:[1877,1890]},["plus",{sourceInterval:[1877,1886]},["app",{sourceInterval:[1877,1885]},"hexDigit",[]]],["terminal",{sourceInterval:[1887,1890]},"h"]]]]}]);Ln.PercentageArithmetic=Vu(["grammar",{source:`PercentageArithmetic <: BasicArithmetic {\r
	Expression\r
    	:=  PercentageOf\r
        | IncreaseBy\r
        | DecreaseBy\r
        | PercentageIncreaseOrDecrease\r
		| LogicalShift\r
        \r
    Primitive \r
        += percentage\r
        \r
    PercentageOf\r
    	= percentage caseInsensitive<"of"> number \r
        \r
   	IncreaseBy\r
    	= caseInsensitive<"increase"> number caseInsensitive<"by"> percentage\r
        \r
   	DecreaseBy\r
    	= caseInsensitive<"decrease"> number caseInsensitive<"by"> percentage\r
    \r
    PercentageIncreaseOrDecrease\r
        = caseInsensitive<"from">? number caseInsensitive<"to"> number\r
\r
    percentage = number "%"\r
}`},"PercentageArithmetic",Ln.BasicArithmetic,"Expression",{Expression:["override",{sourceInterval:[44,179]},null,[],["alt",{sourceInterval:[65,179]},["app",{sourceInterval:[65,77]},"PercentageOf",[]],["app",{sourceInterval:[89,99]},"IncreaseBy",[]],["app",{sourceInterval:[111,121]},"DecreaseBy",[]],["app",{sourceInterval:[133,161]},"PercentageIncreaseOrDecrease",[]],["app",{sourceInterval:[167,179]},"LogicalShift",[]]]],Primitive:["extend",{sourceInterval:[195,228]},null,[],["app",{sourceInterval:[218,228]},"percentage",[]]],PercentageOf:["define",{sourceInterval:[244,304]},null,[],["seq",{sourceInterval:[265,304]},["app",{sourceInterval:[265,275]},"percentage",[]],["app",{sourceInterval:[276,297]},"caseInsensitive",[["terminal",{sourceInterval:[292,296]},"of"]]],["app",{sourceInterval:[298,304]},"number",[]]]],IncreaseBy:["define",{sourceInterval:[321,407]},null,[],["seq",{sourceInterval:[340,407]},["app",{sourceInterval:[340,367]},"caseInsensitive",[["terminal",{sourceInterval:[356,366]},"increase"]]],["app",{sourceInterval:[368,374]},"number",[]],["app",{sourceInterval:[375,396]},"caseInsensitive",[["terminal",{sourceInterval:[391,395]},"by"]]],["app",{sourceInterval:[397,407]},"percentage",[]]]],DecreaseBy:["define",{sourceInterval:[423,509]},null,[],["seq",{sourceInterval:[442,509]},["app",{sourceInterval:[442,469]},"caseInsensitive",[["terminal",{sourceInterval:[458,468]},"decrease"]]],["app",{sourceInterval:[470,476]},"number",[]],["app",{sourceInterval:[477,498]},"caseInsensitive",[["terminal",{sourceInterval:[493,497]},"by"]]],["app",{sourceInterval:[499,509]},"percentage",[]]]],PercentageIncreaseOrDecrease:["define",{sourceInterval:[521,621]},null,[],["seq",{sourceInterval:[561,621]},["opt",{sourceInterval:[561,585]},["app",{sourceInterval:[561,584]},"caseInsensitive",[["terminal",{sourceInterval:[577,583]},"from"]]]],["app",{sourceInterval:[586,592]},"number",[]],["app",{sourceInterval:[593,614]},"caseInsensitive",[["terminal",{sourceInterval:[609,613]},"to"]]],["app",{sourceInterval:[615,621]},"number",[]]]],percentage:["define",{sourceInterval:[629,652]},null,[],["seq",{sourceInterval:[642,652]},["app",{sourceInterval:[642,648]},"number",[]],["terminal",{sourceInterval:[649,652]},"%"]]]}]);ku.exports=Ln});var Fu=O((r3,Cu)=>{"use strict";var{makeRecipe:Tu}=nt(),Bn={};Bn.BasicArithmetic=Tu(["grammar",{source:`BasicArithmetic {\r
  Expression\r
    = LogicalShift\r
\r
  LogicalShift\r
    = LogicalShift "<<" LogicalShift -- left\r
    | LogicalShift ">>" LogicalShift -- right\r
    | AS \r
\r
  // Addition or Subtraction\r
  AS\r
    = AS add MD  -- addition\r
    | AS subtract MD  -- subtraction\r
    | MD\r
\r
  // Multiply or Divide\r
  MD\r
    = MD multiply E  -- multiplication\r
    | MD divide E  -- division\r
    | MD modulo E  -- modulo\r
    | E\r
\r
  // Exponent\r
  E\r
    = P exponent E  -- exponent\r
    | P\r
\r
  // Parenthesis\r
  P\r
    = "(" Expression ")"  -- parenthesis\r
    | Primitive\r
    \r
  Primitive\r
    = "+" Primitive -- positive\r
    | "-" Primitive -- negative\r
    | constant\r
    | hex\r
    | number\r
 \r
  // Lexical Rules\r
  add \r
  	= "+"\r
    | caseInsensitive<"plus">\r
  	| caseInsensitive<"add">\r
    | caseInsensitive<"and">\r
    \r
  subtract \r
    = "-"\r
    | caseInsensitive<"minus">\r
    | caseInsensitive<"subtract">\r
    | caseInsensitive<"remove">\r
    | caseInsensitive<"take">\r
      \r
  multiply \r
    = "*"\r
    | "\\\\*" // Escaped e.g. \\* for markdown\r
    | "\\u{00D7}" // Multiplication Symbol \xD7\r
    | caseInsensitive<"x">\r
    | caseInsensitive<"times by">\r
    | caseInsensitive<"times">\r
    | caseInsensitive<"multiply by">\r
    | caseInsensitive<"multiply">\r
      \r
  divide\r
    = "/"\r
    | "\\u{00F7}" // Division Symbol \xF7\r
    | caseInsensitive<"divide by">\r
    | caseInsensitive<"divide">\r
\r
  modulo\r
    = "%"\r
    | caseInsensitive<"modulo">\r
    | caseInsensitive<"mod">\r
\r
  exponent\r
    = "^"\r
    | caseInsensitive<"to the power of">\r
    | caseInsensitive<"power of">\r
    | caseInsensitive<"exponent">\r
    | caseInsensitive<"prime">\r
\r
  constant  \r
  	= caseInsensitive<"PI"> \r
    | caseInsensitive<"E">\r
\r
  number\r
    = digit* "." digit+  -- fract\r
    | digit+             -- whole\r
  \r
  hex\r
    = "0x" hexDigit+\r
    | hexDigit+ "h"\r
}`},"BasicArithmetic",null,"Expression",{Expression:["define",{sourceInterval:[21,51]},null,[],["app",{sourceInterval:[39,51]},"LogicalShift",[]]],LogicalShift_left:["define",{sourceInterval:[77,115]},null,[],["seq",{sourceInterval:[77,107]},["app",{sourceInterval:[77,89]},"LogicalShift",[]],["terminal",{sourceInterval:[90,94]},"<<"],["app",{sourceInterval:[95,107]},"LogicalShift",[]]]],LogicalShift_right:["define",{sourceInterval:[123,162]},null,[],["seq",{sourceInterval:[123,153]},["app",{sourceInterval:[123,135]},"LogicalShift",[]],["terminal",{sourceInterval:[136,140]},">>"],["app",{sourceInterval:[141,153]},"LogicalShift",[]]]],LogicalShift:["define",{sourceInterval:[57,172]},null,[],["alt",{sourceInterval:[77,172]},["app",{sourceInterval:[77,107]},"LogicalShift_left",[]],["app",{sourceInterval:[123,153]},"LogicalShift_right",[]],["app",{sourceInterval:[170,172]},"AS",[]]]],AS_addition:["define",{sourceInterval:[219,241]},null,[],["seq",{sourceInterval:[219,228]},["app",{sourceInterval:[219,221]},"AS",[]],["app",{sourceInterval:[222,225]},"add",[]],["app",{sourceInterval:[226,228]},"MD",[]]]],AS_subtraction:["define",{sourceInterval:[249,279]},null,[],["seq",{sourceInterval:[249,263]},["app",{sourceInterval:[249,251]},"AS",[]],["app",{sourceInterval:[252,260]},"subtract",[]],["app",{sourceInterval:[261,263]},"MD",[]]]],AS:["define",{sourceInterval:[209,289]},null,[],["alt",{sourceInterval:[219,289]},["app",{sourceInterval:[219,228]},"AS_addition",[]],["app",{sourceInterval:[249,263]},"AS_subtraction",[]],["app",{sourceInterval:[287,289]},"MD",[]]]],MD_multiplication:["define",{sourceInterval:[330,362]},null,[],["seq",{sourceInterval:[330,343]},["app",{sourceInterval:[330,332]},"MD",[]],["app",{sourceInterval:[333,341]},"multiply",[]],["app",{sourceInterval:[342,343]},"E",[]]]],MD_division:["define",{sourceInterval:[370,394]},null,[],["seq",{sourceInterval:[370,381]},["app",{sourceInterval:[370,372]},"MD",[]],["app",{sourceInterval:[373,379]},"divide",[]],["app",{sourceInterval:[380,381]},"E",[]]]],MD_modulo:["define",{sourceInterval:[402,424]},null,[],["seq",{sourceInterval:[402,413]},["app",{sourceInterval:[402,404]},"MD",[]],["app",{sourceInterval:[405,411]},"modulo",[]],["app",{sourceInterval:[412,413]},"E",[]]]],MD:["define",{sourceInterval:[320,433]},null,[],["alt",{sourceInterval:[330,433]},["app",{sourceInterval:[330,343]},"MD_multiplication",[]],["app",{sourceInterval:[370,381]},"MD_division",[]],["app",{sourceInterval:[402,413]},"MD_modulo",[]],["app",{sourceInterval:[432,433]},"E",[]]]],E_exponent:["define",{sourceInterval:[463,488]},null,[],["seq",{sourceInterval:[463,475]},["app",{sourceInterval:[463,464]},"P",[]],["app",{sourceInterval:[465,473]},"exponent",[]],["app",{sourceInterval:[474,475]},"E",[]]]],E:["define",{sourceInterval:[454,497]},null,[],["alt",{sourceInterval:[463,497]},["app",{sourceInterval:[463,475]},"E_exponent",[]],["app",{sourceInterval:[496,497]},"P",[]]]],P_parenthesis:["define",{sourceInterval:[530,564]},null,[],["seq",{sourceInterval:[530,548]},["terminal",{sourceInterval:[530,533]},"("],["app",{sourceInterval:[534,544]},"Expression",[]],["terminal",{sourceInterval:[545,548]},")"]]],P:["define",{sourceInterval:[521,581]},null,[],["alt",{sourceInterval:[530,581]},["app",{sourceInterval:[530,548]},"P_parenthesis",[]],["app",{sourceInterval:[572,581]},"Primitive",[]]]],Primitive_positive:["define",{sourceInterval:[608,633]},null,[],["seq",{sourceInterval:[608,621]},["terminal",{sourceInterval:[608,611]},"+"],["app",{sourceInterval:[612,621]},"Primitive",[]]]],Primitive_negative:["define",{sourceInterval:[641,666]},null,[],["seq",{sourceInterval:[641,654]},["terminal",{sourceInterval:[641,644]},"-"],["app",{sourceInterval:[645,654]},"Primitive",[]]]],Primitive:["define",{sourceInterval:[591,707]},null,[],["alt",{sourceInterval:[608,707]},["app",{sourceInterval:[608,621]},"Primitive_positive",[]],["app",{sourceInterval:[641,654]},"Primitive_negative",[]],["app",{sourceInterval:[674,682]},"constant",[]],["app",{sourceInterval:[690,693]},"hex",[]],["app",{sourceInterval:[701,707]},"number",[]]]],add:["define",{sourceInterval:[734,838]},null,[],["alt",{sourceInterval:[745,838]},["terminal",{sourceInterval:[745,748]},"+"],["app",{sourceInterval:[756,779]},"caseInsensitive",[["terminal",{sourceInterval:[772,778]},"plus"]]],["app",{sourceInterval:[786,808]},"caseInsensitive",[["terminal",{sourceInterval:[802,807]},"add"]]],["app",{sourceInterval:[816,838]},"caseInsensitive",[["terminal",{sourceInterval:[832,837]},"and"]]]]],subtract:["define",{sourceInterval:[848,999]},null,[],["alt",{sourceInterval:[865,999]},["terminal",{sourceInterval:[865,868]},"-"],["app",{sourceInterval:[876,900]},"caseInsensitive",[["terminal",{sourceInterval:[892,899]},"minus"]]],["app",{sourceInterval:[908,935]},"caseInsensitive",[["terminal",{sourceInterval:[924,934]},"subtract"]]],["app",{sourceInterval:[943,968]},"caseInsensitive",[["terminal",{sourceInterval:[959,967]},"remove"]]],["app",{sourceInterval:[976,999]},"caseInsensitive",[["terminal",{sourceInterval:[992,998]},"take"]]]]],multiply:["define",{sourceInterval:[1011,1289]},null,[],["alt",{sourceInterval:[1028,1289]},["terminal",{sourceInterval:[1028,1031]},"*"],["terminal",{sourceInterval:[1039,1044]},"\\*"],["terminal",{sourceInterval:[1084,1094]},"\xD7"],["app",{sourceInterval:[1129,1149]},"caseInsensitive",[["terminal",{sourceInterval:[1145,1148]},"x"]]],["app",{sourceInterval:[1157,1184]},"caseInsensitive",[["terminal",{sourceInterval:[1173,1183]},"times by"]]],["app",{sourceInterval:[1192,1216]},"caseInsensitive",[["terminal",{sourceInterval:[1208,1215]},"times"]]],["app",{sourceInterval:[1224,1254]},"caseInsensitive",[["terminal",{sourceInterval:[1240,1253]},"multiply by"]]],["app",{sourceInterval:[1262,1289]},"caseInsensitive",[["terminal",{sourceInterval:[1278,1288]},"multiply"]]]]],divide:["define",{sourceInterval:[1301,1426]},null,[],["alt",{sourceInterval:[1315,1426]},["terminal",{sourceInterval:[1315,1318]},"/"],["terminal",{sourceInterval:[1326,1336]},"\xF7"],["app",{sourceInterval:[1365,1393]},"caseInsensitive",[["terminal",{sourceInterval:[1381,1392]},"divide by"]]],["app",{sourceInterval:[1401,1426]},"caseInsensitive",[["terminal",{sourceInterval:[1417,1425]},"divide"]]]]],modulo:["define",{sourceInterval:[1432,1512]},null,[],["alt",{sourceInterval:[1446,1512]},["terminal",{sourceInterval:[1446,1449]},"%"],["app",{sourceInterval:[1457,1482]},"caseInsensitive",[["terminal",{sourceInterval:[1473,1481]},"modulo"]]],["app",{sourceInterval:[1490,1512]},"caseInsensitive",[["terminal",{sourceInterval:[1506,1511]},"mod"]]]]],exponent:["define",{sourceInterval:[1518,1681]},null,[],["alt",{sourceInterval:[1534,1681]},["terminal",{sourceInterval:[1534,1537]},"^"],["app",{sourceInterval:[1545,1579]},"caseInsensitive",[["terminal",{sourceInterval:[1561,1578]},"to the power of"]]],["app",{sourceInterval:[1587,1614]},"caseInsensitive",[["terminal",{sourceInterval:[1603,1613]},"power of"]]],["app",{sourceInterval:[1622,1649]},"caseInsensitive",[["terminal",{sourceInterval:[1638,1648]},"exponent"]]],["app",{sourceInterval:[1657,1681]},"caseInsensitive",[["terminal",{sourceInterval:[1673,1680]},"prime"]]]]],constant:["define",{sourceInterval:[1687,1754]},null,[],["alt",{sourceInterval:[1704,1754]},["app",{sourceInterval:[1704,1725]},"caseInsensitive",[["terminal",{sourceInterval:[1720,1724]},"PI"]]],["app",{sourceInterval:[1734,1754]},"caseInsensitive",[["terminal",{sourceInterval:[1750,1753]},"E"]]]]],number_fract:["define",{sourceInterval:[1774,1801]},null,[],["seq",{sourceInterval:[1774,1791]},["star",{sourceInterval:[1774,1780]},["app",{sourceInterval:[1774,1779]},"digit",[]]],["terminal",{sourceInterval:[1781,1784]},"."],["plus",{sourceInterval:[1785,1791]},["app",{sourceInterval:[1785,1790]},"digit",[]]]]],number_whole:["define",{sourceInterval:[1809,1836]},null,[],["plus",{sourceInterval:[1809,1815]},["app",{sourceInterval:[1809,1814]},"digit",[]]]],number:["define",{sourceInterval:[1760,1836]},null,[],["alt",{sourceInterval:[1774,1836]},["app",{sourceInterval:[1774,1791]},"number_fract",[]],["app",{sourceInterval:[1809,1815]},"number_whole",[]]]],hex:["define",{sourceInterval:[1844,1890]},null,[],["alt",{sourceInterval:[1855,1890]},["seq",{sourceInterval:[1855,1869]},["terminal",{sourceInterval:[1855,1859]},"0x"],["plus",{sourceInterval:[1860,1869]},["app",{sourceInterval:[1860,1868]},"hexDigit",[]]]],["seq",{sourceInterval:[1877,1890]},["plus",{sourceInterval:[1877,1886]},["app",{sourceInterval:[1877,1885]},"hexDigit",[]]],["terminal",{sourceInterval:[1887,1890]},"h"]]]]}]);Bn.UnitsOfMeasurementArithmetic=Tu(["grammar",{source:`UnitsOfMeasurementArithmetic <: BasicArithmetic {\r
	Expression\r
    	:=  Conversion\r
        | ConversionPossiblities\r
		| LogicalShift\r
        \r
    Primitive \r
        += UoM\r
        | percentage\r
        \r
   	Conversion\r
    	= caseInsensitive<"convert">? UoM caseInsensitive<"to"> caseInsensitive<"best"> -- best\r
        | caseInsensitive<"convert">? UoM caseInsensitive<"to"> Unit -- convert\r
        	\r
    ConversionPossiblities\r
        = caseInsensitive<"convert">? UoM caseInsensitive<"to"> "?"?\r
    \r
    UoM \r
        = number Unit\r
\r
    Unit\r
        = "km3/s"\r
        | "yd3/h"\r
        | "yd3/min"\r
        | "yd3/s"\r
        | "ft3/h"\r
        | "ft3/min"\r
        | "ft3/s"\r
        | "in3/h"\r
        | "in3/min"\r
        | "in3/s"\r
        | "mm3/s"\r
        | "cm3/s"\r
        | "fl-oz/h"\r
        | "fl-oz/min"\r
        | "fl-oz/s"\r
        | "gal/h"\r
        | "gal/min"\r
        | "gal/s"\r
        | "pnt/h"\r
        | "pnt/min"\r
        | "pnt/s"\r
        | "cup/s"\r
        | "Tbs/s"\r
        | "tsp/s"\r
        | "m3/h"\r
        | "m3/min"\r
        | "m3/s"\r
        | "kl/h"\r
        | "kl/min"\r
        | "kl/s"\r
        | "l/h"\r
        | "l/min"\r
        | "l/s"\r
        | "dl/s"\r
        | "cl/s"\r
        | "ml/s"\r
        | "min/km"\r
        | "s/ft"\r
        | "s/m"\r
        | "km/h"\r
        | "m/h"\r
        | "ft/s"\r
        | "m/s"\r
        | "knot"\r
        | "THz"\r
        | "GHz"\r
        | "MHz"\r
        | "kHz"\r
        | "mHz"\r
        | "Hz"\r
        | "rpm"\r
        | "rad/s"\r
        | "deg/s"\r
        | "km3"\r
        | "yd3"\r
        | "ft3"\r
        | "in3"\r
        | "mm3"\r
        | "cm3"\r
        | "m3"\r
        | "gal"\r
        | "qt"\r
        | "pnt"\r
        | "cup"\r
        | "fl-oz"\r
        | "Tbs"\r
        | "tsp"\r
        | "kl"\r
        | "lb"\r
        | "lx"\r
        | "l"\r
        | "ml"\r
        | "km2"\r
        | "mi2"\r
        | "mm2"\r
        | "cm2"\r
        | "m2"\r
        | "in2"\r
        | "ft2"\r
        | "ha"\r
        | "ac"\r
        | "GVARh"\r
        | "MVARh"\r
        | "kVARh"\r
        | "mVARh"\r
        | "VARh"\r
        | "GVAR"\r
        | "MVAR"\r
        | "kVAR"\r
        | "mVAR"\r
        | "VAR"\r
        | "GVA"\r
        | "MVA"\r
        | "kVA"\r
        | "mVA"\r
        | "VA"\r
        | "GWh"\r
        | "MWh"\r
        | "kWh"\r
        | "mWh"\r
        | "Wh"\r
        | "GW"\r
        | "MW"\r
        | "kW"\r
        | "mW"\r
        | "W"\r
        | "kJ"\r
        | "J"\r
        | "mcg"\r
        | "kg"\r
        | "grad"\r
        | "g"\r
        | "mg"\r
        | "oz"\r
        | "torr"\r
        | "t"\r
        | "mt"\r
        | "month"\r
        | "year"\r
        | "week"\r
        | "deg"\r
        | "d"\r
        | "hPa"\r
        | "h"\r
        | "min"\r
        | "s"\r
        | "ms"\r
        | "mu"\r
        | "ns"\r
        | "kPa"\r
        | "MPa"\r
        | "bar"\r
        | "psi"\r
        | "ksi"\r
        | "Pa"\r
        | "ft-cd"\r
        | "ppm"\r
        | "ppb"\r
        | "ppt"\r
        | "ppq"\r
        | "kV"\r
        | "V"\r
        | "mV"\r
        | "kA"\r
        | "A"\r
        | "mA"\r
        | "arcmin"\r
        | "arcsec"\r
        | "rad"\r
        | "ft-us"\r
        | "mi"\r
        | "mm"\r
        | "m"\r
        | "cm"\r
        | "ft"\r
        | "in"\r
        | "F"\r
        | "Kb"\r
        | "KB"\r
        | "K"\r
        | "C"\r
        | "R"\r
        | "TB"\r
        | "GB"\r
        | "MB"\r
        | "B"\r
        | "Tb"\r
        | "Gb"\r
        | "Mb"\r
        | "b"\r
\r
    percentage \r
        = number "%"\r
}`},"UnitsOfMeasurementArithmetic",Bn.BasicArithmetic,"Expression",{Expression:["override",{sourceInterval:[52,135]},null,[],["alt",{sourceInterval:[73,135]},["app",{sourceInterval:[73,83]},"Conversion",[]],["app",{sourceInterval:[95,117]},"ConversionPossiblities",[]],["app",{sourceInterval:[123,135]},"LogicalShift",[]]]],Primitive:["extend",{sourceInterval:[151,199]},null,[],["alt",{sourceInterval:[174,199]},["app",{sourceInterval:[174,177]},"UoM",[]],["app",{sourceInterval:[189,199]},"percentage",[]]]],Conversion_best:["define",{sourceInterval:[234,319]},null,[],["seq",{sourceInterval:[234,311]},["opt",{sourceInterval:[234,261]},["app",{sourceInterval:[234,260]},"caseInsensitive",[["terminal",{sourceInterval:[250,259]},"convert"]]]],["app",{sourceInterval:[262,265]},"UoM",[]],["app",{sourceInterval:[266,287]},"caseInsensitive",[["terminal",{sourceInterval:[282,286]},"to"]]],["app",{sourceInterval:[288,311]},"caseInsensitive",[["terminal",{sourceInterval:[304,310]},"best"]]]]],Conversion_convert:["define",{sourceInterval:[331,400]},null,[],["seq",{sourceInterval:[331,389]},["opt",{sourceInterval:[331,358]},["app",{sourceInterval:[331,357]},"caseInsensitive",[["terminal",{sourceInterval:[347,356]},"convert"]]]],["app",{sourceInterval:[359,362]},"UoM",[]],["app",{sourceInterval:[363,384]},"caseInsensitive",[["terminal",{sourceInterval:[379,383]},"to"]]],["app",{sourceInterval:[385,389]},"Unit",[]]]],Conversion:["define",{sourceInterval:[215,400]},null,[],["alt",{sourceInterval:[234,400]},["app",{sourceInterval:[234,311]},"Conversion_best",[]],["app",{sourceInterval:[331,389]},"Conversion_convert",[]]]],ConversionPossiblities:["define",{sourceInterval:[417,509]},null,[],["seq",{sourceInterval:[451,509]},["opt",{sourceInterval:[451,478]},["app",{sourceInterval:[451,477]},"caseInsensitive",[["terminal",{sourceInterval:[467,476]},"convert"]]]],["app",{sourceInterval:[479,482]},"UoM",[]],["app",{sourceInterval:[483,504]},"caseInsensitive",[["terminal",{sourceInterval:[499,503]},"to"]]],["opt",{sourceInterval:[505,509]},["terminal",{sourceInterval:[505,508]},"?"]]]],UoM:["define",{sourceInterval:[521,548]},null,[],["seq",{sourceInterval:[537,548]},["app",{sourceInterval:[537,543]},"number",[]],["app",{sourceInterval:[544,548]},"Unit",[]]]],Unit:["define",{sourceInterval:[556,3497]},null,[],["alt",{sourceInterval:[572,3497]},["terminal",{sourceInterval:[572,579]},"km3/s"],["terminal",{sourceInterval:[591,598]},"yd3/h"],["terminal",{sourceInterval:[610,619]},"yd3/min"],["terminal",{sourceInterval:[631,638]},"yd3/s"],["terminal",{sourceInterval:[650,657]},"ft3/h"],["terminal",{sourceInterval:[669,678]},"ft3/min"],["terminal",{sourceInterval:[690,697]},"ft3/s"],["terminal",{sourceInterval:[709,716]},"in3/h"],["terminal",{sourceInterval:[728,737]},"in3/min"],["terminal",{sourceInterval:[749,756]},"in3/s"],["terminal",{sourceInterval:[768,775]},"mm3/s"],["terminal",{sourceInterval:[787,794]},"cm3/s"],["terminal",{sourceInterval:[806,815]},"fl-oz/h"],["terminal",{sourceInterval:[827,838]},"fl-oz/min"],["terminal",{sourceInterval:[850,859]},"fl-oz/s"],["terminal",{sourceInterval:[871,878]},"gal/h"],["terminal",{sourceInterval:[890,899]},"gal/min"],["terminal",{sourceInterval:[911,918]},"gal/s"],["terminal",{sourceInterval:[930,937]},"pnt/h"],["terminal",{sourceInterval:[949,958]},"pnt/min"],["terminal",{sourceInterval:[970,977]},"pnt/s"],["terminal",{sourceInterval:[989,996]},"cup/s"],["terminal",{sourceInterval:[1008,1015]},"Tbs/s"],["terminal",{sourceInterval:[1027,1034]},"tsp/s"],["terminal",{sourceInterval:[1046,1052]},"m3/h"],["terminal",{sourceInterval:[1064,1072]},"m3/min"],["terminal",{sourceInterval:[1084,1090]},"m3/s"],["terminal",{sourceInterval:[1102,1108]},"kl/h"],["terminal",{sourceInterval:[1120,1128]},"kl/min"],["terminal",{sourceInterval:[1140,1146]},"kl/s"],["terminal",{sourceInterval:[1158,1163]},"l/h"],["terminal",{sourceInterval:[1175,1182]},"l/min"],["terminal",{sourceInterval:[1194,1199]},"l/s"],["terminal",{sourceInterval:[1211,1217]},"dl/s"],["terminal",{sourceInterval:[1229,1235]},"cl/s"],["terminal",{sourceInterval:[1247,1253]},"ml/s"],["terminal",{sourceInterval:[1265,1273]},"min/km"],["terminal",{sourceInterval:[1285,1291]},"s/ft"],["terminal",{sourceInterval:[1303,1308]},"s/m"],["terminal",{sourceInterval:[1320,1326]},"km/h"],["terminal",{sourceInterval:[1338,1343]},"m/h"],["terminal",{sourceInterval:[1355,1361]},"ft/s"],["terminal",{sourceInterval:[1373,1378]},"m/s"],["terminal",{sourceInterval:[1390,1396]},"knot"],["terminal",{sourceInterval:[1408,1413]},"THz"],["terminal",{sourceInterval:[1425,1430]},"GHz"],["terminal",{sourceInterval:[1442,1447]},"MHz"],["terminal",{sourceInterval:[1459,1464]},"kHz"],["terminal",{sourceInterval:[1476,1481]},"mHz"],["terminal",{sourceInterval:[1493,1497]},"Hz"],["terminal",{sourceInterval:[1509,1514]},"rpm"],["terminal",{sourceInterval:[1526,1533]},"rad/s"],["terminal",{sourceInterval:[1545,1552]},"deg/s"],["terminal",{sourceInterval:[1564,1569]},"km3"],["terminal",{sourceInterval:[1581,1586]},"yd3"],["terminal",{sourceInterval:[1598,1603]},"ft3"],["terminal",{sourceInterval:[1615,1620]},"in3"],["terminal",{sourceInterval:[1632,1637]},"mm3"],["terminal",{sourceInterval:[1649,1654]},"cm3"],["terminal",{sourceInterval:[1666,1670]},"m3"],["terminal",{sourceInterval:[1682,1687]},"gal"],["terminal",{sourceInterval:[1699,1703]},"qt"],["terminal",{sourceInterval:[1715,1720]},"pnt"],["terminal",{sourceInterval:[1732,1737]},"cup"],["terminal",{sourceInterval:[1749,1756]},"fl-oz"],["terminal",{sourceInterval:[1768,1773]},"Tbs"],["terminal",{sourceInterval:[1785,1790]},"tsp"],["terminal",{sourceInterval:[1802,1806]},"kl"],["terminal",{sourceInterval:[1818,1822]},"lb"],["terminal",{sourceInterval:[1834,1838]},"lx"],["terminal",{sourceInterval:[1850,1853]},"l"],["terminal",{sourceInterval:[1865,1869]},"ml"],["terminal",{sourceInterval:[1881,1886]},"km2"],["terminal",{sourceInterval:[1898,1903]},"mi2"],["terminal",{sourceInterval:[1915,1920]},"mm2"],["terminal",{sourceInterval:[1932,1937]},"cm2"],["terminal",{sourceInterval:[1949,1953]},"m2"],["terminal",{sourceInterval:[1965,1970]},"in2"],["terminal",{sourceInterval:[1982,1987]},"ft2"],["terminal",{sourceInterval:[1999,2003]},"ha"],["terminal",{sourceInterval:[2015,2019]},"ac"],["terminal",{sourceInterval:[2031,2038]},"GVARh"],["terminal",{sourceInterval:[2050,2057]},"MVARh"],["terminal",{sourceInterval:[2069,2076]},"kVARh"],["terminal",{sourceInterval:[2088,2095]},"mVARh"],["terminal",{sourceInterval:[2107,2113]},"VARh"],["terminal",{sourceInterval:[2125,2131]},"GVAR"],["terminal",{sourceInterval:[2143,2149]},"MVAR"],["terminal",{sourceInterval:[2161,2167]},"kVAR"],["terminal",{sourceInterval:[2179,2185]},"mVAR"],["terminal",{sourceInterval:[2197,2202]},"VAR"],["terminal",{sourceInterval:[2214,2219]},"GVA"],["terminal",{sourceInterval:[2231,2236]},"MVA"],["terminal",{sourceInterval:[2248,2253]},"kVA"],["terminal",{sourceInterval:[2265,2270]},"mVA"],["terminal",{sourceInterval:[2282,2286]},"VA"],["terminal",{sourceInterval:[2298,2303]},"GWh"],["terminal",{sourceInterval:[2315,2320]},"MWh"],["terminal",{sourceInterval:[2332,2337]},"kWh"],["terminal",{sourceInterval:[2349,2354]},"mWh"],["terminal",{sourceInterval:[2366,2370]},"Wh"],["terminal",{sourceInterval:[2382,2386]},"GW"],["terminal",{sourceInterval:[2398,2402]},"MW"],["terminal",{sourceInterval:[2414,2418]},"kW"],["terminal",{sourceInterval:[2430,2434]},"mW"],["terminal",{sourceInterval:[2446,2449]},"W"],["terminal",{sourceInterval:[2461,2465]},"kJ"],["terminal",{sourceInterval:[2477,2480]},"J"],["terminal",{sourceInterval:[2492,2497]},"mcg"],["terminal",{sourceInterval:[2509,2513]},"kg"],["terminal",{sourceInterval:[2525,2531]},"grad"],["terminal",{sourceInterval:[2543,2546]},"g"],["terminal",{sourceInterval:[2558,2562]},"mg"],["terminal",{sourceInterval:[2574,2578]},"oz"],["terminal",{sourceInterval:[2590,2596]},"torr"],["terminal",{sourceInterval:[2608,2611]},"t"],["terminal",{sourceInterval:[2623,2627]},"mt"],["terminal",{sourceInterval:[2639,2646]},"month"],["terminal",{sourceInterval:[2658,2664]},"year"],["terminal",{sourceInterval:[2676,2682]},"week"],["terminal",{sourceInterval:[2694,2699]},"deg"],["terminal",{sourceInterval:[2711,2714]},"d"],["terminal",{sourceInterval:[2726,2731]},"hPa"],["terminal",{sourceInterval:[2743,2746]},"h"],["terminal",{sourceInterval:[2758,2763]},"min"],["terminal",{sourceInterval:[2775,2778]},"s"],["terminal",{sourceInterval:[2790,2794]},"ms"],["terminal",{sourceInterval:[2806,2810]},"mu"],["terminal",{sourceInterval:[2822,2826]},"ns"],["terminal",{sourceInterval:[2838,2843]},"kPa"],["terminal",{sourceInterval:[2855,2860]},"MPa"],["terminal",{sourceInterval:[2872,2877]},"bar"],["terminal",{sourceInterval:[2889,2894]},"psi"],["terminal",{sourceInterval:[2906,2911]},"ksi"],["terminal",{sourceInterval:[2923,2927]},"Pa"],["terminal",{sourceInterval:[2939,2946]},"ft-cd"],["terminal",{sourceInterval:[2958,2963]},"ppm"],["terminal",{sourceInterval:[2975,2980]},"ppb"],["terminal",{sourceInterval:[2992,2997]},"ppt"],["terminal",{sourceInterval:[3009,3014]},"ppq"],["terminal",{sourceInterval:[3026,3030]},"kV"],["terminal",{sourceInterval:[3042,3045]},"V"],["terminal",{sourceInterval:[3057,3061]},"mV"],["terminal",{sourceInterval:[3073,3077]},"kA"],["terminal",{sourceInterval:[3089,3092]},"A"],["terminal",{sourceInterval:[3104,3108]},"mA"],["terminal",{sourceInterval:[3120,3128]},"arcmin"],["terminal",{sourceInterval:[3140,3148]},"arcsec"],["terminal",{sourceInterval:[3160,3165]},"rad"],["terminal",{sourceInterval:[3177,3184]},"ft-us"],["terminal",{sourceInterval:[3196,3200]},"mi"],["terminal",{sourceInterval:[3212,3216]},"mm"],["terminal",{sourceInterval:[3228,3231]},"m"],["terminal",{sourceInterval:[3243,3247]},"cm"],["terminal",{sourceInterval:[3259,3263]},"ft"],["terminal",{sourceInterval:[3275,3279]},"in"],["terminal",{sourceInterval:[3291,3294]},"F"],["terminal",{sourceInterval:[3306,3310]},"Kb"],["terminal",{sourceInterval:[3322,3326]},"KB"],["terminal",{sourceInterval:[3338,3341]},"K"],["terminal",{sourceInterval:[3353,3356]},"C"],["terminal",{sourceInterval:[3368,3371]},"R"],["terminal",{sourceInterval:[3383,3387]},"TB"],["terminal",{sourceInterval:[3399,3403]},"GB"],["terminal",{sourceInterval:[3415,3419]},"MB"],["terminal",{sourceInterval:[3431,3434]},"B"],["terminal",{sourceInterval:[3446,3450]},"Tb"],["terminal",{sourceInterval:[3462,3466]},"Gb"],["terminal",{sourceInterval:[3478,3482]},"Mb"],["terminal",{sourceInterval:[3494,3497]},"b"]]],percentage:["define",{sourceInterval:[3505,3538]},null,[],["seq",{sourceInterval:[3528,3538]},["app",{sourceInterval:[3528,3534]},"number",[]],["terminal",{sourceInterval:[3535,3538]},"%"]]]}]);Cu.exports=Bn});var Bu=O((v3,Uu)=>{"use strict";var{makeRecipe:qu}=nt(),Wn={};Wn.BasicArithmetic=qu(["grammar",{source:`BasicArithmetic {\r
  Expression\r
    = LogicalShift\r
\r
  LogicalShift\r
    = LogicalShift "<<" LogicalShift -- left\r
    | LogicalShift ">>" LogicalShift -- right\r
    | AS \r
\r
  // Addition or Subtraction\r
  AS\r
    = AS add MD  -- addition\r
    | AS subtract MD  -- subtraction\r
    | MD\r
\r
  // Multiply or Divide\r
  MD\r
    = MD multiply E  -- multiplication\r
    | MD divide E  -- division\r
    | MD modulo E  -- modulo\r
    | E\r
\r
  // Exponent\r
  E\r
    = P exponent E  -- exponent\r
    | P\r
\r
  // Parenthesis\r
  P\r
    = "(" Expression ")"  -- parenthesis\r
    | Primitive\r
    \r
  Primitive\r
    = "+" Primitive -- positive\r
    | "-" Primitive -- negative\r
    | constant\r
    | hex\r
    | number\r
 \r
  // Lexical Rules\r
  add \r
  	= "+"\r
    | caseInsensitive<"plus">\r
  	| caseInsensitive<"add">\r
    | caseInsensitive<"and">\r
    \r
  subtract \r
    = "-"\r
    | caseInsensitive<"minus">\r
    | caseInsensitive<"subtract">\r
    | caseInsensitive<"remove">\r
    | caseInsensitive<"take">\r
      \r
  multiply \r
    = "*"\r
    | "\\\\*" // Escaped e.g. \\* for markdown\r
    | "\\u{00D7}" // Multiplication Symbol \xD7\r
    | caseInsensitive<"x">\r
    | caseInsensitive<"times by">\r
    | caseInsensitive<"times">\r
    | caseInsensitive<"multiply by">\r
    | caseInsensitive<"multiply">\r
      \r
  divide\r
    = "/"\r
    | "\\u{00F7}" // Division Symbol \xF7\r
    | caseInsensitive<"divide by">\r
    | caseInsensitive<"divide">\r
\r
  modulo\r
    = "%"\r
    | caseInsensitive<"modulo">\r
    | caseInsensitive<"mod">\r
\r
  exponent\r
    = "^"\r
    | caseInsensitive<"to the power of">\r
    | caseInsensitive<"power of">\r
    | caseInsensitive<"exponent">\r
    | caseInsensitive<"prime">\r
\r
  constant  \r
  	= caseInsensitive<"PI"> \r
    | caseInsensitive<"E">\r
\r
  number\r
    = digit* "." digit+  -- fract\r
    | digit+             -- whole\r
  \r
  hex\r
    = "0x" hexDigit+\r
    | hexDigit+ "h"\r
}`},"BasicArithmetic",null,"Expression",{Expression:["define",{sourceInterval:[21,51]},null,[],["app",{sourceInterval:[39,51]},"LogicalShift",[]]],LogicalShift_left:["define",{sourceInterval:[77,115]},null,[],["seq",{sourceInterval:[77,107]},["app",{sourceInterval:[77,89]},"LogicalShift",[]],["terminal",{sourceInterval:[90,94]},"<<"],["app",{sourceInterval:[95,107]},"LogicalShift",[]]]],LogicalShift_right:["define",{sourceInterval:[123,162]},null,[],["seq",{sourceInterval:[123,153]},["app",{sourceInterval:[123,135]},"LogicalShift",[]],["terminal",{sourceInterval:[136,140]},">>"],["app",{sourceInterval:[141,153]},"LogicalShift",[]]]],LogicalShift:["define",{sourceInterval:[57,172]},null,[],["alt",{sourceInterval:[77,172]},["app",{sourceInterval:[77,107]},"LogicalShift_left",[]],["app",{sourceInterval:[123,153]},"LogicalShift_right",[]],["app",{sourceInterval:[170,172]},"AS",[]]]],AS_addition:["define",{sourceInterval:[219,241]},null,[],["seq",{sourceInterval:[219,228]},["app",{sourceInterval:[219,221]},"AS",[]],["app",{sourceInterval:[222,225]},"add",[]],["app",{sourceInterval:[226,228]},"MD",[]]]],AS_subtraction:["define",{sourceInterval:[249,279]},null,[],["seq",{sourceInterval:[249,263]},["app",{sourceInterval:[249,251]},"AS",[]],["app",{sourceInterval:[252,260]},"subtract",[]],["app",{sourceInterval:[261,263]},"MD",[]]]],AS:["define",{sourceInterval:[209,289]},null,[],["alt",{sourceInterval:[219,289]},["app",{sourceInterval:[219,228]},"AS_addition",[]],["app",{sourceInterval:[249,263]},"AS_subtraction",[]],["app",{sourceInterval:[287,289]},"MD",[]]]],MD_multiplication:["define",{sourceInterval:[330,362]},null,[],["seq",{sourceInterval:[330,343]},["app",{sourceInterval:[330,332]},"MD",[]],["app",{sourceInterval:[333,341]},"multiply",[]],["app",{sourceInterval:[342,343]},"E",[]]]],MD_division:["define",{sourceInterval:[370,394]},null,[],["seq",{sourceInterval:[370,381]},["app",{sourceInterval:[370,372]},"MD",[]],["app",{sourceInterval:[373,379]},"divide",[]],["app",{sourceInterval:[380,381]},"E",[]]]],MD_modulo:["define",{sourceInterval:[402,424]},null,[],["seq",{sourceInterval:[402,413]},["app",{sourceInterval:[402,404]},"MD",[]],["app",{sourceInterval:[405,411]},"modulo",[]],["app",{sourceInterval:[412,413]},"E",[]]]],MD:["define",{sourceInterval:[320,433]},null,[],["alt",{sourceInterval:[330,433]},["app",{sourceInterval:[330,343]},"MD_multiplication",[]],["app",{sourceInterval:[370,381]},"MD_division",[]],["app",{sourceInterval:[402,413]},"MD_modulo",[]],["app",{sourceInterval:[432,433]},"E",[]]]],E_exponent:["define",{sourceInterval:[463,488]},null,[],["seq",{sourceInterval:[463,475]},["app",{sourceInterval:[463,464]},"P",[]],["app",{sourceInterval:[465,473]},"exponent",[]],["app",{sourceInterval:[474,475]},"E",[]]]],E:["define",{sourceInterval:[454,497]},null,[],["alt",{sourceInterval:[463,497]},["app",{sourceInterval:[463,475]},"E_exponent",[]],["app",{sourceInterval:[496,497]},"P",[]]]],P_parenthesis:["define",{sourceInterval:[530,564]},null,[],["seq",{sourceInterval:[530,548]},["terminal",{sourceInterval:[530,533]},"("],["app",{sourceInterval:[534,544]},"Expression",[]],["terminal",{sourceInterval:[545,548]},")"]]],P:["define",{sourceInterval:[521,581]},null,[],["alt",{sourceInterval:[530,581]},["app",{sourceInterval:[530,548]},"P_parenthesis",[]],["app",{sourceInterval:[572,581]},"Primitive",[]]]],Primitive_positive:["define",{sourceInterval:[608,633]},null,[],["seq",{sourceInterval:[608,621]},["terminal",{sourceInterval:[608,611]},"+"],["app",{sourceInterval:[612,621]},"Primitive",[]]]],Primitive_negative:["define",{sourceInterval:[641,666]},null,[],["seq",{sourceInterval:[641,654]},["terminal",{sourceInterval:[641,644]},"-"],["app",{sourceInterval:[645,654]},"Primitive",[]]]],Primitive:["define",{sourceInterval:[591,707]},null,[],["alt",{sourceInterval:[608,707]},["app",{sourceInterval:[608,621]},"Primitive_positive",[]],["app",{sourceInterval:[641,654]},"Primitive_negative",[]],["app",{sourceInterval:[674,682]},"constant",[]],["app",{sourceInterval:[690,693]},"hex",[]],["app",{sourceInterval:[701,707]},"number",[]]]],add:["define",{sourceInterval:[734,838]},null,[],["alt",{sourceInterval:[745,838]},["terminal",{sourceInterval:[745,748]},"+"],["app",{sourceInterval:[756,779]},"caseInsensitive",[["terminal",{sourceInterval:[772,778]},"plus"]]],["app",{sourceInterval:[786,808]},"caseInsensitive",[["terminal",{sourceInterval:[802,807]},"add"]]],["app",{sourceInterval:[816,838]},"caseInsensitive",[["terminal",{sourceInterval:[832,837]},"and"]]]]],subtract:["define",{sourceInterval:[848,999]},null,[],["alt",{sourceInterval:[865,999]},["terminal",{sourceInterval:[865,868]},"-"],["app",{sourceInterval:[876,900]},"caseInsensitive",[["terminal",{sourceInterval:[892,899]},"minus"]]],["app",{sourceInterval:[908,935]},"caseInsensitive",[["terminal",{sourceInterval:[924,934]},"subtract"]]],["app",{sourceInterval:[943,968]},"caseInsensitive",[["terminal",{sourceInterval:[959,967]},"remove"]]],["app",{sourceInterval:[976,999]},"caseInsensitive",[["terminal",{sourceInterval:[992,998]},"take"]]]]],multiply:["define",{sourceInterval:[1011,1289]},null,[],["alt",{sourceInterval:[1028,1289]},["terminal",{sourceInterval:[1028,1031]},"*"],["terminal",{sourceInterval:[1039,1044]},"\\*"],["terminal",{sourceInterval:[1084,1094]},"\xD7"],["app",{sourceInterval:[1129,1149]},"caseInsensitive",[["terminal",{sourceInterval:[1145,1148]},"x"]]],["app",{sourceInterval:[1157,1184]},"caseInsensitive",[["terminal",{sourceInterval:[1173,1183]},"times by"]]],["app",{sourceInterval:[1192,1216]},"caseInsensitive",[["terminal",{sourceInterval:[1208,1215]},"times"]]],["app",{sourceInterval:[1224,1254]},"caseInsensitive",[["terminal",{sourceInterval:[1240,1253]},"multiply by"]]],["app",{sourceInterval:[1262,1289]},"caseInsensitive",[["terminal",{sourceInterval:[1278,1288]},"multiply"]]]]],divide:["define",{sourceInterval:[1301,1426]},null,[],["alt",{sourceInterval:[1315,1426]},["terminal",{sourceInterval:[1315,1318]},"/"],["terminal",{sourceInterval:[1326,1336]},"\xF7"],["app",{sourceInterval:[1365,1393]},"caseInsensitive",[["terminal",{sourceInterval:[1381,1392]},"divide by"]]],["app",{sourceInterval:[1401,1426]},"caseInsensitive",[["terminal",{sourceInterval:[1417,1425]},"divide"]]]]],modulo:["define",{sourceInterval:[1432,1512]},null,[],["alt",{sourceInterval:[1446,1512]},["terminal",{sourceInterval:[1446,1449]},"%"],["app",{sourceInterval:[1457,1482]},"caseInsensitive",[["terminal",{sourceInterval:[1473,1481]},"modulo"]]],["app",{sourceInterval:[1490,1512]},"caseInsensitive",[["terminal",{sourceInterval:[1506,1511]},"mod"]]]]],exponent:["define",{sourceInterval:[1518,1681]},null,[],["alt",{sourceInterval:[1534,1681]},["terminal",{sourceInterval:[1534,1537]},"^"],["app",{sourceInterval:[1545,1579]},"caseInsensitive",[["terminal",{sourceInterval:[1561,1578]},"to the power of"]]],["app",{sourceInterval:[1587,1614]},"caseInsensitive",[["terminal",{sourceInterval:[1603,1613]},"power of"]]],["app",{sourceInterval:[1622,1649]},"caseInsensitive",[["terminal",{sourceInterval:[1638,1648]},"exponent"]]],["app",{sourceInterval:[1657,1681]},"caseInsensitive",[["terminal",{sourceInterval:[1673,1680]},"prime"]]]]],constant:["define",{sourceInterval:[1687,1754]},null,[],["alt",{sourceInterval:[1704,1754]},["app",{sourceInterval:[1704,1725]},"caseInsensitive",[["terminal",{sourceInterval:[1720,1724]},"PI"]]],["app",{sourceInterval:[1734,1754]},"caseInsensitive",[["terminal",{sourceInterval:[1750,1753]},"E"]]]]],number_fract:["define",{sourceInterval:[1774,1801]},null,[],["seq",{sourceInterval:[1774,1791]},["star",{sourceInterval:[1774,1780]},["app",{sourceInterval:[1774,1779]},"digit",[]]],["terminal",{sourceInterval:[1781,1784]},"."],["plus",{sourceInterval:[1785,1791]},["app",{sourceInterval:[1785,1790]},"digit",[]]]]],number_whole:["define",{sourceInterval:[1809,1836]},null,[],["plus",{sourceInterval:[1809,1815]},["app",{sourceInterval:[1809,1814]},"digit",[]]]],number:["define",{sourceInterval:[1760,1836]},null,[],["alt",{sourceInterval:[1774,1836]},["app",{sourceInterval:[1774,1791]},"number_fract",[]],["app",{sourceInterval:[1809,1815]},"number_whole",[]]]],hex:["define",{sourceInterval:[1844,1890]},null,[],["alt",{sourceInterval:[1855,1890]},["seq",{sourceInterval:[1855,1869]},["terminal",{sourceInterval:[1855,1859]},"0x"],["plus",{sourceInterval:[1860,1869]},["app",{sourceInterval:[1860,1868]},"hexDigit",[]]]],["seq",{sourceInterval:[1877,1890]},["plus",{sourceInterval:[1877,1886]},["app",{sourceInterval:[1877,1885]},"hexDigit",[]]],["terminal",{sourceInterval:[1887,1890]},"h"]]]]}]);Wn.Vector2Arithmetic=qu(["grammar",{source:`Vector2Arithmetic <: BasicArithmetic {\r
  // Remove support for logical shift\r
  Expression \r
  	:=  AS\r
\r
  P\r
    := "(" Expression ")"  -- parenthesis\r
    | Vector2\r
    | Function\r
    | Primitive\r
\r
  // Remove modulo support for vector\r
  MD\r
    := MD multiply E  -- multiplication\r
    | MD divide E  -- division\r
    | E\r
\r
  Vector2\r
    = vector2? "(" Expression "," Expression ")" -- parse\r
\r
  Function\r
   = LengthSq\r
   | DistanceSq\r
   | Length\r
   | Distance\r
   | Normalise\r
   | Dot\r
   | AngleBetween\r
   | Cross\r
   | Lerp\r
\r
  LengthSq  = lengthSq "(" Vector2 ")" -- function\r
  DistanceSq  = distanceSq "(" Vector2 "," Vector2 ")" -- function\r
  Length  = length "(" Vector2 ")" -- function\r
  Distance  = distance "(" Vector2 "," Vector2 ")" -- function\r
  Normalise = normalise "(" Vector2 ")" -- function\r
  Dot = dot "(" Vector2 "," Vector2 ")" -- function\r
  AngleBetween = angleBetween "(" Vector2 "," Vector2 ")" -- function\r
  Cross = cross "(" Vector2 "," Vector2 ")" -- function\r
  Lerp = lerp "(" Vector2 "," Vector2 "," number ")" -- function\r
\r
  vector2 \r
 	  = caseInsensitive<"Vector2">\r
    | caseInsensitive<"Vec2">\r
\r
  lengthSq \r
 	  = caseInsensitive<"lengthSq">\r
    | caseInsensitive<"magnitudeSq">\r
\r
  distanceSq\r
    = caseInsensitive<"distanceSq">\r
\r
  length\r
 	  = caseInsensitive<"length">\r
    | caseInsensitive<"magnitude">\r
\r
  distance\r
    = caseInsensitive<"distance">\r
\r
  normalise \r
 	  = caseInsensitive<"normalise">\r
 	  | caseInsensitive<"normalize">\r
\r
  dot\r
    = caseInsensitive<"dotproduct">\r
    | caseInsensitive<"dot">\r
\r
  angleBetween\r
    = caseInsensitive<"angleBetween">\r
\r
  cross\r
    = caseInsensitive<"crossproduct">\r
    | caseInsensitive<"cross">\r
\r
  lerp\r
    = caseInsensitive<"lerp">\r
}`},"Vector2Arithmetic",Wn.BasicArithmetic,"Expression",{Expression:["override",{sourceInterval:[81,103]},null,[],["app",{sourceInterval:[101,103]},"AS",[]]],P_parenthesis:["override",{sourceInterval:[119,153]},null,[],["seq",{sourceInterval:[119,137]},["terminal",{sourceInterval:[119,122]},"("],["app",{sourceInterval:[123,133]},"Expression",[]],["terminal",{sourceInterval:[134,137]},")"]]],P:["override",{sourceInterval:[109,201]},null,[],["alt",{sourceInterval:[119,201]},["app",{sourceInterval:[119,137]},"P_parenthesis",[]],["app",{sourceInterval:[161,168]},"Vector2",[]],["app",{sourceInterval:[176,184]},"Function",[]],["app",{sourceInterval:[192,201]},"Primitive",[]]]],MD_multiplication:["override",{sourceInterval:[257,289]},null,[],["seq",{sourceInterval:[257,270]},["app",{sourceInterval:[257,259]},"MD",[]],["app",{sourceInterval:[260,268]},"multiply",[]],["app",{sourceInterval:[269,270]},"E",[]]]],MD_division:["override",{sourceInterval:[297,321]},null,[],["seq",{sourceInterval:[297,308]},["app",{sourceInterval:[297,299]},"MD",[]],["app",{sourceInterval:[300,306]},"divide",[]],["app",{sourceInterval:[307,308]},"E",[]]]],MD:["override",{sourceInterval:[246,330]},null,[],["alt",{sourceInterval:[257,330]},["app",{sourceInterval:[257,270]},"MD_multiplication",[]],["app",{sourceInterval:[297,308]},"MD_division",[]],["app",{sourceInterval:[329,330]},"E",[]]]],Vector2_parse:["define",{sourceInterval:[351,402]},null,[],["seq",{sourceInterval:[351,393]},["opt",{sourceInterval:[351,359]},["app",{sourceInterval:[351,358]},"vector2",[]]],["terminal",{sourceInterval:[360,363]},"("],["app",{sourceInterval:[364,374]},"Expression",[]],["terminal",{sourceInterval:[375,378]},","],["app",{sourceInterval:[379,389]},"Expression",[]],["terminal",{sourceInterval:[390,393]},")"]]],Vector2:["define",{sourceInterval:[336,402]},null,[],["app",{sourceInterval:[351,402]},"Vector2_parse",[]]],Function:["define",{sourceInterval:[408,544]},null,[],["alt",{sourceInterval:[423,544]},["app",{sourceInterval:[423,431]},"LengthSq",[]],["app",{sourceInterval:[438,448]},"DistanceSq",[]],["app",{sourceInterval:[455,461]},"Length",[]],["app",{sourceInterval:[468,476]},"Distance",[]],["app",{sourceInterval:[483,492]},"Normalise",[]],["app",{sourceInterval:[499,502]},"Dot",[]],["app",{sourceInterval:[509,521]},"AngleBetween",[]],["app",{sourceInterval:[528,533]},"Cross",[]],["app",{sourceInterval:[540,544]},"Lerp",[]]]],LengthSq_function:["define",{sourceInterval:[562,598]},null,[],["seq",{sourceInterval:[562,586]},["app",{sourceInterval:[562,570]},"lengthSq",[]],["terminal",{sourceInterval:[571,574]},"("],["app",{sourceInterval:[575,582]},"Vector2",[]],["terminal",{sourceInterval:[583,586]},")"]]],LengthSq:["define",{sourceInterval:[550,598]},null,[],["app",{sourceInterval:[562,598]},"LengthSq_function",[]]],DistanceSq_function:["define",{sourceInterval:[616,666]},null,[],["seq",{sourceInterval:[616,654]},["app",{sourceInterval:[616,626]},"distanceSq",[]],["terminal",{sourceInterval:[627,630]},"("],["app",{sourceInterval:[631,638]},"Vector2",[]],["terminal",{sourceInterval:[639,642]},","],["app",{sourceInterval:[643,650]},"Vector2",[]],["terminal",{sourceInterval:[651,654]},")"]]],DistanceSq:["define",{sourceInterval:[602,666]},null,[],["app",{sourceInterval:[616,666]},"DistanceSq_function",[]]],Length_function:["define",{sourceInterval:[680,714]},null,[],["seq",{sourceInterval:[680,702]},["app",{sourceInterval:[680,686]},"length",[]],["terminal",{sourceInterval:[687,690]},"("],["app",{sourceInterval:[691,698]},"Vector2",[]],["terminal",{sourceInterval:[699,702]},")"]]],Length:["define",{sourceInterval:[670,714]},null,[],["app",{sourceInterval:[680,714]},"Length_function",[]]],Distance_function:["define",{sourceInterval:[730,778]},null,[],["seq",{sourceInterval:[730,766]},["app",{sourceInterval:[730,738]},"distance",[]],["terminal",{sourceInterval:[739,742]},"("],["app",{sourceInterval:[743,750]},"Vector2",[]],["terminal",{sourceInterval:[751,754]},","],["app",{sourceInterval:[755,762]},"Vector2",[]],["terminal",{sourceInterval:[763,766]},")"]]],Distance:["define",{sourceInterval:[718,778]},null,[],["app",{sourceInterval:[730,778]},"Distance_function",[]]],Normalise_function:["define",{sourceInterval:[794,831]},null,[],["seq",{sourceInterval:[794,819]},["app",{sourceInterval:[794,803]},"normalise",[]],["terminal",{sourceInterval:[804,807]},"("],["app",{sourceInterval:[808,815]},"Vector2",[]],["terminal",{sourceInterval:[816,819]},")"]]],Normalise:["define",{sourceInterval:[782,831]},null,[],["app",{sourceInterval:[794,831]},"Normalise_function",[]]],Dot_function:["define",{sourceInterval:[841,884]},null,[],["seq",{sourceInterval:[841,872]},["app",{sourceInterval:[841,844]},"dot",[]],["terminal",{sourceInterval:[845,848]},"("],["app",{sourceInterval:[849,856]},"Vector2",[]],["terminal",{sourceInterval:[857,860]},","],["app",{sourceInterval:[861,868]},"Vector2",[]],["terminal",{sourceInterval:[869,872]},")"]]],Dot:["define",{sourceInterval:[835,884]},null,[],["app",{sourceInterval:[841,884]},"Dot_function",[]]],AngleBetween_function:["define",{sourceInterval:[903,955]},null,[],["seq",{sourceInterval:[903,943]},["app",{sourceInterval:[903,915]},"angleBetween",[]],["terminal",{sourceInterval:[916,919]},"("],["app",{sourceInterval:[920,927]},"Vector2",[]],["terminal",{sourceInterval:[928,931]},","],["app",{sourceInterval:[932,939]},"Vector2",[]],["terminal",{sourceInterval:[940,943]},")"]]],AngleBetween:["define",{sourceInterval:[888,955]},null,[],["app",{sourceInterval:[903,955]},"AngleBetween_function",[]]],Cross_function:["define",{sourceInterval:[967,1012]},null,[],["seq",{sourceInterval:[967,1e3]},["app",{sourceInterval:[967,972]},"cross",[]],["terminal",{sourceInterval:[973,976]},"("],["app",{sourceInterval:[977,984]},"Vector2",[]],["terminal",{sourceInterval:[985,988]},","],["app",{sourceInterval:[989,996]},"Vector2",[]],["terminal",{sourceInterval:[997,1e3]},")"]]],Cross:["define",{sourceInterval:[959,1012]},null,[],["app",{sourceInterval:[967,1012]},"Cross_function",[]]],Lerp_function:["define",{sourceInterval:[1023,1078]},null,[],["seq",{sourceInterval:[1023,1066]},["app",{sourceInterval:[1023,1027]},"lerp",[]],["terminal",{sourceInterval:[1028,1031]},"("],["app",{sourceInterval:[1032,1039]},"Vector2",[]],["terminal",{sourceInterval:[1040,1043]},","],["app",{sourceInterval:[1044,1051]},"Vector2",[]],["terminal",{sourceInterval:[1052,1055]},","],["app",{sourceInterval:[1056,1062]},"number",[]],["terminal",{sourceInterval:[1063,1066]},")"]]],Lerp:["define",{sourceInterval:[1016,1078]},null,[],["app",{sourceInterval:[1023,1078]},"Lerp_function",[]]],vector2:["define",{sourceInterval:[1084,1157]},null,[],["alt",{sourceInterval:[1100,1157]},["app",{sourceInterval:[1100,1126]},"caseInsensitive",[["terminal",{sourceInterval:[1116,1125]},"Vector2"]]],["app",{sourceInterval:[1134,1157]},"caseInsensitive",[["terminal",{sourceInterval:[1150,1156]},"Vec2"]]]]],lengthSq:["define",{sourceInterval:[1163,1245]},null,[],["alt",{sourceInterval:[1180,1245]},["app",{sourceInterval:[1180,1207]},"caseInsensitive",[["terminal",{sourceInterval:[1196,1206]},"lengthSq"]]],["app",{sourceInterval:[1215,1245]},"caseInsensitive",[["terminal",{sourceInterval:[1231,1244]},"magnitudeSq"]]]]],distanceSq:["define",{sourceInterval:[1251,1298]},null,[],["app",{sourceInterval:[1269,1298]},"caseInsensitive",[["terminal",{sourceInterval:[1285,1297]},"distanceSq"]]]],length:["define",{sourceInterval:[1304,1379]},null,[],["alt",{sourceInterval:[1318,1379]},["app",{sourceInterval:[1318,1343]},"caseInsensitive",[["terminal",{sourceInterval:[1334,1342]},"length"]]],["app",{sourceInterval:[1351,1379]},"caseInsensitive",[["terminal",{sourceInterval:[1367,1378]},"magnitude"]]]]],distance:["define",{sourceInterval:[1385,1428]},null,[],["app",{sourceInterval:[1401,1428]},"caseInsensitive",[["terminal",{sourceInterval:[1417,1427]},"distance"]]]],normalise:["define",{sourceInterval:[1434,1516]},null,[],["alt",{sourceInterval:[1452,1516]},["app",{sourceInterval:[1452,1480]},"caseInsensitive",[["terminal",{sourceInterval:[1468,1479]},"normalise"]]],["app",{sourceInterval:[1488,1516]},"caseInsensitive",[["terminal",{sourceInterval:[1504,1515]},"normalize"]]]]],dot:["define",{sourceInterval:[1522,1592]},null,[],["alt",{sourceInterval:[1533,1592]},["app",{sourceInterval:[1533,1562]},"caseInsensitive",[["terminal",{sourceInterval:[1549,1561]},"dotproduct"]]],["app",{sourceInterval:[1570,1592]},"caseInsensitive",[["terminal",{sourceInterval:[1586,1591]},"dot"]]]]],angleBetween:["define",{sourceInterval:[1598,1649]},null,[],["app",{sourceInterval:[1618,1649]},"caseInsensitive",[["terminal",{sourceInterval:[1634,1648]},"angleBetween"]]]],cross:["define",{sourceInterval:[1655,1731]},null,[],["alt",{sourceInterval:[1668,1731]},["app",{sourceInterval:[1668,1699]},"caseInsensitive",[["terminal",{sourceInterval:[1684,1698]},"crossproduct"]]],["app",{sourceInterval:[1707,1731]},"caseInsensitive",[["terminal",{sourceInterval:[1723,1730]},"cross"]]]]],lerp:["define",{sourceInterval:[1737,1772]},null,[],["app",{sourceInterval:[1749,1772]},"caseInsensitive",[["terminal",{sourceInterval:[1765,1771]},"lerp"]]]]}]);Uu.exports=Wn});var Wu=O((h3,Gu)=>{"use strict";var{makeRecipe:Yu}=nt(),zn={};zn.BasicArithmetic=Yu(["grammar",{source:`BasicArithmetic {\r
  Expression\r
    = LogicalShift\r
\r
  LogicalShift\r
    = LogicalShift "<<" LogicalShift -- left\r
    | LogicalShift ">>" LogicalShift -- right\r
    | AS \r
\r
  // Addition or Subtraction\r
  AS\r
    = AS add MD  -- addition\r
    | AS subtract MD  -- subtraction\r
    | MD\r
\r
  // Multiply or Divide\r
  MD\r
    = MD multiply E  -- multiplication\r
    | MD divide E  -- division\r
    | MD modulo E  -- modulo\r
    | E\r
\r
  // Exponent\r
  E\r
    = P exponent E  -- exponent\r
    | P\r
\r
  // Parenthesis\r
  P\r
    = "(" Expression ")"  -- parenthesis\r
    | Primitive\r
    \r
  Primitive\r
    = "+" Primitive -- positive\r
    | "-" Primitive -- negative\r
    | constant\r
    | hex\r
    | number\r
 \r
  // Lexical Rules\r
  add \r
  	= "+"\r
    | caseInsensitive<"plus">\r
  	| caseInsensitive<"add">\r
    | caseInsensitive<"and">\r
    \r
  subtract \r
    = "-"\r
    | caseInsensitive<"minus">\r
    | caseInsensitive<"subtract">\r
    | caseInsensitive<"remove">\r
    | caseInsensitive<"take">\r
      \r
  multiply \r
    = "*"\r
    | "\\\\*" // Escaped e.g. \\* for markdown\r
    | "\\u{00D7}" // Multiplication Symbol \xD7\r
    | caseInsensitive<"x">\r
    | caseInsensitive<"times by">\r
    | caseInsensitive<"times">\r
    | caseInsensitive<"multiply by">\r
    | caseInsensitive<"multiply">\r
      \r
  divide\r
    = "/"\r
    | "\\u{00F7}" // Division Symbol \xF7\r
    | caseInsensitive<"divide by">\r
    | caseInsensitive<"divide">\r
\r
  modulo\r
    = "%"\r
    | caseInsensitive<"modulo">\r
    | caseInsensitive<"mod">\r
\r
  exponent\r
    = "^"\r
    | caseInsensitive<"to the power of">\r
    | caseInsensitive<"power of">\r
    | caseInsensitive<"exponent">\r
    | caseInsensitive<"prime">\r
\r
  constant  \r
  	= caseInsensitive<"PI"> \r
    | caseInsensitive<"E">\r
\r
  number\r
    = digit* "." digit+  -- fract\r
    | digit+             -- whole\r
  \r
  hex\r
    = "0x" hexDigit+\r
    | hexDigit+ "h"\r
}`},"BasicArithmetic",null,"Expression",{Expression:["define",{sourceInterval:[21,51]},null,[],["app",{sourceInterval:[39,51]},"LogicalShift",[]]],LogicalShift_left:["define",{sourceInterval:[77,115]},null,[],["seq",{sourceInterval:[77,107]},["app",{sourceInterval:[77,89]},"LogicalShift",[]],["terminal",{sourceInterval:[90,94]},"<<"],["app",{sourceInterval:[95,107]},"LogicalShift",[]]]],LogicalShift_right:["define",{sourceInterval:[123,162]},null,[],["seq",{sourceInterval:[123,153]},["app",{sourceInterval:[123,135]},"LogicalShift",[]],["terminal",{sourceInterval:[136,140]},">>"],["app",{sourceInterval:[141,153]},"LogicalShift",[]]]],LogicalShift:["define",{sourceInterval:[57,172]},null,[],["alt",{sourceInterval:[77,172]},["app",{sourceInterval:[77,107]},"LogicalShift_left",[]],["app",{sourceInterval:[123,153]},"LogicalShift_right",[]],["app",{sourceInterval:[170,172]},"AS",[]]]],AS_addition:["define",{sourceInterval:[219,241]},null,[],["seq",{sourceInterval:[219,228]},["app",{sourceInterval:[219,221]},"AS",[]],["app",{sourceInterval:[222,225]},"add",[]],["app",{sourceInterval:[226,228]},"MD",[]]]],AS_subtraction:["define",{sourceInterval:[249,279]},null,[],["seq",{sourceInterval:[249,263]},["app",{sourceInterval:[249,251]},"AS",[]],["app",{sourceInterval:[252,260]},"subtract",[]],["app",{sourceInterval:[261,263]},"MD",[]]]],AS:["define",{sourceInterval:[209,289]},null,[],["alt",{sourceInterval:[219,289]},["app",{sourceInterval:[219,228]},"AS_addition",[]],["app",{sourceInterval:[249,263]},"AS_subtraction",[]],["app",{sourceInterval:[287,289]},"MD",[]]]],MD_multiplication:["define",{sourceInterval:[330,362]},null,[],["seq",{sourceInterval:[330,343]},["app",{sourceInterval:[330,332]},"MD",[]],["app",{sourceInterval:[333,341]},"multiply",[]],["app",{sourceInterval:[342,343]},"E",[]]]],MD_division:["define",{sourceInterval:[370,394]},null,[],["seq",{sourceInterval:[370,381]},["app",{sourceInterval:[370,372]},"MD",[]],["app",{sourceInterval:[373,379]},"divide",[]],["app",{sourceInterval:[380,381]},"E",[]]]],MD_modulo:["define",{sourceInterval:[402,424]},null,[],["seq",{sourceInterval:[402,413]},["app",{sourceInterval:[402,404]},"MD",[]],["app",{sourceInterval:[405,411]},"modulo",[]],["app",{sourceInterval:[412,413]},"E",[]]]],MD:["define",{sourceInterval:[320,433]},null,[],["alt",{sourceInterval:[330,433]},["app",{sourceInterval:[330,343]},"MD_multiplication",[]],["app",{sourceInterval:[370,381]},"MD_division",[]],["app",{sourceInterval:[402,413]},"MD_modulo",[]],["app",{sourceInterval:[432,433]},"E",[]]]],E_exponent:["define",{sourceInterval:[463,488]},null,[],["seq",{sourceInterval:[463,475]},["app",{sourceInterval:[463,464]},"P",[]],["app",{sourceInterval:[465,473]},"exponent",[]],["app",{sourceInterval:[474,475]},"E",[]]]],E:["define",{sourceInterval:[454,497]},null,[],["alt",{sourceInterval:[463,497]},["app",{sourceInterval:[463,475]},"E_exponent",[]],["app",{sourceInterval:[496,497]},"P",[]]]],P_parenthesis:["define",{sourceInterval:[530,564]},null,[],["seq",{sourceInterval:[530,548]},["terminal",{sourceInterval:[530,533]},"("],["app",{sourceInterval:[534,544]},"Expression",[]],["terminal",{sourceInterval:[545,548]},")"]]],P:["define",{sourceInterval:[521,581]},null,[],["alt",{sourceInterval:[530,581]},["app",{sourceInterval:[530,548]},"P_parenthesis",[]],["app",{sourceInterval:[572,581]},"Primitive",[]]]],Primitive_positive:["define",{sourceInterval:[608,633]},null,[],["seq",{sourceInterval:[608,621]},["terminal",{sourceInterval:[608,611]},"+"],["app",{sourceInterval:[612,621]},"Primitive",[]]]],Primitive_negative:["define",{sourceInterval:[641,666]},null,[],["seq",{sourceInterval:[641,654]},["terminal",{sourceInterval:[641,644]},"-"],["app",{sourceInterval:[645,654]},"Primitive",[]]]],Primitive:["define",{sourceInterval:[591,707]},null,[],["alt",{sourceInterval:[608,707]},["app",{sourceInterval:[608,621]},"Primitive_positive",[]],["app",{sourceInterval:[641,654]},"Primitive_negative",[]],["app",{sourceInterval:[674,682]},"constant",[]],["app",{sourceInterval:[690,693]},"hex",[]],["app",{sourceInterval:[701,707]},"number",[]]]],add:["define",{sourceInterval:[734,838]},null,[],["alt",{sourceInterval:[745,838]},["terminal",{sourceInterval:[745,748]},"+"],["app",{sourceInterval:[756,779]},"caseInsensitive",[["terminal",{sourceInterval:[772,778]},"plus"]]],["app",{sourceInterval:[786,808]},"caseInsensitive",[["terminal",{sourceInterval:[802,807]},"add"]]],["app",{sourceInterval:[816,838]},"caseInsensitive",[["terminal",{sourceInterval:[832,837]},"and"]]]]],subtract:["define",{sourceInterval:[848,999]},null,[],["alt",{sourceInterval:[865,999]},["terminal",{sourceInterval:[865,868]},"-"],["app",{sourceInterval:[876,900]},"caseInsensitive",[["terminal",{sourceInterval:[892,899]},"minus"]]],["app",{sourceInterval:[908,935]},"caseInsensitive",[["terminal",{sourceInterval:[924,934]},"subtract"]]],["app",{sourceInterval:[943,968]},"caseInsensitive",[["terminal",{sourceInterval:[959,967]},"remove"]]],["app",{sourceInterval:[976,999]},"caseInsensitive",[["terminal",{sourceInterval:[992,998]},"take"]]]]],multiply:["define",{sourceInterval:[1011,1289]},null,[],["alt",{sourceInterval:[1028,1289]},["terminal",{sourceInterval:[1028,1031]},"*"],["terminal",{sourceInterval:[1039,1044]},"\\*"],["terminal",{sourceInterval:[1084,1094]},"\xD7"],["app",{sourceInterval:[1129,1149]},"caseInsensitive",[["terminal",{sourceInterval:[1145,1148]},"x"]]],["app",{sourceInterval:[1157,1184]},"caseInsensitive",[["terminal",{sourceInterval:[1173,1183]},"times by"]]],["app",{sourceInterval:[1192,1216]},"caseInsensitive",[["terminal",{sourceInterval:[1208,1215]},"times"]]],["app",{sourceInterval:[1224,1254]},"caseInsensitive",[["terminal",{sourceInterval:[1240,1253]},"multiply by"]]],["app",{sourceInterval:[1262,1289]},"caseInsensitive",[["terminal",{sourceInterval:[1278,1288]},"multiply"]]]]],divide:["define",{sourceInterval:[1301,1426]},null,[],["alt",{sourceInterval:[1315,1426]},["terminal",{sourceInterval:[1315,1318]},"/"],["terminal",{sourceInterval:[1326,1336]},"\xF7"],["app",{sourceInterval:[1365,1393]},"caseInsensitive",[["terminal",{sourceInterval:[1381,1392]},"divide by"]]],["app",{sourceInterval:[1401,1426]},"caseInsensitive",[["terminal",{sourceInterval:[1417,1425]},"divide"]]]]],modulo:["define",{sourceInterval:[1432,1512]},null,[],["alt",{sourceInterval:[1446,1512]},["terminal",{sourceInterval:[1446,1449]},"%"],["app",{sourceInterval:[1457,1482]},"caseInsensitive",[["terminal",{sourceInterval:[1473,1481]},"modulo"]]],["app",{sourceInterval:[1490,1512]},"caseInsensitive",[["terminal",{sourceInterval:[1506,1511]},"mod"]]]]],exponent:["define",{sourceInterval:[1518,1681]},null,[],["alt",{sourceInterval:[1534,1681]},["terminal",{sourceInterval:[1534,1537]},"^"],["app",{sourceInterval:[1545,1579]},"caseInsensitive",[["terminal",{sourceInterval:[1561,1578]},"to the power of"]]],["app",{sourceInterval:[1587,1614]},"caseInsensitive",[["terminal",{sourceInterval:[1603,1613]},"power of"]]],["app",{sourceInterval:[1622,1649]},"caseInsensitive",[["terminal",{sourceInterval:[1638,1648]},"exponent"]]],["app",{sourceInterval:[1657,1681]},"caseInsensitive",[["terminal",{sourceInterval:[1673,1680]},"prime"]]]]],constant:["define",{sourceInterval:[1687,1754]},null,[],["alt",{sourceInterval:[1704,1754]},["app",{sourceInterval:[1704,1725]},"caseInsensitive",[["terminal",{sourceInterval:[1720,1724]},"PI"]]],["app",{sourceInterval:[1734,1754]},"caseInsensitive",[["terminal",{sourceInterval:[1750,1753]},"E"]]]]],number_fract:["define",{sourceInterval:[1774,1801]},null,[],["seq",{sourceInterval:[1774,1791]},["star",{sourceInterval:[1774,1780]},["app",{sourceInterval:[1774,1779]},"digit",[]]],["terminal",{sourceInterval:[1781,1784]},"."],["plus",{sourceInterval:[1785,1791]},["app",{sourceInterval:[1785,1790]},"digit",[]]]]],number_whole:["define",{sourceInterval:[1809,1836]},null,[],["plus",{sourceInterval:[1809,1815]},["app",{sourceInterval:[1809,1814]},"digit",[]]]],number:["define",{sourceInterval:[1760,1836]},null,[],["alt",{sourceInterval:[1774,1836]},["app",{sourceInterval:[1774,1791]},"number_fract",[]],["app",{sourceInterval:[1809,1815]},"number_whole",[]]]],hex:["define",{sourceInterval:[1844,1890]},null,[],["alt",{sourceInterval:[1855,1890]},["seq",{sourceInterval:[1855,1869]},["terminal",{sourceInterval:[1855,1859]},"0x"],["plus",{sourceInterval:[1860,1869]},["app",{sourceInterval:[1860,1868]},"hexDigit",[]]]],["seq",{sourceInterval:[1877,1890]},["plus",{sourceInterval:[1877,1886]},["app",{sourceInterval:[1877,1885]},"hexDigit",[]]],["terminal",{sourceInterval:[1887,1890]},"h"]]]]}]);zn.Vector3Arithmetic=Yu(["grammar",{source:`Vector3Arithmetic <: BasicArithmetic {\r
  // Remove support for logical shift\r
  Expression \r
  	:=  AS\r
\r
  P\r
    := "(" Expression ")"  -- parenthesis\r
    | Vector3\r
    | Function\r
    | Primitive\r
\r
  // Remove modulo support for vector\r
  MD\r
    := MD multiply E  -- multiplication\r
    | MD divide E  -- division\r
    | E\r
\r
  Vector3\r
    = vector3? "(" Expression "," Expression "," Expression ")" -- parse\r
\r
  Function\r
   = LengthSq\r
   | DistanceSq\r
   | Length\r
   | Distance\r
   | Normalise\r
   | Dot\r
   | AngleBetween\r
   | Cross\r
   | Lerp\r
\r
  LengthSq  = lengthSq "(" Vector3 ")" -- function\r
  DistanceSq  = distanceSq "(" Vector3 "," Vector3 ")" -- function\r
  Length  = length "(" Vector3 ")" -- function\r
  Distance  = distance "(" Vector3 "," Vector3 ")" -- function\r
  Normalise = normalise "(" Vector3 ")" -- function\r
  Dot = dot "(" Vector3 "," Vector3 ")" -- function\r
  AngleBetween = angleBetween "(" Vector3 "," Vector3 ")" -- function\r
  Cross = cross "(" Vector3 "," Vector3 ")" -- function\r
  Lerp = lerp "(" Vector3 "," Vector3 "," number ")" -- function\r
\r
  vector3 \r
 	  = caseInsensitive<"Vector3">\r
    | caseInsensitive<"Vec3">\r
\r
  lengthSq \r
 	  = caseInsensitive<"lengthSq">\r
    | caseInsensitive<"magnitudeSq">\r
\r
  distanceSq\r
    = caseInsensitive<"distanceSq">\r
\r
  length\r
 	  = caseInsensitive<"length">\r
    | caseInsensitive<"magnitude">\r
\r
  distance\r
    = caseInsensitive<"distance">\r
\r
  normalise \r
 	  = caseInsensitive<"normalise">\r
 	  | caseInsensitive<"normalize">\r
\r
  dot\r
    = caseInsensitive<"dotproduct">\r
    | caseInsensitive<"dot">\r
\r
  angleBetween\r
    = caseInsensitive<"angleBetween">\r
\r
  cross\r
    = caseInsensitive<"crossproduct">\r
    | caseInsensitive<"cross">\r
\r
  lerp\r
    = caseInsensitive<"lerp">\r
}`},"Vector3Arithmetic",zn.BasicArithmetic,"Expression",{Expression:["override",{sourceInterval:[81,103]},null,[],["app",{sourceInterval:[101,103]},"AS",[]]],P_parenthesis:["override",{sourceInterval:[119,153]},null,[],["seq",{sourceInterval:[119,137]},["terminal",{sourceInterval:[119,122]},"("],["app",{sourceInterval:[123,133]},"Expression",[]],["terminal",{sourceInterval:[134,137]},")"]]],P:["override",{sourceInterval:[109,201]},null,[],["alt",{sourceInterval:[119,201]},["app",{sourceInterval:[119,137]},"P_parenthesis",[]],["app",{sourceInterval:[161,168]},"Vector3",[]],["app",{sourceInterval:[176,184]},"Function",[]],["app",{sourceInterval:[192,201]},"Primitive",[]]]],MD_multiplication:["override",{sourceInterval:[257,289]},null,[],["seq",{sourceInterval:[257,270]},["app",{sourceInterval:[257,259]},"MD",[]],["app",{sourceInterval:[260,268]},"multiply",[]],["app",{sourceInterval:[269,270]},"E",[]]]],MD_division:["override",{sourceInterval:[297,321]},null,[],["seq",{sourceInterval:[297,308]},["app",{sourceInterval:[297,299]},"MD",[]],["app",{sourceInterval:[300,306]},"divide",[]],["app",{sourceInterval:[307,308]},"E",[]]]],MD:["override",{sourceInterval:[246,330]},null,[],["alt",{sourceInterval:[257,330]},["app",{sourceInterval:[257,270]},"MD_multiplication",[]],["app",{sourceInterval:[297,308]},"MD_division",[]],["app",{sourceInterval:[329,330]},"E",[]]]],Vector3_parse:["define",{sourceInterval:[351,417]},null,[],["seq",{sourceInterval:[351,408]},["opt",{sourceInterval:[351,359]},["app",{sourceInterval:[351,358]},"vector3",[]]],["terminal",{sourceInterval:[360,363]},"("],["app",{sourceInterval:[364,374]},"Expression",[]],["terminal",{sourceInterval:[375,378]},","],["app",{sourceInterval:[379,389]},"Expression",[]],["terminal",{sourceInterval:[390,393]},","],["app",{sourceInterval:[394,404]},"Expression",[]],["terminal",{sourceInterval:[405,408]},")"]]],Vector3:["define",{sourceInterval:[336,417]},null,[],["app",{sourceInterval:[351,417]},"Vector3_parse",[]]],Function:["define",{sourceInterval:[423,559]},null,[],["alt",{sourceInterval:[438,559]},["app",{sourceInterval:[438,446]},"LengthSq",[]],["app",{sourceInterval:[453,463]},"DistanceSq",[]],["app",{sourceInterval:[470,476]},"Length",[]],["app",{sourceInterval:[483,491]},"Distance",[]],["app",{sourceInterval:[498,507]},"Normalise",[]],["app",{sourceInterval:[514,517]},"Dot",[]],["app",{sourceInterval:[524,536]},"AngleBetween",[]],["app",{sourceInterval:[543,548]},"Cross",[]],["app",{sourceInterval:[555,559]},"Lerp",[]]]],LengthSq_function:["define",{sourceInterval:[577,613]},null,[],["seq",{sourceInterval:[577,601]},["app",{sourceInterval:[577,585]},"lengthSq",[]],["terminal",{sourceInterval:[586,589]},"("],["app",{sourceInterval:[590,597]},"Vector3",[]],["terminal",{sourceInterval:[598,601]},")"]]],LengthSq:["define",{sourceInterval:[565,613]},null,[],["app",{sourceInterval:[577,613]},"LengthSq_function",[]]],DistanceSq_function:["define",{sourceInterval:[631,681]},null,[],["seq",{sourceInterval:[631,669]},["app",{sourceInterval:[631,641]},"distanceSq",[]],["terminal",{sourceInterval:[642,645]},"("],["app",{sourceInterval:[646,653]},"Vector3",[]],["terminal",{sourceInterval:[654,657]},","],["app",{sourceInterval:[658,665]},"Vector3",[]],["terminal",{sourceInterval:[666,669]},")"]]],DistanceSq:["define",{sourceInterval:[617,681]},null,[],["app",{sourceInterval:[631,681]},"DistanceSq_function",[]]],Length_function:["define",{sourceInterval:[695,729]},null,[],["seq",{sourceInterval:[695,717]},["app",{sourceInterval:[695,701]},"length",[]],["terminal",{sourceInterval:[702,705]},"("],["app",{sourceInterval:[706,713]},"Vector3",[]],["terminal",{sourceInterval:[714,717]},")"]]],Length:["define",{sourceInterval:[685,729]},null,[],["app",{sourceInterval:[695,729]},"Length_function",[]]],Distance_function:["define",{sourceInterval:[745,793]},null,[],["seq",{sourceInterval:[745,781]},["app",{sourceInterval:[745,753]},"distance",[]],["terminal",{sourceInterval:[754,757]},"("],["app",{sourceInterval:[758,765]},"Vector3",[]],["terminal",{sourceInterval:[766,769]},","],["app",{sourceInterval:[770,777]},"Vector3",[]],["terminal",{sourceInterval:[778,781]},")"]]],Distance:["define",{sourceInterval:[733,793]},null,[],["app",{sourceInterval:[745,793]},"Distance_function",[]]],Normalise_function:["define",{sourceInterval:[809,846]},null,[],["seq",{sourceInterval:[809,834]},["app",{sourceInterval:[809,818]},"normalise",[]],["terminal",{sourceInterval:[819,822]},"("],["app",{sourceInterval:[823,830]},"Vector3",[]],["terminal",{sourceInterval:[831,834]},")"]]],Normalise:["define",{sourceInterval:[797,846]},null,[],["app",{sourceInterval:[809,846]},"Normalise_function",[]]],Dot_function:["define",{sourceInterval:[856,899]},null,[],["seq",{sourceInterval:[856,887]},["app",{sourceInterval:[856,859]},"dot",[]],["terminal",{sourceInterval:[860,863]},"("],["app",{sourceInterval:[864,871]},"Vector3",[]],["terminal",{sourceInterval:[872,875]},","],["app",{sourceInterval:[876,883]},"Vector3",[]],["terminal",{sourceInterval:[884,887]},")"]]],Dot:["define",{sourceInterval:[850,899]},null,[],["app",{sourceInterval:[856,899]},"Dot_function",[]]],AngleBetween_function:["define",{sourceInterval:[918,970]},null,[],["seq",{sourceInterval:[918,958]},["app",{sourceInterval:[918,930]},"angleBetween",[]],["terminal",{sourceInterval:[931,934]},"("],["app",{sourceInterval:[935,942]},"Vector3",[]],["terminal",{sourceInterval:[943,946]},","],["app",{sourceInterval:[947,954]},"Vector3",[]],["terminal",{sourceInterval:[955,958]},")"]]],AngleBetween:["define",{sourceInterval:[903,970]},null,[],["app",{sourceInterval:[918,970]},"AngleBetween_function",[]]],Cross_function:["define",{sourceInterval:[982,1027]},null,[],["seq",{sourceInterval:[982,1015]},["app",{sourceInterval:[982,987]},"cross",[]],["terminal",{sourceInterval:[988,991]},"("],["app",{sourceInterval:[992,999]},"Vector3",[]],["terminal",{sourceInterval:[1e3,1003]},","],["app",{sourceInterval:[1004,1011]},"Vector3",[]],["terminal",{sourceInterval:[1012,1015]},")"]]],Cross:["define",{sourceInterval:[974,1027]},null,[],["app",{sourceInterval:[982,1027]},"Cross_function",[]]],Lerp_function:["define",{sourceInterval:[1038,1093]},null,[],["seq",{sourceInterval:[1038,1081]},["app",{sourceInterval:[1038,1042]},"lerp",[]],["terminal",{sourceInterval:[1043,1046]},"("],["app",{sourceInterval:[1047,1054]},"Vector3",[]],["terminal",{sourceInterval:[1055,1058]},","],["app",{sourceInterval:[1059,1066]},"Vector3",[]],["terminal",{sourceInterval:[1067,1070]},","],["app",{sourceInterval:[1071,1077]},"number",[]],["terminal",{sourceInterval:[1078,1081]},")"]]],Lerp:["define",{sourceInterval:[1031,1093]},null,[],["app",{sourceInterval:[1038,1093]},"Lerp_function",[]]],vector3:["define",{sourceInterval:[1099,1172]},null,[],["alt",{sourceInterval:[1115,1172]},["app",{sourceInterval:[1115,1141]},"caseInsensitive",[["terminal",{sourceInterval:[1131,1140]},"Vector3"]]],["app",{sourceInterval:[1149,1172]},"caseInsensitive",[["terminal",{sourceInterval:[1165,1171]},"Vec3"]]]]],lengthSq:["define",{sourceInterval:[1178,1260]},null,[],["alt",{sourceInterval:[1195,1260]},["app",{sourceInterval:[1195,1222]},"caseInsensitive",[["terminal",{sourceInterval:[1211,1221]},"lengthSq"]]],["app",{sourceInterval:[1230,1260]},"caseInsensitive",[["terminal",{sourceInterval:[1246,1259]},"magnitudeSq"]]]]],distanceSq:["define",{sourceInterval:[1266,1313]},null,[],["app",{sourceInterval:[1284,1313]},"caseInsensitive",[["terminal",{sourceInterval:[1300,1312]},"distanceSq"]]]],length:["define",{sourceInterval:[1319,1394]},null,[],["alt",{sourceInterval:[1333,1394]},["app",{sourceInterval:[1333,1358]},"caseInsensitive",[["terminal",{sourceInterval:[1349,1357]},"length"]]],["app",{sourceInterval:[1366,1394]},"caseInsensitive",[["terminal",{sourceInterval:[1382,1393]},"magnitude"]]]]],distance:["define",{sourceInterval:[1400,1443]},null,[],["app",{sourceInterval:[1416,1443]},"caseInsensitive",[["terminal",{sourceInterval:[1432,1442]},"distance"]]]],normalise:["define",{sourceInterval:[1449,1531]},null,[],["alt",{sourceInterval:[1467,1531]},["app",{sourceInterval:[1467,1495]},"caseInsensitive",[["terminal",{sourceInterval:[1483,1494]},"normalise"]]],["app",{sourceInterval:[1503,1531]},"caseInsensitive",[["terminal",{sourceInterval:[1519,1530]},"normalize"]]]]],dot:["define",{sourceInterval:[1537,1607]},null,[],["alt",{sourceInterval:[1548,1607]},["app",{sourceInterval:[1548,1577]},"caseInsensitive",[["terminal",{sourceInterval:[1564,1576]},"dotproduct"]]],["app",{sourceInterval:[1585,1607]},"caseInsensitive",[["terminal",{sourceInterval:[1601,1606]},"dot"]]]]],angleBetween:["define",{sourceInterval:[1613,1664]},null,[],["app",{sourceInterval:[1633,1664]},"caseInsensitive",[["terminal",{sourceInterval:[1649,1663]},"angleBetween"]]]],cross:["define",{sourceInterval:[1670,1746]},null,[],["alt",{sourceInterval:[1683,1746]},["app",{sourceInterval:[1683,1714]},"caseInsensitive",[["terminal",{sourceInterval:[1699,1713]},"crossproduct"]]],["app",{sourceInterval:[1722,1746]},"caseInsensitive",[["terminal",{sourceInterval:[1738,1745]},"cross"]]]]],lerp:["define",{sourceInterval:[1752,1787]},null,[],["app",{sourceInterval:[1764,1787]},"caseInsensitive",[["terminal",{sourceInterval:[1780,1786]},"lerp"]]]]}]);Gu.exports=zn});var ju=O((d3,Hu)=>{"use strict";var{makeRecipe:zu}=nt(),Hn={};Hn.BasicArithmetic=zu(["grammar",{source:`BasicArithmetic {\r
  Expression\r
    = LogicalShift\r
\r
  LogicalShift\r
    = LogicalShift "<<" LogicalShift -- left\r
    | LogicalShift ">>" LogicalShift -- right\r
    | AS \r
\r
  // Addition or Subtraction\r
  AS\r
    = AS add MD  -- addition\r
    | AS subtract MD  -- subtraction\r
    | MD\r
\r
  // Multiply or Divide\r
  MD\r
    = MD multiply E  -- multiplication\r
    | MD divide E  -- division\r
    | MD modulo E  -- modulo\r
    | E\r
\r
  // Exponent\r
  E\r
    = P exponent E  -- exponent\r
    | P\r
\r
  // Parenthesis\r
  P\r
    = "(" Expression ")"  -- parenthesis\r
    | Primitive\r
    \r
  Primitive\r
    = "+" Primitive -- positive\r
    | "-" Primitive -- negative\r
    | constant\r
    | hex\r
    | number\r
 \r
  // Lexical Rules\r
  add \r
  	= "+"\r
    | caseInsensitive<"plus">\r
  	| caseInsensitive<"add">\r
    | caseInsensitive<"and">\r
    \r
  subtract \r
    = "-"\r
    | caseInsensitive<"minus">\r
    | caseInsensitive<"subtract">\r
    | caseInsensitive<"remove">\r
    | caseInsensitive<"take">\r
      \r
  multiply \r
    = "*"\r
    | "\\\\*" // Escaped e.g. \\* for markdown\r
    | "\\u{00D7}" // Multiplication Symbol \xD7\r
    | caseInsensitive<"x">\r
    | caseInsensitive<"times by">\r
    | caseInsensitive<"times">\r
    | caseInsensitive<"multiply by">\r
    | caseInsensitive<"multiply">\r
      \r
  divide\r
    = "/"\r
    | "\\u{00F7}" // Division Symbol \xF7\r
    | caseInsensitive<"divide by">\r
    | caseInsensitive<"divide">\r
\r
  modulo\r
    = "%"\r
    | caseInsensitive<"modulo">\r
    | caseInsensitive<"mod">\r
\r
  exponent\r
    = "^"\r
    | caseInsensitive<"to the power of">\r
    | caseInsensitive<"power of">\r
    | caseInsensitive<"exponent">\r
    | caseInsensitive<"prime">\r
\r
  constant  \r
  	= caseInsensitive<"PI"> \r
    | caseInsensitive<"E">\r
\r
  number\r
    = digit* "." digit+  -- fract\r
    | digit+             -- whole\r
  \r
  hex\r
    = "0x" hexDigit+\r
    | hexDigit+ "h"\r
}`},"BasicArithmetic",null,"Expression",{Expression:["define",{sourceInterval:[21,51]},null,[],["app",{sourceInterval:[39,51]},"LogicalShift",[]]],LogicalShift_left:["define",{sourceInterval:[77,115]},null,[],["seq",{sourceInterval:[77,107]},["app",{sourceInterval:[77,89]},"LogicalShift",[]],["terminal",{sourceInterval:[90,94]},"<<"],["app",{sourceInterval:[95,107]},"LogicalShift",[]]]],LogicalShift_right:["define",{sourceInterval:[123,162]},null,[],["seq",{sourceInterval:[123,153]},["app",{sourceInterval:[123,135]},"LogicalShift",[]],["terminal",{sourceInterval:[136,140]},">>"],["app",{sourceInterval:[141,153]},"LogicalShift",[]]]],LogicalShift:["define",{sourceInterval:[57,172]},null,[],["alt",{sourceInterval:[77,172]},["app",{sourceInterval:[77,107]},"LogicalShift_left",[]],["app",{sourceInterval:[123,153]},"LogicalShift_right",[]],["app",{sourceInterval:[170,172]},"AS",[]]]],AS_addition:["define",{sourceInterval:[219,241]},null,[],["seq",{sourceInterval:[219,228]},["app",{sourceInterval:[219,221]},"AS",[]],["app",{sourceInterval:[222,225]},"add",[]],["app",{sourceInterval:[226,228]},"MD",[]]]],AS_subtraction:["define",{sourceInterval:[249,279]},null,[],["seq",{sourceInterval:[249,263]},["app",{sourceInterval:[249,251]},"AS",[]],["app",{sourceInterval:[252,260]},"subtract",[]],["app",{sourceInterval:[261,263]},"MD",[]]]],AS:["define",{sourceInterval:[209,289]},null,[],["alt",{sourceInterval:[219,289]},["app",{sourceInterval:[219,228]},"AS_addition",[]],["app",{sourceInterval:[249,263]},"AS_subtraction",[]],["app",{sourceInterval:[287,289]},"MD",[]]]],MD_multiplication:["define",{sourceInterval:[330,362]},null,[],["seq",{sourceInterval:[330,343]},["app",{sourceInterval:[330,332]},"MD",[]],["app",{sourceInterval:[333,341]},"multiply",[]],["app",{sourceInterval:[342,343]},"E",[]]]],MD_division:["define",{sourceInterval:[370,394]},null,[],["seq",{sourceInterval:[370,381]},["app",{sourceInterval:[370,372]},"MD",[]],["app",{sourceInterval:[373,379]},"divide",[]],["app",{sourceInterval:[380,381]},"E",[]]]],MD_modulo:["define",{sourceInterval:[402,424]},null,[],["seq",{sourceInterval:[402,413]},["app",{sourceInterval:[402,404]},"MD",[]],["app",{sourceInterval:[405,411]},"modulo",[]],["app",{sourceInterval:[412,413]},"E",[]]]],MD:["define",{sourceInterval:[320,433]},null,[],["alt",{sourceInterval:[330,433]},["app",{sourceInterval:[330,343]},"MD_multiplication",[]],["app",{sourceInterval:[370,381]},"MD_division",[]],["app",{sourceInterval:[402,413]},"MD_modulo",[]],["app",{sourceInterval:[432,433]},"E",[]]]],E_exponent:["define",{sourceInterval:[463,488]},null,[],["seq",{sourceInterval:[463,475]},["app",{sourceInterval:[463,464]},"P",[]],["app",{sourceInterval:[465,473]},"exponent",[]],["app",{sourceInterval:[474,475]},"E",[]]]],E:["define",{sourceInterval:[454,497]},null,[],["alt",{sourceInterval:[463,497]},["app",{sourceInterval:[463,475]},"E_exponent",[]],["app",{sourceInterval:[496,497]},"P",[]]]],P_parenthesis:["define",{sourceInterval:[530,564]},null,[],["seq",{sourceInterval:[530,548]},["terminal",{sourceInterval:[530,533]},"("],["app",{sourceInterval:[534,544]},"Expression",[]],["terminal",{sourceInterval:[545,548]},")"]]],P:["define",{sourceInterval:[521,581]},null,[],["alt",{sourceInterval:[530,581]},["app",{sourceInterval:[530,548]},"P_parenthesis",[]],["app",{sourceInterval:[572,581]},"Primitive",[]]]],Primitive_positive:["define",{sourceInterval:[608,633]},null,[],["seq",{sourceInterval:[608,621]},["terminal",{sourceInterval:[608,611]},"+"],["app",{sourceInterval:[612,621]},"Primitive",[]]]],Primitive_negative:["define",{sourceInterval:[641,666]},null,[],["seq",{sourceInterval:[641,654]},["terminal",{sourceInterval:[641,644]},"-"],["app",{sourceInterval:[645,654]},"Primitive",[]]]],Primitive:["define",{sourceInterval:[591,707]},null,[],["alt",{sourceInterval:[608,707]},["app",{sourceInterval:[608,621]},"Primitive_positive",[]],["app",{sourceInterval:[641,654]},"Primitive_negative",[]],["app",{sourceInterval:[674,682]},"constant",[]],["app",{sourceInterval:[690,693]},"hex",[]],["app",{sourceInterval:[701,707]},"number",[]]]],add:["define",{sourceInterval:[734,838]},null,[],["alt",{sourceInterval:[745,838]},["terminal",{sourceInterval:[745,748]},"+"],["app",{sourceInterval:[756,779]},"caseInsensitive",[["terminal",{sourceInterval:[772,778]},"plus"]]],["app",{sourceInterval:[786,808]},"caseInsensitive",[["terminal",{sourceInterval:[802,807]},"add"]]],["app",{sourceInterval:[816,838]},"caseInsensitive",[["terminal",{sourceInterval:[832,837]},"and"]]]]],subtract:["define",{sourceInterval:[848,999]},null,[],["alt",{sourceInterval:[865,999]},["terminal",{sourceInterval:[865,868]},"-"],["app",{sourceInterval:[876,900]},"caseInsensitive",[["terminal",{sourceInterval:[892,899]},"minus"]]],["app",{sourceInterval:[908,935]},"caseInsensitive",[["terminal",{sourceInterval:[924,934]},"subtract"]]],["app",{sourceInterval:[943,968]},"caseInsensitive",[["terminal",{sourceInterval:[959,967]},"remove"]]],["app",{sourceInterval:[976,999]},"caseInsensitive",[["terminal",{sourceInterval:[992,998]},"take"]]]]],multiply:["define",{sourceInterval:[1011,1289]},null,[],["alt",{sourceInterval:[1028,1289]},["terminal",{sourceInterval:[1028,1031]},"*"],["terminal",{sourceInterval:[1039,1044]},"\\*"],["terminal",{sourceInterval:[1084,1094]},"\xD7"],["app",{sourceInterval:[1129,1149]},"caseInsensitive",[["terminal",{sourceInterval:[1145,1148]},"x"]]],["app",{sourceInterval:[1157,1184]},"caseInsensitive",[["terminal",{sourceInterval:[1173,1183]},"times by"]]],["app",{sourceInterval:[1192,1216]},"caseInsensitive",[["terminal",{sourceInterval:[1208,1215]},"times"]]],["app",{sourceInterval:[1224,1254]},"caseInsensitive",[["terminal",{sourceInterval:[1240,1253]},"multiply by"]]],["app",{sourceInterval:[1262,1289]},"caseInsensitive",[["terminal",{sourceInterval:[1278,1288]},"multiply"]]]]],divide:["define",{sourceInterval:[1301,1426]},null,[],["alt",{sourceInterval:[1315,1426]},["terminal",{sourceInterval:[1315,1318]},"/"],["terminal",{sourceInterval:[1326,1336]},"\xF7"],["app",{sourceInterval:[1365,1393]},"caseInsensitive",[["terminal",{sourceInterval:[1381,1392]},"divide by"]]],["app",{sourceInterval:[1401,1426]},"caseInsensitive",[["terminal",{sourceInterval:[1417,1425]},"divide"]]]]],modulo:["define",{sourceInterval:[1432,1512]},null,[],["alt",{sourceInterval:[1446,1512]},["terminal",{sourceInterval:[1446,1449]},"%"],["app",{sourceInterval:[1457,1482]},"caseInsensitive",[["terminal",{sourceInterval:[1473,1481]},"modulo"]]],["app",{sourceInterval:[1490,1512]},"caseInsensitive",[["terminal",{sourceInterval:[1506,1511]},"mod"]]]]],exponent:["define",{sourceInterval:[1518,1681]},null,[],["alt",{sourceInterval:[1534,1681]},["terminal",{sourceInterval:[1534,1537]},"^"],["app",{sourceInterval:[1545,1579]},"caseInsensitive",[["terminal",{sourceInterval:[1561,1578]},"to the power of"]]],["app",{sourceInterval:[1587,1614]},"caseInsensitive",[["terminal",{sourceInterval:[1603,1613]},"power of"]]],["app",{sourceInterval:[1622,1649]},"caseInsensitive",[["terminal",{sourceInterval:[1638,1648]},"exponent"]]],["app",{sourceInterval:[1657,1681]},"caseInsensitive",[["terminal",{sourceInterval:[1673,1680]},"prime"]]]]],constant:["define",{sourceInterval:[1687,1754]},null,[],["alt",{sourceInterval:[1704,1754]},["app",{sourceInterval:[1704,1725]},"caseInsensitive",[["terminal",{sourceInterval:[1720,1724]},"PI"]]],["app",{sourceInterval:[1734,1754]},"caseInsensitive",[["terminal",{sourceInterval:[1750,1753]},"E"]]]]],number_fract:["define",{sourceInterval:[1774,1801]},null,[],["seq",{sourceInterval:[1774,1791]},["star",{sourceInterval:[1774,1780]},["app",{sourceInterval:[1774,1779]},"digit",[]]],["terminal",{sourceInterval:[1781,1784]},"."],["plus",{sourceInterval:[1785,1791]},["app",{sourceInterval:[1785,1790]},"digit",[]]]]],number_whole:["define",{sourceInterval:[1809,1836]},null,[],["plus",{sourceInterval:[1809,1815]},["app",{sourceInterval:[1809,1814]},"digit",[]]]],number:["define",{sourceInterval:[1760,1836]},null,[],["alt",{sourceInterval:[1774,1836]},["app",{sourceInterval:[1774,1791]},"number_fract",[]],["app",{sourceInterval:[1809,1815]},"number_whole",[]]]],hex:["define",{sourceInterval:[1844,1890]},null,[],["alt",{sourceInterval:[1855,1890]},["seq",{sourceInterval:[1855,1869]},["terminal",{sourceInterval:[1855,1859]},"0x"],["plus",{sourceInterval:[1860,1869]},["app",{sourceInterval:[1860,1868]},"hexDigit",[]]]],["seq",{sourceInterval:[1877,1890]},["plus",{sourceInterval:[1877,1886]},["app",{sourceInterval:[1877,1885]},"hexDigit",[]]],["terminal",{sourceInterval:[1887,1890]},"h"]]]]}]);Hn.Vector4Arithmetic=zu(["grammar",{source:`Vector4Arithmetic <: BasicArithmetic {\r
  // Remove support for logical shift\r
  Expression \r
  	:=  AS\r
\r
  P\r
    := "(" Expression ")"  -- parenthesis\r
    | Vector4\r
    | Function\r
    | Primitive\r
\r
  // Remove modulo support for vector\r
  MD\r
    := MD multiply E  -- multiplication\r
    | MD divide E  -- division\r
    | E\r
\r
  Vector4\r
    = vector4? "(" Expression "," Expression "," Expression "," Expression ")" -- parse\r
\r
  Function\r
   = LengthSq\r
   | DistanceSq\r
   | Length\r
   | Distance\r
   | Normalise\r
   | Dot\r
   | AngleBetween\r
   | Lerp\r
\r
  LengthSq  = lengthSq "(" Vector4 ")" -- function\r
  DistanceSq  = distanceSq "(" Vector4 "," Vector4 ")" -- function\r
  Length  = length "(" Vector4 ")" -- function\r
  Distance  = distance "(" Vector4 "," Vector4 ")" -- function\r
  Normalise = normalise "(" Vector4 ")" -- function\r
  Dot = dot "(" Vector4 "," Vector4 ")" -- function\r
  AngleBetween = angleBetween "(" Vector4 "," Vector4 ")" -- function\r
  Lerp = lerp "(" Vector4 "," Vector4 "," number ")" -- function\r
\r
  vector4 \r
 	  = caseInsensitive<"Vector4">\r
    | caseInsensitive<"Vec4">\r
\r
  lengthSq \r
 	  = caseInsensitive<"lengthSq">\r
    | caseInsensitive<"magnitudeSq">\r
\r
  distanceSq\r
    = caseInsensitive<"distanceSq">\r
\r
  length\r
 	  = caseInsensitive<"length">\r
    | caseInsensitive<"magnitude">\r
\r
  distance\r
    = caseInsensitive<"distance">\r
\r
  normalise \r
 	  = caseInsensitive<"normalise">\r
 	  | caseInsensitive<"normalize">\r
\r
  dot\r
    = caseInsensitive<"dotproduct">\r
    | caseInsensitive<"dot">\r
\r
  angleBetween\r
    = caseInsensitive<"angleBetween">\r
\r
  lerp\r
    = caseInsensitive<"lerp">\r
}`},"Vector4Arithmetic",Hn.BasicArithmetic,"Expression",{Expression:["override",{sourceInterval:[81,103]},null,[],["app",{sourceInterval:[101,103]},"AS",[]]],P_parenthesis:["override",{sourceInterval:[119,153]},null,[],["seq",{sourceInterval:[119,137]},["terminal",{sourceInterval:[119,122]},"("],["app",{sourceInterval:[123,133]},"Expression",[]],["terminal",{sourceInterval:[134,137]},")"]]],P:["override",{sourceInterval:[109,201]},null,[],["alt",{sourceInterval:[119,201]},["app",{sourceInterval:[119,137]},"P_parenthesis",[]],["app",{sourceInterval:[161,168]},"Vector4",[]],["app",{sourceInterval:[176,184]},"Function",[]],["app",{sourceInterval:[192,201]},"Primitive",[]]]],MD_multiplication:["override",{sourceInterval:[257,289]},null,[],["seq",{sourceInterval:[257,270]},["app",{sourceInterval:[257,259]},"MD",[]],["app",{sourceInterval:[260,268]},"multiply",[]],["app",{sourceInterval:[269,270]},"E",[]]]],MD_division:["override",{sourceInterval:[297,321]},null,[],["seq",{sourceInterval:[297,308]},["app",{sourceInterval:[297,299]},"MD",[]],["app",{sourceInterval:[300,306]},"divide",[]],["app",{sourceInterval:[307,308]},"E",[]]]],MD:["override",{sourceInterval:[246,330]},null,[],["alt",{sourceInterval:[257,330]},["app",{sourceInterval:[257,270]},"MD_multiplication",[]],["app",{sourceInterval:[297,308]},"MD_division",[]],["app",{sourceInterval:[329,330]},"E",[]]]],Vector4_parse:["define",{sourceInterval:[351,432]},null,[],["seq",{sourceInterval:[351,423]},["opt",{sourceInterval:[351,359]},["app",{sourceInterval:[351,358]},"vector4",[]]],["terminal",{sourceInterval:[360,363]},"("],["app",{sourceInterval:[364,374]},"Expression",[]],["terminal",{sourceInterval:[375,378]},","],["app",{sourceInterval:[379,389]},"Expression",[]],["terminal",{sourceInterval:[390,393]},","],["app",{sourceInterval:[394,404]},"Expression",[]],["terminal",{sourceInterval:[405,408]},","],["app",{sourceInterval:[409,419]},"Expression",[]],["terminal",{sourceInterval:[420,423]},")"]]],Vector4:["define",{sourceInterval:[336,432]},null,[],["app",{sourceInterval:[351,432]},"Vector4_parse",[]]],Function:["define",{sourceInterval:[438,562]},null,[],["alt",{sourceInterval:[453,562]},["app",{sourceInterval:[453,461]},"LengthSq",[]],["app",{sourceInterval:[468,478]},"DistanceSq",[]],["app",{sourceInterval:[485,491]},"Length",[]],["app",{sourceInterval:[498,506]},"Distance",[]],["app",{sourceInterval:[513,522]},"Normalise",[]],["app",{sourceInterval:[529,532]},"Dot",[]],["app",{sourceInterval:[539,551]},"AngleBetween",[]],["app",{sourceInterval:[558,562]},"Lerp",[]]]],LengthSq_function:["define",{sourceInterval:[580,616]},null,[],["seq",{sourceInterval:[580,604]},["app",{sourceInterval:[580,588]},"lengthSq",[]],["terminal",{sourceInterval:[589,592]},"("],["app",{sourceInterval:[593,600]},"Vector4",[]],["terminal",{sourceInterval:[601,604]},")"]]],LengthSq:["define",{sourceInterval:[568,616]},null,[],["app",{sourceInterval:[580,616]},"LengthSq_function",[]]],DistanceSq_function:["define",{sourceInterval:[634,684]},null,[],["seq",{sourceInterval:[634,672]},["app",{sourceInterval:[634,644]},"distanceSq",[]],["terminal",{sourceInterval:[645,648]},"("],["app",{sourceInterval:[649,656]},"Vector4",[]],["terminal",{sourceInterval:[657,660]},","],["app",{sourceInterval:[661,668]},"Vector4",[]],["terminal",{sourceInterval:[669,672]},")"]]],DistanceSq:["define",{sourceInterval:[620,684]},null,[],["app",{sourceInterval:[634,684]},"DistanceSq_function",[]]],Length_function:["define",{sourceInterval:[698,732]},null,[],["seq",{sourceInterval:[698,720]},["app",{sourceInterval:[698,704]},"length",[]],["terminal",{sourceInterval:[705,708]},"("],["app",{sourceInterval:[709,716]},"Vector4",[]],["terminal",{sourceInterval:[717,720]},")"]]],Length:["define",{sourceInterval:[688,732]},null,[],["app",{sourceInterval:[698,732]},"Length_function",[]]],Distance_function:["define",{sourceInterval:[748,796]},null,[],["seq",{sourceInterval:[748,784]},["app",{sourceInterval:[748,756]},"distance",[]],["terminal",{sourceInterval:[757,760]},"("],["app",{sourceInterval:[761,768]},"Vector4",[]],["terminal",{sourceInterval:[769,772]},","],["app",{sourceInterval:[773,780]},"Vector4",[]],["terminal",{sourceInterval:[781,784]},")"]]],Distance:["define",{sourceInterval:[736,796]},null,[],["app",{sourceInterval:[748,796]},"Distance_function",[]]],Normalise_function:["define",{sourceInterval:[812,849]},null,[],["seq",{sourceInterval:[812,837]},["app",{sourceInterval:[812,821]},"normalise",[]],["terminal",{sourceInterval:[822,825]},"("],["app",{sourceInterval:[826,833]},"Vector4",[]],["terminal",{sourceInterval:[834,837]},")"]]],Normalise:["define",{sourceInterval:[800,849]},null,[],["app",{sourceInterval:[812,849]},"Normalise_function",[]]],Dot_function:["define",{sourceInterval:[859,902]},null,[],["seq",{sourceInterval:[859,890]},["app",{sourceInterval:[859,862]},"dot",[]],["terminal",{sourceInterval:[863,866]},"("],["app",{sourceInterval:[867,874]},"Vector4",[]],["terminal",{sourceInterval:[875,878]},","],["app",{sourceInterval:[879,886]},"Vector4",[]],["terminal",{sourceInterval:[887,890]},")"]]],Dot:["define",{sourceInterval:[853,902]},null,[],["app",{sourceInterval:[859,902]},"Dot_function",[]]],AngleBetween_function:["define",{sourceInterval:[921,973]},null,[],["seq",{sourceInterval:[921,961]},["app",{sourceInterval:[921,933]},"angleBetween",[]],["terminal",{sourceInterval:[934,937]},"("],["app",{sourceInterval:[938,945]},"Vector4",[]],["terminal",{sourceInterval:[946,949]},","],["app",{sourceInterval:[950,957]},"Vector4",[]],["terminal",{sourceInterval:[958,961]},")"]]],AngleBetween:["define",{sourceInterval:[906,973]},null,[],["app",{sourceInterval:[921,973]},"AngleBetween_function",[]]],Lerp_function:["define",{sourceInterval:[984,1039]},null,[],["seq",{sourceInterval:[984,1027]},["app",{sourceInterval:[984,988]},"lerp",[]],["terminal",{sourceInterval:[989,992]},"("],["app",{sourceInterval:[993,1e3]},"Vector4",[]],["terminal",{sourceInterval:[1001,1004]},","],["app",{sourceInterval:[1005,1012]},"Vector4",[]],["terminal",{sourceInterval:[1013,1016]},","],["app",{sourceInterval:[1017,1023]},"number",[]],["terminal",{sourceInterval:[1024,1027]},")"]]],Lerp:["define",{sourceInterval:[977,1039]},null,[],["app",{sourceInterval:[984,1039]},"Lerp_function",[]]],vector4:["define",{sourceInterval:[1045,1118]},null,[],["alt",{sourceInterval:[1061,1118]},["app",{sourceInterval:[1061,1087]},"caseInsensitive",[["terminal",{sourceInterval:[1077,1086]},"Vector4"]]],["app",{sourceInterval:[1095,1118]},"caseInsensitive",[["terminal",{sourceInterval:[1111,1117]},"Vec4"]]]]],lengthSq:["define",{sourceInterval:[1124,1206]},null,[],["alt",{sourceInterval:[1141,1206]},["app",{sourceInterval:[1141,1168]},"caseInsensitive",[["terminal",{sourceInterval:[1157,1167]},"lengthSq"]]],["app",{sourceInterval:[1176,1206]},"caseInsensitive",[["terminal",{sourceInterval:[1192,1205]},"magnitudeSq"]]]]],distanceSq:["define",{sourceInterval:[1212,1259]},null,[],["app",{sourceInterval:[1230,1259]},"caseInsensitive",[["terminal",{sourceInterval:[1246,1258]},"distanceSq"]]]],length:["define",{sourceInterval:[1265,1340]},null,[],["alt",{sourceInterval:[1279,1340]},["app",{sourceInterval:[1279,1304]},"caseInsensitive",[["terminal",{sourceInterval:[1295,1303]},"length"]]],["app",{sourceInterval:[1312,1340]},"caseInsensitive",[["terminal",{sourceInterval:[1328,1339]},"magnitude"]]]]],distance:["define",{sourceInterval:[1346,1389]},null,[],["app",{sourceInterval:[1362,1389]},"caseInsensitive",[["terminal",{sourceInterval:[1378,1388]},"distance"]]]],normalise:["define",{sourceInterval:[1395,1477]},null,[],["alt",{sourceInterval:[1413,1477]},["app",{sourceInterval:[1413,1441]},"caseInsensitive",[["terminal",{sourceInterval:[1429,1440]},"normalise"]]],["app",{sourceInterval:[1449,1477]},"caseInsensitive",[["terminal",{sourceInterval:[1465,1476]},"normalize"]]]]],dot:["define",{sourceInterval:[1483,1553]},null,[],["alt",{sourceInterval:[1494,1553]},["app",{sourceInterval:[1494,1523]},"caseInsensitive",[["terminal",{sourceInterval:[1510,1522]},"dotproduct"]]],["app",{sourceInterval:[1531,1553]},"caseInsensitive",[["terminal",{sourceInterval:[1547,1552]},"dot"]]]]],angleBetween:["define",{sourceInterval:[1559,1610]},null,[],["app",{sourceInterval:[1579,1610]},"caseInsensitive",[["terminal",{sourceInterval:[1595,1609]},"angleBetween"]]]],lerp:["define",{sourceInterval:[1616,1651]},null,[],["app",{sourceInterval:[1628,1651]},"caseInsensitive",[["terminal",{sourceInterval:[1644,1650]},"lerp"]]]]}]);Hu.exports=Hn});var cf={};ih(cf,{default:()=>Jn});module.exports=ah(cf);var Ds=class{constructor(){this.listeners={}}on(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}emit(e,...t){let n=this.listeners[e];n&&n.forEach(a=>a(...t))}removeListener(e,t){let n=this.listeners[e];if(n){let a=n.indexOf(t);a!==-1&&n.splice(a,1)}}removeAllListeners(){this.listeners={}}},et=new Ds;var fa=Se(zr()),R={engine:{explicitMode:!1},interface:{renderResultEndOfLine:!1,showStatusBarCompanion:!0,animateResults:!0,animationClass:"animate__pulse",animationDuration:"200ms"},arithmeticProvider:{enabled:!0,renderEqualsBeforeResult:!0},functionArithmeticProvider:{enabled:!0},vectorArithmeticProvider:{enabled:!0},percentageArithmeticProvider:{enabled:!0},datetimeProvider:{enabled:!0,parsingFormat:0},unitOfMeasurementProvider:{enabled:!0},diceProvider:{enabled:!0},integerResult:{},floatResult:{decimalPlaces:2},percentageResult:{decimalPlaces:2},datetimeResult:{format:fa.default.defaultFormat},hexResult:{enablePadding:!1,paddingZeros:8},unitOfMeasurementResult:{decimalPlaces:2,unitNames:!1}};var Hr=class{constructor(e){this.parent=e}get enabled(){var e;return(e=this.parent.settings.arithmeticProvider.enabled)!=null?e:R.arithmeticProvider.enabled}set enabled(e){this.parent.settings.arithmeticProvider.enabled=e}get renderEqualsBeforeResult(){var e;return(e=this.parent.settings.arithmeticProvider.renderEqualsBeforeResult)!=null?e:R.arithmeticProvider.renderEqualsBeforeResult}set renderEqualsBeforeResult(e){this.parent.settings.arithmeticProvider.renderEqualsBeforeResult=e}};var jr=class{constructor(e){this.parent=e}get enabled(){var e;return(e=this.parent.settings.datetimeProvider.enabled)!=null?e:R.datetimeProvider.enabled}set enabled(e){this.parent.settings.datetimeProvider.enabled=e}get parsingFormat(){var e;return(e=this.parent.settings.datetimeProvider.parsingFormat)!=null?e:R.datetimeProvider.parsingFormat}set parsingFormat(e){this.parent.settings.datetimeProvider.parsingFormat=e}};var $r=class{constructor(e){this.parent=e}get format(){var e;return(e=this.parent.settings.datetimeResult.format)!=null?e:R.datetimeResult.format}set format(e){this.parent.settings.datetimeResult.format=e}};var Kr=class{constructor(e){this.parent=e}get enabled(){var e;return(e=this.parent.settings.diceProvider.enabled)!=null?e:R.diceProvider.enabled}set enabled(e){this.parent.settings.diceProvider.enabled=e}};var Zr=class{constructor(e){this.parent=e}get explicitMode(){var e;return(e=this.parent.settings.engine.explicitMode)!=null?e:R.engine.explicitMode}set explicitMode(e){this.parent.settings.engine.explicitMode=e}};var Jr=class{constructor(e){this.parent=e}get decimalPlaces(){var e;return(e=this.parent.settings.floatResult.decimalPlaces)!=null?e:R.floatResult.decimalPlaces}set decimalPlaces(e){this.parent.settings.floatResult.decimalPlaces=e}};var Qr=class{constructor(e){this.parent=e}get enabled(){var e;return(e=this.parent.settings.functionArithmeticProvider.enabled)!=null?e:R.functionArithmeticProvider.enabled}set enabled(e){this.parent.settings.functionArithmeticProvider.enabled=e}};var Xr=class{constructor(e){this.parent=e}get enablePadding(){var e;return(e=this.parent.settings.hexResult.enablePadding)!=null?e:R.hexResult.enablePadding}set enablePadding(e){this.parent.settings.hexResult.enablePadding=e}get paddingZeros(){var e;return(e=this.parent.settings.hexResult.paddingZeros)!=null?e:R.hexResult.paddingZeros}set paddingZeros(e){this.parent.settings.hexResult.paddingZeros=e}};var en=class{constructor(e){this.parent=e}};var tn=class{constructor(e){this.parent=e}get renderResultEndOfLine(){var e;return(e=this.parent.settings.interface.renderResultEndOfLine)!=null?e:R.interface.renderResultEndOfLine}set renderResultEndOfLine(e){this.parent.settings.interface.renderResultEndOfLine=e}get showStatusBarCompanion(){var e;return(e=this.parent.settings.interface.showStatusBarCompanion)!=null?e:R.interface.showStatusBarCompanion}set showStatusBarCompanion(e){this.parent.settings.interface.showStatusBarCompanion=e}get animateResults(){var e;return(e=this.parent.settings.interface.animateResults)!=null?e:R.interface.animateResults}set animateResults(e){this.parent.settings.interface.animateResults=e}get animationClass(){var e;return(e=this.parent.settings.interface.animationClass)!=null?e:R.interface.animationClass}set animationClass(e){this.parent.settings.interface.animationClass=e}get animationDuration(){var e;return(e=this.parent.settings.interface.animationDuration)!=null?e:R.interface.animationDuration}set animationDuration(e){this.parent.settings.interface.animationDuration=e}};var rn=class{constructor(e){this.parent=e}get enabled(){var e;return(e=this.parent.settings.percentageArithmeticProvider.enabled)!=null?e:R.percentageArithmeticProvider.enabled}set enabled(e){this.parent.settings.percentageArithmeticProvider.enabled=e}};var nn=class{constructor(e){this.parent=e}get decimalPlaces(){var e;return(e=this.parent.settings.percentageResult.decimalPlaces)!=null?e:R.percentageResult.decimalPlaces}set decimalPlaces(e){this.parent.settings.percentageResult.decimalPlaces=e}};var sn=class{constructor(e){this.parent=e}get enabled(){var e;return(e=this.parent.settings.unitOfMeasurementProvider.enabled)!=null?e:R.unitOfMeasurementProvider.enabled}set enabled(e){this.parent.settings.unitOfMeasurementProvider.enabled=e}};var an=class{constructor(e){this.parent=e}get decimalPlaces(){var e;return(e=this.parent.settings.unitOfMeasurementResult.decimalPlaces)!=null?e:R.unitOfMeasurementResult.decimalPlaces}set decimalPlaces(e){this.parent.settings.unitOfMeasurementResult.decimalPlaces=e}get unitNames(){var e;return(e=this.parent.settings.unitOfMeasurementResult.unitNames)!=null?e:R.unitOfMeasurementResult.unitNames}set unitNames(e){this.parent.settings.unitOfMeasurementResult.unitNames=e}};var on=class{constructor(e){this.parent=e}get enabled(){var e;return(e=this.parent.settings.vectorArithmeticProvider.enabled)!=null?e:R.vectorArithmeticProvider.enabled}set enabled(e){this.parent.settings.vectorArithmeticProvider.enabled=e}};var Nt=class Nt{constructor(){this.settings=R,this.engine=new Zr(this),this.interface=new tn(this),this.arithmeticProvider=new Hr(this),this.functionArithmeticProvider=new Qr(this),this.vectorArithmeticProvider=new on(this),this.percentageArithmeticProvider=new rn(this),this.datetimeProvider=new jr(this),this.unitOfMeasurementProvider=new sn(this),this.diceProvider=new Kr(this),this.integerResult=new en(this),this.floatResult=new Jr(this),this.percentageResult=new nn(this),this.datetimeResult=new $r(this),this.hexResult=new Xr(this),this.unitOfMeasurementResult=new an(this)}static getInstance(){return Nt.instance||(Nt.instance=new Nt),Nt.instance}updateSettings(e){this.settings=e}};Nt.instance=null;var j=Nt;var ga=require("@codemirror/view"),ln=class extends ga.WidgetType{constructor(t,n){super();this.value=t,this.lineNumber=n,this.userSettings=j.getInstance()}toDOM(t){let n=t.state.doc.lineAt(t.state.selection.main.head).number,a=document.createElement("div");return a.id=`osr-${this.lineNumber}`,a.title="Click to commit this result",a.addEventListener("click",()=>{et.emit(1,this.lineNumber,this.value)}),this.userSettings.interface.animateResults&&a.style.setProperty("--animate-duration",this.userSettings.interface.animationDuration),a.classList.add("os-result"),this.userSettings.interface.animateResults&&this.lineNumber===n&&a.classList.add("animate__animated",this.userSettings.interface.animationClass),a.textContent=`${this.value}`,a}};var un=class i extends Error{constructor(e){super(e||"The executed pipeline has no stages."),this.name="EmptyPipelineError",Error.captureStackTrace(this,i)}};var cn=class{constructor(){this.firstStage=null;this.lastStage=null}addStage(e){return this.firstStage?(this.lastStage&&this.lastStage.next(e),this.lastStage=e):this.firstStage=this.lastStage=e,this}process(e){if(!this.firstStage)throw new un;return this.firstStage.process(e)}};var St=class{constructor(){this.nextStage=null}next(e){return this.nextStage=e,e}process(e){return e=this.execute(e),this.nextStage?this.nextStage.process(e):e}};var Ps=class extends St{constructor(){super(...arguments);this.commentsRemovalRegex=new RegExp(/((?:#|\/\/).+)/)}execute(t){return t.replace(this.commentsRemovalRegex,"")}},ya=new Ps;var As=class extends St{constructor(){super(...arguments);this.markdownReplacementRegex=new RegExp(/^(?:(?:[-+*>]|(?:\[\s\])|(?:\d+\.))\s)+/m)}execute(t){return t.replace(this.markdownReplacementRegex,"")}},_a=new As;var ai=Se(Qa());var k=class i extends Error{constructor(e){super(e||"Unsupported visitor operation"),this.name="UnsupportedVisitorOperationError",Error.captureStackTrace(this,i)}};var ye=class{constructor(e){this.type=3;this.value=e}accept(e){return e.visit(this)}};var E=class{constructor(e){this.type=1;this.value=Math.trunc(e)}accept(e){return e.visit(this)}};var _=class{constructor(e){this.type=0;this.value=e}accept(e){return e.visit(this)}};var A=class{constructor(e){this.type=4;this.value=e}accept(e){return e.visit(this)}};var dt=class{constructor(e){this.type=2;this.value=e}accept(e){return e.visit(this)}};var D=class{constructor(e,t){this.type=8;this.value=e,this.unit=t}accept(e){return e.visit(this)}};var U=class{constructor(e){this.type=5;this.value=e}accept(e){return e.visit(this)}};var T=class{constructor(e){this.type=6;this.value=e}accept(e){return e.visit(this)}};var C=class{constructor(e){this.type=7;this.value=e}accept(e){return e.visit(this)}};function Xa(i,e=2){return Number.isInteger(i)?Math.trunc(i):i.toFixed(e)}var fu=Se(Rn()),Dn=class{constructor(){this.settings=j.getInstance()}visit(e){if(e instanceof _)return this.visitNumberResult(e);if(e instanceof E)return this.visitHexResult(e);if(e instanceof A)return this.visitPercentageResult(e);if(e instanceof ye)return this.visitDatetimeResult(e);if(e instanceof dt)return this.visitStringResult(e);if(e instanceof U)return this.visitVector2Result(e);if(e instanceof T)return this.visitVector3Result(e);if(e instanceof C)return this.visitVector4Result(e);if(e instanceof D)return this.visitUnitOfMeasurementResult(e);throw new k}visitNumberResult(e){return Xa(e.value,this.settings.floatResult.decimalPlaces).toString()}visitHexResult(e){let t=e.value<0,n=Math.abs(e.value).toString(16).toUpperCase().padStart(this.settings.hexResult.enablePadding?this.settings.hexResult.paddingZeros:0,"0");return t?`-0x${n}`:`0x${n}`}visitPercentageResult(e){return`${e.value.toFixed(this.settings.percentageResult.decimalPlaces)}%`}visitDatetimeResult(e){return e.value.format(this.settings.datetimeResult.format)}visitStringResult(e){return e.value}visitVector2Result(e){let t=e.value.x.toFixed(this.settings.floatResult.decimalPlaces),n=e.value.y.toFixed(this.settings.floatResult.decimalPlaces);return`(${t}, ${n})`}visitVector3Result(e){let t=e.value.x.toFixed(this.settings.floatResult.decimalPlaces),n=e.value.y.toFixed(this.settings.floatResult.decimalPlaces),a=e.value.z.toFixed(this.settings.floatResult.decimalPlaces);return`(${t}, ${n}, ${a})`}visitVector4Result(e){let t=e.value.x.toFixed(this.settings.floatResult.decimalPlaces),n=e.value.y.toFixed(this.settings.floatResult.decimalPlaces),a=e.value.z.toFixed(this.settings.floatResult.decimalPlaces),u=e.value.w.toFixed(this.settings.floatResult.decimalPlaces);return`(${t}, ${n}, ${a}, ${u})`}visitUnitOfMeasurementResult(e){let t=this.settings.unitOfMeasurementResult.decimalPlaces,n=Number.isInteger(e.value)?e.value:e.value.toFixed(t),a=e.unit;if(this.settings.unitOfMeasurementResult.unitNames){let u=(0,fu.default)().describe(e.unit);a=Math.abs(e.value)>1?u.plural:u.singular}return`${n} ${a}`}};var Qt=class{constructor(e){this.name=e,this.formatVisitor=new Dn}enabled(){throw new Error("Method not implemented.")}provide(e,t){throw new Error("Method not implemented.")}};var Ne=class extends Qt{constructor(t){super(t)}};function Z(i,e){return e/100*i}function Iu(i,e){return(e-i)/i*100}function gu(i,e){let t=i*e/100;return i+t}function yu(i,e){let t=i*e/100;return i-t}var _u=Se(Rn());function be(i,e){return new D((0,_u.default)(i.value).from(i.unit).to(e.unit),e.unit)}var Be=class i extends Error{constructor(e){super(e||"Unsupported coercion operation"),this.name="UnsupportedCoercionOperationError",Error.captureStackTrace(this,i)}};var ni=class{visit(e){if(e instanceof E)return e;if(e instanceof _||e instanceof E)return new E(e.value);throw new Be}},xe=new ni;var si=class{visit(e){if(e instanceof _)return e;if(e instanceof E||e instanceof D)return new _(e.value);throw new Be}},B=new si;var xt=class{constructor(e){this.right=e}visit(e){if(e instanceof _)return this.number(e,this.right);if(e instanceof E)return this.hex(e,this.right);if(e instanceof A)return this.percentage(e,this.right);if(e instanceof D)return this.unitOfMeasurement(e,this.right);throw new k}number(e,t){if(t instanceof A)return new _(e.value+Z(t.value,e.value));let n=B.visit(t);return new _(e.value+n.value)}hex(e,t){if(t instanceof A)return new E(e.value+Z(t.value,e.value));let n=xe.visit(t);return new E(e.value+n.value)}percentage(e,t){if(t instanceof A)return new _(e.value/100+t.value/100);let n=B.visit(t);return new _(e.value/100+n.value)}unitOfMeasurement(e,t){if(t instanceof A)return new D(e.value+Z(t.value,e.value),e.unit);if(t instanceof D){let a=be(t,e);return new D(e.value+a.value,e.unit)}let n=B.visit(t);return new D(e.value+n.value,e.unit)}};var ii=class{visitPositive(e){return e.value=Math.abs(e.value),e}visitNegative(e){return e.value=-Math.abs(e.value),e}visitConstant(e){switch(e.toLowerCase()){case"pi":return new _(Math.PI);case"e":return new _(Math.E);default:return new _(0)}}visitHex(e){let t=parseInt(e.replace("h","").replace("0x",""),16);return new E(t)}visitNumber(e){return new _(parseFloat(e))}},Ye=new ii;var Rt=class{constructor(e){this.right=e}visit(e){if(e instanceof _)return this.number(e,this.right);if(e instanceof E)return this.hex(e,this.right);if(e instanceof A)return this.percentage(e,this.right);if(e instanceof D)return this.unitOfMeasurement(e,this.right);throw new k}number(e,t){if(t instanceof A)return new _(e.value/Z(t.value,e.value));let n=B.visit(t);return new _(e.value/n.value)}hex(e,t){if(t instanceof A)return new E(e.value/Z(t.value,e.value));let n=xe.visit(t);return new E(e.value/n.value)}percentage(e,t){if(t instanceof A)return new _(e.value/100/t.value/100);let n=B.visit(t);return new _(e.value/100/n.value)}unitOfMeasurement(e,t){if(t instanceof A)return new D(e.value/Z(t.value,e.value),e.unit);if(t instanceof D){let a=be(t,e);return new D(e.value/a.value,e.unit)}let n=B.visit(t);return new D(e.value/n.value,e.unit)}};var Dt=class{constructor(e){this.right=e}visit(e){if(e instanceof _)return this.number(e,this.right);if(e instanceof E)return this.hex(e,this.right);if(e instanceof A)return this.percentage(e,this.right);if(e instanceof D)return this.unitOfMeasurement(e,this.right);throw new k}number(e,t){if(t instanceof A)return new _(Math.pow(e.value,Z(t.value,e.value)));let n=B.visit(t);return new _(Math.pow(e.value,n.value))}hex(e,t){if(t instanceof A)return new E(Math.pow(e.value,Z(t.value,e.value)));let n=xe.visit(t);return new E(Math.pow(e.value,n.value))}percentage(e,t){if(t instanceof A)return new _(Math.pow(e.value/100,t.value)/100);let n=B.visit(t);return new _(Math.pow(e.value/100,n.value))}unitOfMeasurement(e,t){if(t instanceof A)return new D(Math.pow(e.value,Z(t.value,e.value)),e.unit);if(t instanceof D){let a=be(t,e);return new D(Math.pow(e.value,a.value),e.unit)}let n=B.visit(t);return new D(Math.pow(e.value,n.value),e.unit)}};var Mn=class{constructor(e){this.right=e}visit(e){if(this.right instanceof A)throw new k;if(e instanceof _)return this.number(e,this.right);if(e instanceof E)return this.hex(e,this.right);if(e instanceof A)return this.percentage(e,this.right);if(e instanceof D)return this.unitOfMeasurement(e,this.right);throw new k}number(e,t){let n=B.visit(t);return new _(e.value<<n.value)}hex(e,t){let n=xe.visit(t);return new E(e.value<<n.value)}percentage(e,t){let n=B.visit(t);return new _(e.value/100<<n.value)}unitOfMeasurement(e,t){if(t instanceof D){let a=be(t,e);return new D(e.value<<a.value,e.unit)}let n=B.visit(t);return new D(e.value<<n.value,e.unit)}},Pn=class{constructor(e){this.right=e}visit(e){if(this.right instanceof A)throw new k;if(e instanceof _)return this.number(e,this.right);if(e instanceof E)return this.hex(e,this.right);if(e instanceof A)return this.percentage(e,this.right);if(e instanceof D)return this.unitOfMeasurement(e,this.right);throw new k}number(e,t){let n=B.visit(t);return new _(e.value>>n.value)}hex(e,t){let n=xe.visit(t);return new E(e.value>>n.value)}percentage(e,t){let n=B.visit(t);return new _(e.value/100>>n.value)}unitOfMeasurement(e,t){if(t instanceof D){let a=be(t,e);return new D(e.value>>a.value,e.unit)}let n=B.visit(t);return new D(e.value>>n.value,e.unit)}};var An=class{constructor(e){this.right=e}visit(e){if(e instanceof _)return this.number(e,this.right);if(e instanceof E)return this.hex(e,this.right);if(e instanceof A)return this.percentage(e,this.right);if(e instanceof D)return this.unitOfMeasurement(e,this.right);throw new k}number(e,t){if(t instanceof A)return new _(e.value%Z(t.value,e.value));let n=B.visit(t);return new _(e.value%n.value)}hex(e,t){if(t instanceof A)return new E(e.value%Z(t.value,e.value));let n=xe.visit(t);return new E(e.value%n.value)}percentage(e,t){if(t instanceof A)return new _(e.value/100%t.value/100);let n=B.visit(t);return new _(e.value/100%n.value)}unitOfMeasurement(e,t){if(t instanceof A)return new D(e.value%Z(t.value,e.value),e.unit);if(t instanceof D){let a=be(t,e);return new D(e.value%a.value,e.unit)}let n=B.visit(t);return new D(e.value%n.value,e.unit)}};var Mt=class{constructor(e){this.right=e}visit(e){if(e instanceof _)return this.number(e,this.right);if(e instanceof E)return this.hex(e,this.right);if(e instanceof A)return this.percentage(e,this.right);if(e instanceof D)return this.unitOfMeasurement(e,this.right);throw new k}number(e,t){if(t instanceof A)return new _(e.value*Z(t.value,e.value));let n=B.visit(t);return new _(e.value*n.value)}hex(e,t){if(t instanceof A)return new E(e.value*Z(t.value,e.value));let n=xe.visit(t);return new E(e.value*n.value)}percentage(e,t){if(t instanceof A)return new _(e.value/100*t.value/100);let n=B.visit(t);return new _(e.value/100*n.value)}unitOfMeasurement(e,t){if(t instanceof A)return new D(e.value*Z(t.value,e.value),e.unit);if(t instanceof D){let a=be(t,e);return new D(e.value*a.value,e.unit)}let n=B.visit(t);return new D(e.value*n.value,e.unit)}};var Pt=class{constructor(e){this.right=e}visit(e){if(e instanceof _)return this.number(e,this.right);if(e instanceof E)return this.hex(e,this.right);if(e instanceof A)return this.percentage(e,this.right);if(e instanceof D)return this.unitOfMeasurement(e,this.right);throw new k}number(e,t){if(t instanceof A)return new _(e.value-Z(t.value,e.value));let n=B.visit(t);return new _(e.value-n.value)}hex(e,t){if(t instanceof A)return new E(e.value-Z(t.value,e.value));let n=xe.visit(t);return new E(e.value-n.value)}percentage(e,t){if(t instanceof A)return new _(e.value/100-t.value/100);let n=B.visit(t);return new _(e.value/100-n.value)}unitOfMeasurement(e,t){if(t instanceof A)return new D(e.value-Z(t.value,e.value),e.unit);if(t instanceof D){let a=be(t,e);return new D(e.value-a.value,e.unit)}let n=B.visit(t);return new D(e.value-n.value,e.unit)}};var Ge={LogicalShift_left(i,e,t){let n=i.visit(),a=t.visit();return n.accept(new Mn(a))},LogicalShift_right(i,e,t){let n=i.visit(),a=t.visit();return n.accept(new Pn(a))},AS_addition(i,e,t){let n=i.visit(),a=t.visit();return n.accept(new xt(a))},AS_subtraction(i,e,t){let n=i.visit(),a=t.visit();return n.accept(new Pt(a))},MD_multiplication(i,e,t){let n=i.visit(),a=t.visit();return n.accept(new Mt(a))},MD_division(i,e,t){let n=i.visit(),a=t.visit();return n.accept(new Rt(a))},MD_modulo(i,e,t){let n=i.visit(),a=t.visit();return n.accept(new An(a))},E_exponent(i,e,t){let n=i.visit(),a=t.visit();return n.accept(new Dt(a))},P_parenthesis(i,e,t){return e.visit()},Primitive_positive(i,e){return Ye.visitPositive(e.visit())},Primitive_negative(i,e){return Ye.visitNegative(e.visit())},constant(i){return Ye.visitConstant(this.sourceString)},hex(i,e){return Ye.visitHex(this.sourceString)},number_fract(i,e,t){return Ye.visitNumber(this.sourceString)},number_whole(i){return Ye.visitNumber(this.sourceString)}};var $={log:(...i)=>{},error:(...i)=>{},warn:(...i)=>{},info:(...i)=>{},debug:(...i)=>{},assert:(i,...e)=>{}};var On=class extends Ne{constructor(){super("BasicArithmeticProvider"),this.semantics=ai.default.createSemantics(),this.semantics.addOperation("visit()",Ge)}enabled(){return j.getInstance().arithmeticProvider.enabled}provide(e,t=!0){try{let n=ai.default.match(e);if(n.failed())return;let a=this.semantics(n).visit();return t?a:a.accept(this.formatVisitor)}catch(n){$.error(n);return}}};var li=Se(wu());var Sr=Se(zr()),oi=i=>{switch(i){case"sunday":return 0;case"monday":return 1;case"tuesday":return 2;case"wednesday":return 3;case"thursday":return 4;case"friday":return 5;case"saturday":return 6}return 0},bu=i=>{let e=(0,Sr.default)().startOf("day"),t=(0,Sr.default)().isoWeekday(i);return t.isSame(e,"day")?t.add(1,"week"):t.isSameOrAfter(e)?t:t.add(1,"week")},xu=i=>{let e=(0,Sr.default)().startOf("day"),t=(0,Sr.default)().isoWeekday(i);return t.isSame(e,"day")?t.subtract(1,"week"):t.isBefore(e)?t:t.subtract(1,"week")};var st=Se(zr()),En=class extends Ne{constructor(){super("DatetimeProvider"),this.semantics=li.default.createSemantics(),this.semantics.addOperation("visit()",{Addition(e,t,n){let a=e.visit(),u=parseInt(n.child(0).sourceString),p=n.child(1).sourceString;return new ye(a.value.add(u,p))},Subtraction(e,t,n){let a=e.visit(),u=parseInt(n.child(0).sourceString),p=n.child(1).sourceString;return new ye(a.value.subtract(u,p))},Primitive(e){return e.visit()},Now(e){return new ye((0,st.default)())},Today(e){return new ye((0,st.default)().startOf("day"))},Tomorrow(e){return new ye((0,st.default)().add(1,"day").startOf("day"))},Yesterday(e){return new ye((0,st.default)().subtract(1,"day").startOf("day"))},NextDayOfWeek(e,t){let n=t.sourceString.toLowerCase(),a=oi(n);return new ye(bu(a))},LastDayOfWeek(e,t){let n=t.sourceString.toLowerCase(),a=oi(n);return new ye(xu(a))},TimeUnitSinceDate(e,t,n){let a=n.visit(),u=(0,st.default)().startOf("day").diff(a.value,e.sourceString);return new dt(`${Math.max(u,0)} ${e.sourceString}`)},TimeUnitUntilDate(e,t,n){let u=n.visit().value.diff((0,st.default)().startOf("day"),e.sourceString);return new dt(`${Math.max(u,0)} ${e.sourceString}`)},datetimeIso8601(e,t,n,a,u,p,h,v,d,g,I,y,x,S){return new ye((0,st.default)(this.sourceString))},datetimeFormatEuropeanOrUs(e,t,n,a,u,p){let h=`${e.sourceString}/${n.sourceString}/${u.sourceString} ${p.sourceString}`;switch(j.getInstance().datetimeProvider.parsingFormat){case 0:return new ye((0,st.default)(h,["DD/MM/YYYY HH:mm:ss"]));case 1:return new ye((0,st.default)(h,["MM/DD/YYYY HH:mm:ss"]))}},integer(e){return parseInt(this.sourceString)},number(e){return parseFloat(this.sourceString)}})}enabled(){return j.getInstance().datetimeProvider.enabled}provide(e,t=!0){try{let n=li.default.match(e);if(n.failed())return;let a=this.semantics(n).visit();return t?a:a.accept(this.formatVisitor)}catch(n){return}}};var ui=Se(Du());var Nn=class extends Ne{constructor(){super("DiceProvider"),this.semantics=ui.default.createSemantics();let e=(t,n)=>{if(t>n)throw new Error("'from' value must be less than or equal to 'to' value.");return Math.floor(Math.random()*(n-t+1))+t};this.semantics.addOperation("visit()",{Roll(t,n,a,u,p,h){let v=a.visit(),d=p.visit();return new _(e(v.value,d.value))},Primitive_positive(t,n){return Ye.visitPositive(n.visit())},Primitive_negative(t,n){return Ye.visitNegative(n.visit())},number_fract(t,n,a){return Ye.visitNumber(this.sourceString)},number_whole(t){return Ye.visitNumber(this.sourceString)}})}enabled(){return j.getInstance().diceProvider.enabled}provide(e,t=!0){try{let n=ui.default.match(e);if(n.failed())return;let a=this.semantics(n).visit();return t?a:a.accept(this.formatVisitor)}catch(n){$.error(n);return}}};var ci=Se(Au());var Ou=i=>i*(Math.PI/180),Eu=i=>i/(Math.PI/180);var Nu=(i,e)=>Math.log(e)/Math.log(i);var kn=class extends Ne{constructor(){super("FunctionArithmeticProvider"),this.semantics=ci.default.FunctionArithmetic.createSemantics(),this.semantics.addOperation("visit()",{...Ge,DegreesToRadians(e,t,n,a){let u=n.visit();return new _(Ou(u.value))},RadiansToDegrees(e,t,n,a){let u=n.visit();return new _(Eu(u.value))},LogBase(e,t,n,a,u,p){let h=n.visit(),v=u.visit();return new _(Nu(h.value,v.value))},JavascriptMathObjectFunction(e,t,n,a){let u=e.sourceString.toLowerCase(),p=n.asIteration().children.map(v=>v.visit().value),h=Math[u];return new _(h?h(...p):0)}})}enabled(){return j.getInstance().functionArithmeticProvider.enabled}provide(e,t=!0){try{let n=ci.default.FunctionArithmetic.match(e);if(n.failed())return;let a=this.semantics(n).visit();return t?a:a.accept(this.formatVisitor)}catch(n){$.error(n);return}}};var pi=Se(Lu());var Tn=class{constructor(e){this.right=e}visit(e){if(e instanceof _)return e.value=yu(e.value,this.right.value),e;throw new k}};var Cn=class{constructor(e){this.right=e}visit(e){if(e instanceof _)return e.value=gu(e.value,this.right.value),e;throw new k}};var Fn=class{constructor(e){this.right=e}visit(e){if(this.right instanceof A)throw new k;if(e instanceof _){let t=B.visit(this.right);return new A(Iu(e.value,t.value))}throw new k}};var qn=class{constructor(e){this.right=e}visit(e){if(this.right instanceof A)throw new k;if(e instanceof A){let t=B.visit(this.right);return this.right.value=Z(e.value,t.value),this.right}throw new k}};var Un=class extends Ne{constructor(){super("PercentageArithmeticProvider"),this.semantics=pi.default.PercentageArithmetic.createSemantics(),this.semantics.addOperation("visit()",{...Ge,PercentageOf(e,t,n){let a=e.visit(),u=n.visit();return a.accept(new qn(u))},IncreaseBy(e,t,n,a){let u=t.visit(),p=a.visit();return u.accept(new Cn(p))},DecreaseBy(e,t,n,a){let u=t.visit(),p=a.visit();return u.accept(new Tn(p))},PercentageIncreaseOrDecrease(e,t,n,a){let u=t.visit(),p=a.visit();return u.accept(new Fn(p))},percentage(e,t){return new A(parseFloat(e.sourceString))}})}enabled(){return j.getInstance().percentageArithmeticProvider.enabled}provide(e,t=!0){try{let n=pi.default.PercentageArithmetic.match(e);if(n.failed())return;let a=this.semantics(n).visit();return t?a:a.accept(this.formatVisitor)}catch(n){$.error(n);return}}};var mi=Se(Fu());var Yn=Se(Rn()),Gn=class extends Ne{constructor(){super("UnitsOfMeasurementProvider"),this.semantics=mi.default.UnitsOfMeasurementArithmetic.createSemantics(),this.semantics.addOperation("visit()",{...Ge,Conversion_best(e,t,n,a){let u=t.visit(),p=(0,Yn.default)(u.value).from(u.unit).toBest();return new D(p.val,p.unit)},Conversion_convert(e,t,n,a){let u=t.visit(),p=a.visit();return new D((0,Yn.default)(u.value).from(u.unit).to(p.unit),p.unit)},ConversionPossiblities(e,t,n,a){let u=t.visit(),p=(0,Yn.default)().from(u.unit).possibilities().join(", ");return new dt(p)},UoM(e,t){let n=e.visit(),a=t.visit();return new D(n.value,a.unit)},Unit(e){return new D(0,this.sourceString)},percentage(e,t){return new A(parseFloat(e.sourceString))}})}enabled(){return j.getInstance().unitOfMeasurementProvider.enabled}provide(e,t=!0){try{let n=mi.default.UnitsOfMeasurementArithmetic.match(e);if(n.failed())return;let a=this.semantics(n).visit();return t?a:a.accept(this.formatVisitor)}catch(n){$.error(n);return}}};var fi=Se(Bu()),Ii=Se(Wu()),gi=Se(ju());var We=class i{static magnitudeSqrt(e){return e.x*e.x+e.y*e.y}static magnitude(e){return Math.sqrt(i.magnitudeSqrt(e))}static normalise(e){let t=i.magnitude(e);return t===0?i.zero():{x:e.x/t,y:e.y/t}}static dot(e,t){return e.x*t.x+e.y*t.y}static distance(e,t){let n=t.x-e.x,a=t.y-e.y;return Math.sqrt(n*n+a*a)}static distanceSq(e,t){let n=t.x-e.x,a=t.y-e.y;return n*n+a*a}static angleBetween(e,t){let n=i.dot(e,t),a=i.magnitude(e)*i.magnitude(t);return Math.acos(n/a)}static cross(e,t){return e.x*t.y-e.y*t.x}static lerp(e,t,n){n=Math.max(0,Math.min(1,n));let a=e.x+(t.x-e.x)*n,u=e.y+(t.y-e.y)*n;return{x:a,y:u}}static zero(){return{x:0,y:0}}static one(){return{x:1,y:1}}};var ze=class i{static magnitudeSqrt(e){return e.x*e.x+e.y*e.y+e.z*e.z}static magnitude(e){return Math.sqrt(i.magnitudeSqrt(e))}static normalise(e){let t=i.magnitude(e);return t===0?i.zero():{x:e.x/t,y:e.y/t,z:e.z/t}}static dot(e,t){return e.x*t.x+e.y*t.y+e.z*t.z}static distance(e,t){let n=t.x-e.x,a=t.y-e.y,u=t.z-e.z;return Math.sqrt(n*n+a*a+u*u)}static distanceSq(e,t){let n=t.x-e.x,a=t.y-e.y,u=t.z-e.z;return n*n+a*a+u*u}static angleBetween(e,t){let n=i.dot(e,t),a=i.magnitude(e)*i.magnitude(t);return Math.acos(n/a)}static cross(e,t){let n=e.y*t.z-e.z*t.y,a=e.z*t.x-e.x*t.z,u=e.x*t.y-e.y*t.x;return{x:n,y:a,z:u}}static lerp(e,t,n){n=Math.max(0,Math.min(1,n));let a=e.x+(t.x-e.x)*n,u=e.y+(t.y-e.y)*n,p=e.z+(t.z-e.z)*n;return{x:a,y:u,z:p}}static zero(){return{x:0,y:0,z:0}}static one(){return{x:1,y:1,z:1}}};var Ze=class i{static magnitudeSqrt(e){return e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w}static magnitude(e){return Math.sqrt(i.magnitudeSqrt(e))}static normalise(e){let t=i.magnitude(e);return t===0?i.zero():{x:e.x/t,y:e.y/t,z:e.z/t,w:e.w/t}}static dot(e,t){return e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w}static distance(e,t){let n=t.x-e.x,a=t.y-e.y,u=t.z-e.z,p=t.w-e.w;return Math.sqrt(n*n+a*a+u*u+p*p)}static distanceSq(e,t){let n=t.x-e.x,a=t.y-e.y,u=t.z-e.z,p=t.w-e.w;return n*n+a*a+u*u+p*p}static angleBetween(e,t){let n=i.dot(e,t),a=i.magnitude(e)*i.magnitude(t);return Math.acos(n/a)}static lerp(e,t,n){n=Math.max(0,Math.min(1,n));let a=e.x+(t.x-e.x)*n,u=e.y+(t.y-e.y)*n,p=e.z+(t.z-e.z)*n,h=e.w+(t.w-e.w)*n;return{x:a,y:u,z:p,w:h}}static zero(){return{x:0,y:0,z:0,w:0}}static one(){return{x:1,y:1,z:1,w:1}}};var vi=class{visit(e){if(e instanceof U)return e;if(e instanceof _||e instanceof E)return new U({x:e.value,y:e.value});throw new Be}},Re=new vi;var hi=class{visit(e){if(e instanceof T)return e;if(e instanceof _||e instanceof E)return new T({x:e.value,y:e.value,z:e.value});throw new Be}},De=new hi;var di=class{visit(e){if(e instanceof C)return e;if(e instanceof _||e instanceof E)return new C({x:e.value,y:e.value,z:e.value,w:e.value});throw new Be}},Me=new di;var Xt=class{constructor(e){this.right=e}visit(e){if(e instanceof U){let t=Re.visit(e),n=Re.visit(this.right);return this.vector2(t,n)}if(e instanceof T){let t=De.visit(e),n=De.visit(this.right);return this.vector3(t,n)}if(e instanceof C){let t=Me.visit(e),n=Me.visit(this.right);return this.vector4(t,n)}throw new k}vector2(e,t){return new U({x:e.value.x+t.value.x,y:e.value.y+t.value.y})}vector3(e,t){return new T({x:e.value.x+t.value.x,y:e.value.y+t.value.y,z:e.value.z+t.value.z})}vector4(e,t){return new C({x:e.value.x+t.value.x,y:e.value.y+t.value.y,z:e.value.z+t.value.z,w:e.value.w+t.value.w})}};var er=class{constructor(e){this.right=e}visit(e){if(e instanceof U){let t=Re.visit(e),n=Re.visit(this.right);return this.vector2(t,n)}if(e instanceof T){let t=De.visit(e),n=De.visit(this.right);return this.vector3(t,n)}if(e instanceof C){let t=Me.visit(e),n=Me.visit(this.right);return this.vector4(t,n)}throw new k}vector2(e,t){return new U({x:e.value.x/t.value.x,y:e.value.y/t.value.y})}vector3(e,t){return new T({x:e.value.x/t.value.x,y:e.value.y/t.value.y,z:e.value.z/t.value.z})}vector4(e,t){return new C({x:e.value.x/t.value.x,y:e.value.y/t.value.y,z:e.value.z/t.value.z,w:e.value.w/t.value.w})}};var tr=class{constructor(e){this.right=e}visit(e){if(e instanceof U){let t=Re.visit(e),n=Re.visit(this.right);return this.vector2(t,n)}if(e instanceof T){let t=De.visit(e),n=De.visit(this.right);return this.vector3(t,n)}if(e instanceof C){let t=Me.visit(e),n=Me.visit(this.right);return this.vector4(t,n)}throw new k}vector2(e,t){return new U({x:Math.pow(e.value.x,t.value.x),y:Math.pow(e.value.y,t.value.y)})}vector3(e,t){return new T({x:Math.pow(e.value.x,t.value.x),y:Math.pow(e.value.y,t.value.y),z:Math.pow(e.value.z,t.value.z)})}vector4(e,t){return new C({x:Math.pow(e.value.x,t.value.x),y:Math.pow(e.value.y,t.value.y),z:Math.pow(e.value.z,t.value.z),w:Math.pow(e.value.w,t.value.w)})}};var rr=class{constructor(e){this.right=e}visit(e){if(e instanceof U){let t=Re.visit(e),n=Re.visit(this.right);return this.vector2(t,n)}if(e instanceof T){let t=De.visit(e),n=De.visit(this.right);return this.vector3(t,n)}if(e instanceof C){let t=Me.visit(e),n=Me.visit(this.right);return this.vector4(t,n)}throw new k}vector2(e,t){return new U({x:e.value.x*t.value.x,y:e.value.y*t.value.y})}vector3(e,t){return new T({x:e.value.x*t.value.x,y:e.value.y*t.value.y,z:e.value.z*t.value.z})}vector4(e,t){return new C({x:e.value.x*t.value.x,y:e.value.y*t.value.y,z:e.value.z*t.value.z,w:e.value.w*t.value.w})}};var nr=class{constructor(e){this.right=e}visit(e){if(e instanceof U){let t=Re.visit(e),n=Re.visit(this.right);return this.vector2(t,n)}if(e instanceof T){let t=De.visit(e),n=De.visit(this.right);return this.vector3(t,n)}if(e instanceof C){let t=Me.visit(e),n=Me.visit(this.right);return this.vector4(t,n)}throw new k}vector2(e,t){return new U({x:e.value.x-t.value.x,y:e.value.y-t.value.y})}vector3(e,t){return new T({x:e.value.x-t.value.x,y:e.value.y-t.value.y,z:e.value.z-t.value.z})}vector4(e,t){return new C({x:e.value.x-t.value.x,y:e.value.y-t.value.y,z:e.value.z-t.value.z,w:e.value.w-t.value.w})}};var jn=class extends Qt{constructor(){super("VectorArithmeticProvider");this.setupVector2Arithmetic(),this.setupVector3Arithmetic(),this.setupVector4Arithmetic()}setupVector2Arithmetic(){this.vector2Semantics=fi.default.Vector2Arithmetic.createSemantics(),this.vector2Semantics.addOperation("visit()",{...Ge,AS_addition(t,n,a){let u=t.visit(),p=a.visit();return!(u instanceof U)&&!(p instanceof U)?u.accept(new xt(p)):u.accept(new Xt(p))},AS_subtraction(t,n,a){let u=t.visit(),p=a.visit();return!(u instanceof U)&&!(p instanceof U)?u.accept(new Pt(p)):u.accept(new nr(p))},MD_multiplication(t,n,a){let u=t.visit(),p=a.visit();return!(u instanceof U)&&!(p instanceof U)?u.accept(new Mt(p)):u.accept(new rr(p))},MD_division(t,n,a){let u=t.visit(),p=a.visit();return!(u instanceof U)&&!(p instanceof U)?u.accept(new Rt(p)):u.accept(new er(p))},E_exponent(t,n,a){let u=t.visit(),p=a.visit();return!(u instanceof U)&&!(p instanceof U)?u.accept(new Dt(p)):u.accept(new tr(p))},P_parenthesis(t,n,a){return n.visit()},Vector2_parse(t,n,a,u,p,h){let v=a.visit(),d=p.visit();if(v instanceof U||d instanceof U)throw new TypeError("Expected: Number");return new U({x:v.value,y:d.value})},LengthSq_function(t,n,a,u){var p;return new _(We.magnitudeSqrt((p=a.visit())==null?void 0:p.value))},DistanceSq_function(t,n,a,u,p,h){var v,d;return new _(We.distanceSq((v=a.visit())==null?void 0:v.value,(d=p.visit())==null?void 0:d.value))},Length_function(t,n,a,u){var p;return new _(We.magnitude((p=a.visit())==null?void 0:p.value))},Distance_function(t,n,a,u,p,h){var v,d;return new _(We.distance((v=a.visit())==null?void 0:v.value,(d=p.visit())==null?void 0:d.value))},Normalise_function(t,n,a,u){var p;return new U(We.normalise((p=a.visit())==null?void 0:p.value))},Dot_function(t,n,a,u,p,h){var v,d;return new _(We.dot((v=a.visit())==null?void 0:v.value,(d=p.visit())==null?void 0:d.value))},AngleBetween_function(t,n,a,u,p,h){var v,d;return new _(We.angleBetween((v=a.visit())==null?void 0:v.value,(d=p.visit())==null?void 0:d.value))},Cross_function(t,n,a,u,p,h){var v,d;return new _(We.cross((v=a.visit())==null?void 0:v.value,(d=p.visit())==null?void 0:d.value))},Lerp_function(t,n,a,u,p,h,v,d){var g,I,y;return new U(We.lerp((g=a.visit())==null?void 0:g.value,(I=p.visit())==null?void 0:I.value,(y=v.visit())==null?void 0:y.value))}})}setupVector3Arithmetic(){this.vector3Semantics=Ii.default.Vector3Arithmetic.createSemantics(),this.vector3Semantics.addOperation("visit()",{...Ge,AS_addition(t,n,a){let u=t.visit(),p=a.visit();return!(u instanceof T)&&!(p instanceof T)?u.accept(new xt(p)):u.accept(new Xt(p))},AS_subtraction(t,n,a){let u=t.visit(),p=a.visit();return!(u instanceof T)&&!(p instanceof T)?u.accept(new Pt(p)):u.accept(new nr(p))},MD_multiplication(t,n,a){let u=t.visit(),p=a.visit();return!(u instanceof T)&&!(p instanceof T)?u.accept(new Mt(p)):u.accept(new rr(p))},MD_division(t,n,a){let u=t.visit(),p=a.visit();return!(u instanceof T)&&!(p instanceof T)?u.accept(new Rt(p)):u.accept(new er(p))},E_exponent(t,n,a){let u=t.visit(),p=a.visit();return!(u instanceof T)&&!(p instanceof T)?u.accept(new Dt(p)):u.accept(new tr(p))},P_parenthesis(t,n,a){return n.visit()},Vector3_parse(t,n,a,u,p,h,v,d){let g=a.visit(),I=p.visit(),y=v.visit();if(g instanceof T||I instanceof T||y instanceof T)throw new TypeError("Expected: Number");return new T({x:g.value,y:I.value,z:y.value})},LengthSq_function(t,n,a,u){var p;return new _(ze.magnitudeSqrt((p=a.visit())==null?void 0:p.value))},DistanceSq_function(t,n,a,u,p,h){var v,d;return new _(ze.distanceSq((v=a.visit())==null?void 0:v.value,(d=p.visit())==null?void 0:d.value))},Length_function(t,n,a,u){var p;return new _(ze.magnitude((p=a.visit())==null?void 0:p.value))},Distance_function(t,n,a,u,p,h){var v,d;return new _(ze.distance((v=a.visit())==null?void 0:v.value,(d=p.visit())==null?void 0:d.value))},Normalise_function(t,n,a,u){var p;return new T(ze.normalise((p=a.visit())==null?void 0:p.value))},Dot_function(t,n,a,u,p,h){var v,d;return new _(ze.dot((v=a.visit())==null?void 0:v.value,(d=p.visit())==null?void 0:d.value))},AngleBetween_function(t,n,a,u,p,h){var v,d;return new _(ze.angleBetween((v=a.visit())==null?void 0:v.value,(d=p.visit())==null?void 0:d.value))},Cross_function(t,n,a,u,p,h){var v,d;return new T(ze.cross((v=a.visit())==null?void 0:v.value,(d=p.visit())==null?void 0:d.value))},Lerp_function(t,n,a,u,p,h,v,d){var g,I,y;return new T(ze.lerp((g=a.visit())==null?void 0:g.value,(I=p.visit())==null?void 0:I.value,(y=v.visit())==null?void 0:y.value))}})}setupVector4Arithmetic(){this.vector4Semantics=gi.default.Vector4Arithmetic.createSemantics(),this.vector4Semantics.addOperation("visit()",{...Ge,AS_addition(t,n,a){let u=t.visit(),p=a.visit();return!(u instanceof C)&&!(p instanceof C)?u.accept(new xt(p)):u.accept(new Xt(p))},AS_subtraction(t,n,a){let u=t.visit(),p=a.visit();return!(u instanceof C)&&!(p instanceof C)?u.accept(new Pt(p)):u.accept(new nr(p))},MD_multiplication(t,n,a){let u=t.visit(),p=a.visit();return!(u instanceof C)&&!(p instanceof C)?u.accept(new Mt(p)):u.accept(new rr(p))},MD_division(t,n,a){let u=t.visit(),p=a.visit();return!(u instanceof C)&&!(p instanceof C)?u.accept(new Rt(p)):u.accept(new er(p))},E_exponent(t,n,a){let u=t.visit(),p=a.visit();return!(u instanceof C)&&!(p instanceof C)?u.accept(new Dt(p)):u.accept(new tr(p))},P_parenthesis(t,n,a){return n.visit()},Vector4_parse(t,n,a,u,p,h,v,d,g,I){let y=a.visit(),x=p.visit(),S=v.visit(),V=g.visit();if(y instanceof C||x instanceof C||S instanceof C||V instanceof C)throw new TypeError("Expected: Number");return new C({x:y.value,y:x.value,z:S.value,w:V.value})},LengthSq_function(t,n,a,u){var p;return new _(Ze.magnitudeSqrt((p=a.visit())==null?void 0:p.value))},DistanceSq_function(t,n,a,u,p,h){var v,d;return new _(Ze.distanceSq((v=a.visit())==null?void 0:v.value,(d=p.visit())==null?void 0:d.value))},Length_function(t,n,a,u){var p;return new _(Ze.magnitude((p=a.visit())==null?void 0:p.value))},Distance_function(t,n,a,u,p,h){var v,d;return new _(Ze.distance((v=a.visit())==null?void 0:v.value,(d=p.visit())==null?void 0:d.value))},Normalise_function(t,n,a,u){var p;return new C(Ze.normalise((p=a.visit())==null?void 0:p.value))},Dot_function(t,n,a,u,p,h){var v,d;return new _(Ze.dot((v=a.visit())==null?void 0:v.value,(d=p.visit())==null?void 0:d.value))},AngleBetween_function(t,n,a,u,p,h){var v,d;return new _(Ze.angleBetween((v=a.visit())==null?void 0:v.value,(d=p.visit())==null?void 0:d.value))},Lerp_function(t,n,a,u,p,h,v,d){var g,I,y;return new C(Ze.lerp((g=a.visit())==null?void 0:g.value,(I=p.visit())==null?void 0:I.value,(y=v.visit())==null?void 0:y.value))}})}tryParseVectorArithmetic(t){let n=gi.default.Vector4Arithmetic.match(t);if(n.succeeded())return this.vector4Semantics(n).visit();let a=Ii.default.Vector3Arithmetic.match(t);if(a.succeeded())return this.vector3Semantics(a).visit();let u=fi.default.Vector2Arithmetic.match(t);if(u.succeeded())return this.vector2Semantics(u).visit()}enabled(){return j.getInstance().vectorArithmeticProvider.enabled}provide(t,n=!0){try{let a=this.tryParseVectorArithmetic(t);return a===void 0?void 0:n?a:a.accept(this.formatVisitor)}catch(a){$.error(a);return}}};var $u=i=>[...i].reduce((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0,0);var yi=class{constructor(){this._debugMode=!1;this.providersMap=new Map,this.settings=j.getInstance(),this.registerCoreProviders()}registerProvider(e){this.providersMap.set($u(e.name),e)}provideFirst(e,t=!1){for(let[,n]of this.providersMap)try{if(!n.enabled())continue;let a=n.provide(e,t);if(a!==void 0)return t?a:(!this.settings.engine.explicitMode&&this.settings.arithmeticProvider&&(a=`= ${a}`),this._debugMode?`${a} [${n.name}]`:`${a}`)}catch(a){$.error(a);continue}}registerCoreProviders(){this.registerProvider(new Gn),this.registerProvider(new En),this.registerProvider(new Un),this.registerProvider(new On),this.registerProvider(new kn),this.registerProvider(new jn),this.registerProvider(new Nn)}},sr=new yi;var $n=class extends St{constructor(){super(...arguments);this.variableAssignmentRegex=new RegExp(/^(\$\w+)\s+=/);this.variableSubstitutionRegex=new RegExp(/(\$\w+)/g);this.variableMap=new Map}execute(t){let n=t.match(this.variableAssignmentRegex);if(n){let a=n[1];this.assignVariable(a,t)}else t=this.substituteVariables(t);return t}assignVariable(t,n){let a=n.indexOf("=");if(a===-1)return;let u=n.substring(a+1),p=sr.provideFirst(u,!0);p!==void 0&&this.variableMap.set(t,p)}substituteVariables(t){return t.replace(this.variableSubstitutionRegex,n=>{var u;let a=(u=this.variableMap.get(n))==null?void 0:u.value;return a!==void 0?a:n})}};var Ku=require("@codemirror/language"),Zu=require("@codemirror/state"),Ju=require("@codemirror/view");var Kn=class{constructor(e){this.ignoreNodeForMaskString=["Document","quote","list","HyperMD-list-line"];$.debug("[SolveViewPlugin] Constructer"),this.userSettings=j.getInstance(),this.processingPipeline=new cn().addStage(_a).addStage(ya).addStage(new $n),this.decorations=this.buildDecorations(e)}update(e){(e.docChanged||e.viewportChanged)&&(et.emit(0,1),this.decorations=this.buildDecorations(e.view),et.emit(0,0))}destroy(){$.debug("[SolveViewPlugin] Destroyed")}buildDecorations(e){let t=new Zu.RangeSetBuilder,n=(0,Ku.syntaxTree)(e.state),a=e.visibleRanges,u=new Set,p=!0,h=0,v=0,d=!1;for(let{from:g,to:I}of a){let y=new Array;n.iterate({from:g,to:I,enter:V=>{if(this.isNodeIgnoredFromMask(V.type.name))return;p&&(p=!1,h=V.to,v=V.from);let K=V.from-h<=1;V.to<=h||K?(K&&(h=V.to),d=!0):(y.push([v,h]),v=V.from,h=V.to,d=!1)}}),d&&y.push([v,h]);let x=e.state.doc.iterRange(g,I),S=0;for(let V of x){let K=g+S,re=e.state.doc.lineAt(K),Pe=re.text.trim();if(!Pe||Pe.length===0){S+=V.length;continue}if(u.has(re.number)){S+=V.length;continue}if(this.isRangeInMask(y,re.from,re.to)){S+=V.length;continue}Pe=this.processingPipeline.process(Pe);let It=this.provideDecoration(Pe,re.number);It&&t.add(re.to,re.to,It),u.add(re.number),S+=V.length}}return t.finish()}isNodeIgnoredFromMask(e){for(let t=0;t<this.ignoreNodeForMaskString.length;t++){let n=this.ignoreNodeForMaskString[t];if(e.startsWith(n))return!0}return!1}isRangeInMask(e,t,n){for(let a=0;a<e.length;a++){let[u,p]=e[a];if(t>=u&&n<=p)return!0}return!1}provideDecoration(e,t){let n=!1;if(this.userSettings.engine.explicitMode)if(e.trimEnd().endsWith("="))e=e.substring(0,e.length-1).trimEnd(),n=!0;else return;let a=sr.provideFirst(e);if(a===void 0)return;let u=e.toLowerCase().trim(),p=a.startsWith("= ")?a.substring(2).toLocaleLowerCase().trim():a.toLowerCase().trim();if(u!==p&&!(this.userSettings.engine.explicitMode&&!n))return Ju.Decoration.widget({widget:new ln(a,t),side:1})}};var _i=(e=>(e.RegisterProvider="solve-register-provider",e))(_i||{});var Qu={animate__bounce:"bounce",animate__flash:"flash",animate__pulse:"pulse",animate__rubberBand:"rubberBand",animate__shakeX:"shakeX",animate__shakeY:"shakeY",animate__headShake:"headShake",animate__swing:"swing",animate__tada:"tada",animate__wobble:"wobble",animate__jello:"jello",animate__heartBeat:"heartBeat",animate__backInDown:"backInDown",animate__backInLeft:"backInLeft",animate__backInRight:"backInRight",animate__backInUp:"backInUp",animate__bounceIn:"bounceIn",animate__bounceInDown:"bounceInDown",animate__bounceInLeft:"bounceInLeft",animate__bounceInRight:"bounceInRight",animate__bounceInUp:"bounceInUp",animate__fadeIn:"fadeIn",animate__fadeInDown:"fadeInDown",animate__fadeInDownBig:"fadeInDownBig",animate__fadeInLeft:"fadeInLeft",animate__fadeInLeftBig:"fadeInLeftBig",animate__fadeInRight:"fadeInRight",animate__fadeInRightBig:"fadeInRightBig",animate__fadeInUp:"fadeInUp",animate__fadeInUpBig:"fadeInUpBig",animate__fadeInTopLeft:"fadeInTopLeft",animate__fadeInTopRight:"fadeInTopRight",animate__fadeInBottomLeft:"fadeInBottomLeft",animate__fadeInBottomRight:"fadeInBottomRight",animate__flip:"flip",animate__flipInX:"flipInX",animate__flipInY:"flipInY",animate__lightSpeedInRight:"lightSpeedInRight",animate__lightSpeedInLeft:"lightSpeedInLeft",animate__rotateIn:"rotateIn",animate__rotateInDownLeft:"rotateInDownLeft",animate__rotateInDownRight:"rotateInDownRight",animate__rotateInUpLeft:"rotateInUpLeft",animate__rotateInUpRight:"rotateInUpRight",animate__jackInTheBox:"jackInTheBox",animate__rollIn:"rollIn",animate__zoomIn:"zoomIn",animate__zoomInDown:"zoomInDown",animate__zoomInLeft:"zoomInLeft",animate__zoomInRight:"zoomInRight",animate__zoomInUp:"zoomInUp",animate__slideInDown:"slideInDown",animate__slideInLeft:"slideInLeft",animate__slideInRight:"slideInRight",animate__slideInUp:"slideInUp"};var F=require("obsidian"),Zn=class extends F.PluginSettingTab{constructor(t,n){super(t,n);this.plugin=n}display(){this.containerEl.empty(),this.displayIntroduction(),this.displayEngineSettings(),this.displayInterfaceSettings(),this.displayProviderManagementSettings(),this.displayArithmeticProviderSettings(),this.displayDatetimeProviderSettings(),this.displayFloatSettings(),this.displayPercentageSettings(),this.displayDatetimeSettings(),this.displayHexSettings(),this.displayUnitOfMeasurementSettings(),this.displayStyleSettings()}displayIntroduction(){new F.Setting(this.containerEl).setName("Introduction").setHeading(),new F.Setting(this.containerEl).setDesc("Solve is an unobtrusive Obsidian plugin that quietly processes equations and patterns in real time, inspired by NoteMaster's Smart Mode. With solid engineering at its core, Solve enhances note-taking without relying on ChatGPT. For instance, effortlessly calculates date and time expressions (e.g., 'Now + 20 days'), performs arithmetic (e.g., '10 + 5'), and more features are coming soon.")}displayEngineSettings(){new F.Setting(this.containerEl).setName("Engine").setHeading(),new F.Setting(this.containerEl).setName("Explicit mode").setDesc(`Solve will only display results for sentences ending with '=' sign. Default is ${R.engine.explicitMode}`).addToggle(t=>t.setValue(this.plugin.settings.engine.explicitMode).onChange(async n=>{this.plugin.settings.engine.explicitMode=n,await this.plugin.saveSettings()}))}displayProviderManagementSettings(){new F.Setting(this.containerEl).setName("Provider management").setHeading(),new F.Setting(this.containerEl).setName("Arithmetic").setDesc(`Enable the arithmetic provider e.g. 10 + 2. Default is ${R.arithmeticProvider.enabled}`).addToggle(t=>t.setValue(this.plugin.settings.arithmeticProvider.enabled).onChange(async n=>{this.plugin.settings.arithmeticProvider.enabled=n,await this.plugin.saveSettings()})),new F.Setting(this.containerEl).setName("Function Arithmetic").setDesc(`Enable the function arithmetic provider e.g. sin(), cos(). Default is ${R.functionArithmeticProvider.enabled}`).addToggle(t=>t.setValue(this.plugin.settings.functionArithmeticProvider.enabled).onChange(async n=>{this.plugin.settings.functionArithmeticProvider.enabled=n,await this.plugin.saveSettings()})),new F.Setting(this.containerEl).setName("Vector Arithmetic").setDesc(`Enable the vector arithmetic provider e.g. (10, 22.3), vec3(1.0, 23, 18.3). Default is ${R.vectorArithmeticProvider.enabled}`).addToggle(t=>t.setValue(this.plugin.settings.vectorArithmeticProvider.enabled).onChange(async n=>{this.plugin.settings.vectorArithmeticProvider.enabled=n,await this.plugin.saveSettings()})),new F.Setting(this.containerEl).setName("Percentage").setDesc(`Enable the percentage provider e.g. 10% of 200, increase 20 by 10%. Default is ${R.percentageArithmeticProvider.enabled}`).addToggle(t=>t.setValue(this.plugin.settings.percentageArithmeticProvider.enabled).onChange(async n=>{this.plugin.settings.percentageArithmeticProvider.enabled=n,await this.plugin.saveSettings()})),new F.Setting(this.containerEl).setName("Datetime").setDesc(`Enable the datetime provider e.g. today + 20 days, last monday. Default is ${R.datetimeProvider.enabled}`).addToggle(t=>t.setValue(this.plugin.settings.datetimeProvider.enabled).onChange(async n=>{this.plugin.settings.datetimeProvider.enabled=n,await this.plugin.saveSettings()})),new F.Setting(this.containerEl).setName("Unit of Measurement").setDesc(`Enable the unit of measurement provider e.g. 10cm + 20, 200cm to m. Default is ${R.unitOfMeasurementProvider.enabled}`).addToggle(t=>t.setValue(this.plugin.settings.unitOfMeasurementProvider.enabled).onChange(async n=>{this.plugin.settings.unitOfMeasurementProvider.enabled=n,await this.plugin.saveSettings()})),new F.Setting(this.containerEl).setName("Dice").setDesc(`Enable the dice provider e.g. roll(1, 100), roll between 1 and 12. Default is ${R.diceProvider.enabled}`).addToggle(t=>t.setValue(this.plugin.settings.diceProvider.enabled).onChange(async n=>{this.plugin.settings.diceProvider.enabled=n,await this.plugin.saveSettings()}))}displayInterfaceSettings(){new F.Setting(this.containerEl).setName("Interface").setHeading(),new F.Setting(this.containerEl).setName("Show result at end of line").setDesc(`Position results at the conclusion of lines, not text's termination. Be cautious when using this setting, as it may cause overlap between the displayed result and the text on the same line. Default is ${R.interface.renderResultEndOfLine}`).addToggle(t=>{let n=this.plugin.settings.interface.renderResultEndOfLine;t.setValue(n),n?document.body.classList.add("osf--result-eol"):document.body.classList.remove("osf--result-eol"),t.onChange(async a=>{this.plugin.settings.interface.renderResultEndOfLine=a,a?document.body.classList.add("osf--result-eol"):document.body.classList.remove("osf--result-eol"),await this.plugin.saveSettings()})}),new F.Setting(this.containerEl).setName("Show status bar companion").setDesc(`Show the Solve companion in the status bar. Default is ${R.interface.showStatusBarCompanion}`).addToggle(t=>t.setValue(this.plugin.settings.interface.showStatusBarCompanion).onChange(async n=>{this.plugin.settings.interface.showStatusBarCompanion=n,n?this.plugin.setStatusBarCompanionVisibility(!0):this.plugin.setStatusBarCompanionVisibility(!1),await this.plugin.saveSettings()})),new F.Setting(this.containerEl).setName("Animate results").setDesc(`Enable animate results on the current active line that is being solved. Default is ${R.interface.animateResults}`).addToggle(t=>t.setValue(this.plugin.settings.interface.animateResults).onChange(async n=>{this.plugin.settings.interface.animateResults=n,await this.plugin.saveSettings()})),new F.Setting(this.containerEl).setName("Animation transition").setDesc(`Specify the transition class name from Animate.css to use on animated results. Default is ${R.interface.animationClass.replace("animate__","")}`).addDropdown(t=>{let n=this.plugin.settings.interface.animationClass;t.addOptions(Qu),t.setValue(n),t.onChange(async a=>{this.plugin.settings.interface.animationClass=a,await this.plugin.saveSettings()})}),new F.Setting(this.containerEl).setName("Animation duration").setDesc(`Specify the animation duration (CSS format) to use for animated results. Default is ${R.interface.animationDuration}`).addText(t=>{let n=this.plugin.settings.interface.animationDuration;t.setValue(n),t.onChange(async a=>{this.plugin.settings.interface.animationDuration=a,await this.plugin.saveSettings()})})}displayArithmeticProviderSettings(){new F.Setting(this.containerEl).setName("Arithmetic Provider").setHeading(),new F.Setting(this.containerEl).setName("Show = before the result").setDesc(`Adds the equals sign before arithmetic results to improve the natural reading of expressions. Default is ${R.arithmeticProvider.renderEqualsBeforeResult}`).addToggle(t=>{let n=this.plugin.settings.arithmeticProvider.renderEqualsBeforeResult;t.setValue(n),t.onChange(async a=>{this.plugin.settings.arithmeticProvider.renderEqualsBeforeResult=a,await this.plugin.saveSettings()})})}displayDatetimeProviderSettings(){new F.Setting(this.containerEl).setName("Datetime Provider").setHeading(),new F.Setting(this.containerEl).setName("Parsing format").setDesc("Specify the format to be used for parsing datetime values.").addDropdown(t=>{let n=this.plugin.settings.datetimeProvider.parsingFormat;switch(t.addOptions({EU:"European DD/MM/YYYY",US:"American - MM/DD/YYYY"}),n){case 0:t.setValue("EU");break;case 1:t.setValue("US");break}t.onChange(async a=>{switch(a){case"EU":this.plugin.settings.datetimeProvider.parsingFormat=0;break;case"US":this.plugin.settings.datetimeProvider.parsingFormat=1;break}await this.plugin.saveSettings()})})}displayIntegerSettings(){new F.Setting(this.containerEl).setName("Integer Result").setHeading()}displayFloatSettings(){new F.Setting(this.containerEl).setName("Float Result").setHeading(),new F.Setting(this.containerEl).setName("Decimal places").setDesc(`Adjust the number of decimal places, setting to reveal more digits for accuracy or fewer digits for simplicity in number displays. Default is ${R.floatResult.decimalPlaces}`).addSlider(t=>{let n=this.plugin.settings.floatResult.decimalPlaces;t.setLimits(0,17,1),t.setValue(n),t.sliderEl.addEventListener("mouseover",()=>{t.showTooltip()}),t.onChange(async a=>{this.plugin.settings.floatResult.decimalPlaces=a,t.showTooltip(),await this.plugin.saveSettings()})})}displayPercentageSettings(){new F.Setting(this.containerEl).setName("Percentage Result").setHeading(),new F.Setting(this.containerEl).setName("Decimal places").setDesc(`Adjust the number of decimal places, setting to reveal more digits for accuracy or fewer digits for simplicity in number displays. Default is ${R.percentageResult.decimalPlaces}`).addSlider(t=>{let n=this.plugin.settings.percentageResult.decimalPlaces;t.setLimits(0,17,1),t.setValue(n),t.sliderEl.addEventListener("mouseover",()=>{t.showTooltip()}),t.onChange(async a=>{this.plugin.settings.percentageResult.decimalPlaces=a,t.showTooltip(),await this.plugin.saveSettings()})})}displayDatetimeSettings(){new F.Setting(this.containerEl).setName("Datetime Result").setHeading(),new F.Setting(this.containerEl).setName("Format").setDesc(`The format to use when displaying a date in the result. Default is ${R.datetimeResult.format}`).addMomentFormat(t=>t.setValue(this.plugin.settings.datetimeResult.format).onChange(async n=>{this.plugin.settings.datetimeResult.format=n,await this.plugin.saveSettings()}))}displayHexSettings(){new F.Setting(this.containerEl).setName("Hex Result").setHeading(),new F.Setting(this.containerEl).setName("Value padding").setDesc(`Enable or disable padding the start of hex values with zeros for consistency. Default is ${R.hexResult.enablePadding}`).addToggle(t=>t.setValue(this.plugin.settings.hexResult.enablePadding).onChange(async n=>{this.plugin.settings.hexResult.enablePadding=n,await this.plugin.saveSettings()})),new F.Setting(this.containerEl).setName("Padding zeros").setDesc(`Specify the number of leading zeros to pad hex values with for a uniform appearance. Default is ${R.hexResult.paddingZeros}`).addSlider(t=>{let n=this.plugin.settings.hexResult.paddingZeros;t.setLimits(0,32,1),t.setValue(n),t.sliderEl.addEventListener("mouseover",()=>{t.showTooltip()}),t.onChange(async a=>{this.plugin.settings.hexResult.paddingZeros=a,t.showTooltip(),await this.plugin.saveSettings()})})}displayUnitOfMeasurementSettings(){new F.Setting(this.containerEl).setName("Unit of Measurement Result").setHeading(),new F.Setting(this.containerEl).setName("Decimal places").setDesc(`Adjust the number of decimal places, setting to reveal more digits for accuracy or fewer digits for simplicity in number displays. Default is ${R.unitOfMeasurementResult.decimalPlaces}`).addSlider(t=>{let n=this.plugin.settings.unitOfMeasurementResult.decimalPlaces;t.setLimits(0,17,1),t.setValue(n),t.sliderEl.addEventListener("mouseover",()=>{t.showTooltip()}),t.onChange(async a=>{this.plugin.settings.unitOfMeasurementResult.decimalPlaces=a,t.showTooltip(),await this.plugin.saveSettings()})}),new F.Setting(this.containerEl).setName("Show unit name").setDesc(`Show the unit name in the result instead of the unit abbreviation. Default is ${R.unitOfMeasurementResult.unitNames}`).addToggle(t=>t.setValue(this.plugin.settings.unitOfMeasurementResult.unitNames).onChange(async n=>{this.plugin.settings.unitOfMeasurementResult.unitNames=n,await this.plugin.saveSettings()}))}displayStyleSettings(){new F.Setting(this.containerEl).setName("Style").setHeading(),new F.Setting(this.containerEl).setDesc("The font family and font size settings are inherited from the Obsidian text font. For more advanced styling options, consider using the Style Settings plugin by @mgmeyers.")}};function Xu(i,e=-1){let t=i.filter(n=>n>e);return t.length===0?e:Math.min(...t)}function ec(i,e,t,n=!0){return n?i.substring(0,e).trimEnd()+t+i.substring(e).trim():i.substring(0,e)+t+i.substring(e)}var tc=require("@codemirror/view"),Qn=require("obsidian"),Jn=class extends Qn.Plugin{async onload(){$.debug("[Solve] onload()"),await this.registerEvents(),await this.restoreUserSettings(),$.debug("[Solve] User Settings Restored"),await this.registerSettings(),$.debug("[Solve] Registered: Settings"),this.app.workspace.trigger("parse-style-settings"),$.debug("[Solve] Triggered Event: parse-style-setting"),this.registerEvent(this.app.workspace.on(_i.SolveObsidianEvents,([t])=>{var n,a;$.debug("[Solve] Registered Custom Provider",t),t&&t.name&&t.name.length&&(sr.registerProvider(t),(a=(n=this.app.workspace.activeEditor)==null?void 0:n.editor)==null||a.refresh())})),$.debug("[Solve] Registered: Register Provider Event Listener"),await this.registerEditorExtensions(),$.debug("[Solve] Registered: Editor Extensions"),await this.addStatusBarCompanion(),$.debug("[Solve] Added: Status Bar Companion"),await this.registerCommands()}onunload(){$.debug("[Solve] onunload()"),et.removeAllListeners()}async saveSettings(){let t=this.settings.settings;$.debug("[Solve] Settings Saved",t),await this.saveData(t),this.app.workspace.updateOptions()}async registerEvents(){et.on(0,this.onStatusBarUpdateEvent.bind(this)),et.on(1,this.onWriteResultEvent.bind(this))}async restoreUserSettings(){this.settings=j.getInstance();let t=await this.loadData();this.settings.updateSettings(Object.assign({},R,t)),await this.restoreFeatureFlags()}async registerSettings(){this.addSettingTab(new Zn(this.app,this))}async registerEditorExtensions(){let t=await this.buildMarkdownEditorViewPlugin();this.registerEditorExtension(t)}async buildMarkdownEditorViewPlugin(){return tc.ViewPlugin.fromClass(Kn,{decorations:t=>t.decorations})}async restoreFeatureFlags(){this.settings.interface.renderResultEndOfLine?document.body.classList.add("osf--result-eol"):document.body.classList.remove("osf--result-eol")}async addStatusBarCompanion(){this.statusBarItemEl=this.addStatusBarItem(),this.settings.interface.showStatusBarCompanion||this.setStatusBarCompanionVisibility(!1),et.emit(0,0)}async registerCommands(){this.addCommand({id:"commit-result-current-line",name:"Commit result on current line",editorCallback(t,n){let a=t.getCursor("head").line+1,{containerEl:u}=t,p=u.querySelector(`#osr-${a}`);p?p.click():new Qn.Notice("Solve: Failed to commit, no result found on the current line.")}}),this.addCommand({id:"commit-result-all-visible",name:"Commit all visible results",editorCallback(t,n){let{containerEl:a}=t,u=a.querySelectorAll(".os-result");for(let p=0;p<u.length;p++){let h=u[p];h&&h.click()}}})}async setStatusBarCompanionVisibility(t){t?this.statusBarItemEl.style.display="inline-block":this.statusBarItemEl.style.display="none"}async onStatusBarUpdateEvent(t){switch(t){case 1:this.statusBarItemEl.setText("Solve \u{1F914}");break;case 0:setTimeout(()=>this.statusBarItemEl.setText("Solve \u{1F634}"),700);break}}async onWriteResultEvent(t,n){var h,v,d,g;let a=Math.max(0,t-1),u=(v=(h=this.app.workspace.activeEditor)==null?void 0:h.editor)==null?void 0:v.getLine(a);if(typeof u=="undefined")return;let p=Xu([u.indexOf("#"),u.indexOf("//")]);p>-1?u=ec(u,p,` ${n} `):u=`${u==null?void 0:u.trimEnd()} ${n}`,(g=(d=this.app.workspace.activeEditor)==null?void 0:d.editor)==null||g.setLine(a,u)}};
/*! Bundled license information:

moment/moment.js:
  (*! moment.js *)
  (*! version : 2.29.4 *)
  (*! authors : Tim Wood, Iskren Chernev, Moment.js contributors *)
  (*! license : MIT *)
  (*! momentjs.com *)
*/
